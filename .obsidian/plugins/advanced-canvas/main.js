/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => AdvancedCanvasPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian9 = require("obsidian");

// node_modules/monkey-around/mjs/index.js
function around(obj, factories) {
  const removers = Object.keys(factories).map((key) => around1(obj, key, factories[key]));
  return removers.length === 1 ? removers[0] : function() {
    removers.forEach((r) => r());
  };
}
function around1(obj, method, createWrapper) {
  const original = obj[method], hadOwn = obj.hasOwnProperty(method);
  let current = createWrapper(original);
  if (original)
    Object.setPrototypeOf(current, original);
  Object.setPrototypeOf(wrapper, current);
  obj[method] = wrapper;
  return remove;
  function wrapper(...args) {
    if (current === original && obj[method] === wrapper)
      remove();
    return current.apply(this, args);
  }
  function remove() {
    if (obj[method] === wrapper) {
      if (hadOwn)
        obj[method] = original;
      else
        delete obj[method];
    }
    if (current === original)
      return;
    current = original;
    Object.setPrototypeOf(wrapper, original || Function);
  }
}

// src/utils/patch-helper.ts
function patchObjectPrototype(plugin, target, functions) {
  const uninstaller = around(target.constructor.prototype, functions);
  plugin.register(uninstaller);
}
function patchObjectInstance(plugin, target, functions) {
  const uninstaller = around(target, functions);
  plugin.register(uninstaller);
}

// src/core/events.ts
var PLUGIN_EVENT_PREFIX = "advanced-canvas";
var CanvasEvent = {
  CanvasChanged: `${PLUGIN_EVENT_PREFIX}:canvas-changed`,
  ViewportChanged: {
    Before: `${PLUGIN_EVENT_PREFIX}:viewport-changed:before`,
    After: `${PLUGIN_EVENT_PREFIX}:viewport-changed:after`
  },
  NodeMoved: `${PLUGIN_EVENT_PREFIX}:node-moved`,
  DoubleClick: `${PLUGIN_EVENT_PREFIX}:double-click`,
  DraggingStateChanged: `${PLUGIN_EVENT_PREFIX}:dragging-state-changed`,
  NodeCreated: `${PLUGIN_EVENT_PREFIX}:node-created`,
  EdgeCreated: `${PLUGIN_EVENT_PREFIX}:edge-created`,
  NodeAdded: `${PLUGIN_EVENT_PREFIX}:node-added`,
  EdgeAdded: `${PLUGIN_EVENT_PREFIX}:edge-added`,
  NodeRemoved: `${PLUGIN_EVENT_PREFIX}:node-removed`,
  EdgeRemoved: `${PLUGIN_EVENT_PREFIX}:edge-removed`,
  NodeChanged: `${PLUGIN_EVENT_PREFIX}:node-changed`,
  EdgeChanged: `${PLUGIN_EVENT_PREFIX}:edge-changed`,
  NodeBBoxRequested: `${PLUGIN_EVENT_PREFIX}:node-bbox-requested`,
  EdgeCenterRequested: `${PLUGIN_EVENT_PREFIX}:edge-center-requested`,
  ContainingNodesRequested: `${PLUGIN_EVENT_PREFIX}:containing-nodes-requested`,
  SelectionChanged: `${PLUGIN_EVENT_PREFIX}:selection-changed`,
  ZoomToBbox: {
    Before: `${PLUGIN_EVENT_PREFIX}:zoom-to-bbox:before`,
    After: `${PLUGIN_EVENT_PREFIX}:zoom-to-bbox:after`
  },
  PopupMenuCreated: `${PLUGIN_EVENT_PREFIX}:popup-menu-created`,
  NodeInteraction: `${PLUGIN_EVENT_PREFIX}:node-interaction`,
  Undo: `${PLUGIN_EVENT_PREFIX}:undo`,
  Redo: `${PLUGIN_EVENT_PREFIX}:redo`,
  ReadonlyChanged: `${PLUGIN_EVENT_PREFIX}:readonly-changed`,
  DataRequested: `${PLUGIN_EVENT_PREFIX}:data-requested`,
  LoadData: `${PLUGIN_EVENT_PREFIX}:load-data`,
  CanvasSaved: {
    Before: `${PLUGIN_EVENT_PREFIX}:canvas-saved:before`,
    After: `${PLUGIN_EVENT_PREFIX}:canvas-saved:after`
  }
};

// src/core/canvas-patcher.ts
var CanvasPatcher = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.applyPatches();
  }
  async applyPatches() {
    var _a, _b, _c;
    const that = this;
    const canvasView = (_c = (_b = (_a = this.plugin.app.workspace.getLeavesOfType("canvas")) == null ? void 0 : _a.first()) == null ? void 0 : _b.view) != null ? _c : await new Promise((resolve) => {
      const uninstall = around(this.plugin.app.internalPlugins.plugins.canvas.views, {
        canvas: (next) => function(...args) {
          const result = next.call(this, ...args);
          resolve(result);
          uninstall();
          return result;
        }
      });
      this.plugin.register(uninstall);
    });
    patchObjectPrototype(this.plugin, canvasView, {
      getViewData: (_next) => function(..._args) {
        var _a2;
        const canvasData = this.canvas.getData();
        canvasData.metadata = (_a2 = this.canvas.metadata) != null ? _a2 : {};
        return JSON.stringify(canvasData, null, 2);
      },
      setViewData: (next) => function(json, ...args) {
        const result = next.call(this, json, ...args);
        try {
          this.canvas.metadata = JSON.parse(json).metadata;
        } catch (_e) {
          this.canvas.metadata = {};
        }
        that.triggerWorkspaceEvent(CanvasEvent.CanvasChanged, this.canvas);
        return result;
      }
    });
    patchObjectPrototype(this.plugin, canvasView.canvas, {
      markViewportChanged: (next) => function(...args) {
        that.triggerWorkspaceEvent(CanvasEvent.ViewportChanged.Before, this);
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.ViewportChanged.After, this);
        return result;
      },
      markMoved: (next) => function(node) {
        const result = next.call(this, node);
        that.triggerWorkspaceEvent(CanvasEvent.NodeMoved, this, node);
        return result;
      },
      onDoubleClick: (next) => function(event) {
        const preventDefault = { value: false };
        that.triggerWorkspaceEvent(CanvasEvent.DoubleClick, this, event, preventDefault);
        if (!preventDefault.value)
          next.call(this, event);
      },
      setDragging: (next) => function(dragging) {
        const result = next.call(this, dragging);
        that.triggerWorkspaceEvent(CanvasEvent.DraggingStateChanged, this, dragging);
        return result;
      },
      getContainingNodes: (next) => function(bbox) {
        const result = next.call(this, bbox);
        that.triggerWorkspaceEvent(CanvasEvent.ContainingNodesRequested, this, bbox, result);
        return result;
      },
      updateSelection: (next) => function(update) {
        const oldSelection = new Set(this.selection);
        const result = next.call(this, update);
        that.triggerWorkspaceEvent(CanvasEvent.SelectionChanged, this, oldSelection, (update2) => next.call(this, update2));
        return result;
      },
      createTextNode: (next) => function(...args) {
        const node = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node);
        return node;
      },
      createFileNode: (next) => function(...args) {
        const node = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node);
        return node;
      },
      createFileNodes: (next) => function(...args) {
        const nodes = next.call(this, ...args);
        nodes.forEach((node) => that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node));
        return nodes;
      },
      createGroupNode: (next) => function(...args) {
        const node = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node);
        return node;
      },
      createLinkNode: (next) => function(...args) {
        const node = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeCreated, this, node);
        return node;
      },
      addNode: (next) => function(node) {
        that.patchNode(node);
        return next.call(this, node);
      },
      addEdge: (next) => function(edge) {
        that.patchEdge(edge);
        if (!this.viewportChanged)
          that.triggerWorkspaceEvent(CanvasEvent.EdgeCreated, this, edge);
        return next.call(this, edge);
      },
      removeNode: (next) => function(node) {
        const result = next.call(this, node);
        that.triggerWorkspaceEvent(CanvasEvent.NodeRemoved, this, node);
        return result;
      },
      removeEdge: (next) => function(edge) {
        const result = next.call(this, edge);
        that.triggerWorkspaceEvent(CanvasEvent.EdgeRemoved, this, edge);
        return result;
      },
      zoomToBbox: (next) => function(bbox) {
        that.triggerWorkspaceEvent(CanvasEvent.ZoomToBbox.Before, this, bbox);
        const result = next.call(this, bbox);
        that.triggerWorkspaceEvent(CanvasEvent.ZoomToBbox.After, this, bbox);
        return result;
      },
      setReadonly: (next) => function(readonly) {
        const result = next.call(this, readonly);
        that.triggerWorkspaceEvent(CanvasEvent.ReadonlyChanged, this, readonly);
        return result;
      },
      undo: (next) => function(...args) {
        const result = next.call(this, ...args);
        this.importData(this.getData(), true);
        that.triggerWorkspaceEvent(CanvasEvent.Undo, this);
        return result;
      },
      redo: (next) => function(...args) {
        const result = next.call(this, ...args);
        this.importData(this.getData(), true);
        that.triggerWorkspaceEvent(CanvasEvent.Redo, this);
        return result;
      },
      /*setData: (next: any) => function (...args: any) {
        //
        const result = next.call(this, ...args)
        //
        return result
      },*/
      getData: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.DataRequested, this, result);
        return result;
      },
      importData: (next) => function(data, clearCanvas, silent) {
        const targetFilePath = this.view.file.path;
        const setData = (data2) => {
          if (!this.view.file || this.view.file.path !== targetFilePath)
            return;
          this.importData(data2, true, true);
          that.emitEventsForUnknownDataChanges(this);
        };
        if (!silent)
          that.triggerWorkspaceEvent(CanvasEvent.LoadData, this, data, setData);
        const result = next.call(this, data, clearCanvas);
        that.emitEventsForUnknownDataChanges(this);
        return result;
      },
      requestSave: (next) => function(...args) {
        that.triggerWorkspaceEvent(CanvasEvent.CanvasSaved.Before, this);
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.CanvasSaved.After, this);
        return result;
      }
    });
    patchObjectPrototype(this.plugin, canvasView.canvas.menu, {
      render: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.PopupMenuCreated, this.canvas);
        next.call(this);
        return result;
      }
    });
    patchObjectPrototype(this.plugin, canvasView.canvas.nodeInteractionLayer, {
      setTarget: (next) => function(node) {
        const result = next.call(this, node);
        that.triggerWorkspaceEvent(CanvasEvent.NodeInteraction, this.canvas, node);
        return result;
      }
    });
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (leaf.view.getViewType() !== "canvas")
        return;
      const canvasView2 = leaf.view;
      canvasView2.leaf.rebuildView();
    });
  }
  patchNode(node) {
    const that = this;
    patchObjectInstance(this.plugin, node, {
      setData: (next) => function(data, addHistory) {
        const result = next.call(this, data);
        if (node.initialized && !node.isDirty) {
          node.isDirty = true;
          that.triggerWorkspaceEvent(CanvasEvent.NodeChanged, this.canvas, node);
          delete node.isDirty;
        }
        this.canvas.data = this.canvas.getData();
        this.canvas.view.requestSave();
        if (addHistory)
          this.canvas.pushHistory(this.canvas.getData());
        return result;
      },
      getBBox: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.NodeBBoxRequested, this.canvas, node, result);
        return result;
      }
    });
    this.runAfterInitialized(node, () => {
      this.triggerWorkspaceEvent(CanvasEvent.NodeAdded, node.canvas, node);
      this.triggerWorkspaceEvent(CanvasEvent.NodeChanged, node.canvas, node);
    });
  }
  patchEdge(edge) {
    const that = this;
    patchObjectInstance(this.plugin, edge, {
      setData: (next) => function(data, addHistory) {
        const result = next.call(this, data);
        if (edge.initialized && !edge.isDirty) {
          edge.isDirty = true;
          that.triggerWorkspaceEvent(CanvasEvent.EdgeChanged, this.canvas, edge);
          delete edge.isDirty;
        }
        this.canvas.data = this.canvas.getData();
        this.canvas.view.requestSave();
        if (addHistory)
          this.canvas.pushHistory(this.canvas.getData());
        return result;
      },
      render: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.EdgeChanged, this.canvas, edge);
        return result;
      },
      getCenter: (next) => function(...args) {
        const result = next.call(this, ...args);
        that.triggerWorkspaceEvent(CanvasEvent.EdgeCenterRequested, this.canvas, edge, result);
        return result;
      }
    });
    this.runAfterInitialized(edge, () => {
      this.triggerWorkspaceEvent(CanvasEvent.EdgeAdded, edge.canvas, edge);
    });
  }
  runAfterInitialized(canvasElement, onReady) {
    if (canvasElement.initialized) {
      onReady();
      return;
    }
    const that = this;
    const uninstall = around(canvasElement, {
      initialize: (next) => function(...args) {
        const result = next.call(this, ...args);
        onReady();
        uninstall();
        return result;
      }
    });
    that.plugin.register(uninstall);
  }
  emitEventsForUnknownDataChanges(canvas) {
    canvas.nodes.forEach((node) => this.runAfterInitialized(node, () => {
      this.triggerWorkspaceEvent(CanvasEvent.NodeChanged, node.canvas, node);
    }));
    canvas.edges.forEach((edge) => this.runAfterInitialized(edge, () => {
      this.triggerWorkspaceEvent(CanvasEvent.EdgeChanged, edge.canvas, edge);
    }));
  }
  triggerWorkspaceEvent(event, ...args) {
    this.plugin.app.workspace.trigger(event, ...args);
  }
};

// src/utils/icons-helper.ts
var import_obsidian = require("obsidian");
var CUSTOM_ICONS = {
  "shape-pill": `<rect rx="31.25" height="62.5" width="93.75" y="18.75" x="3.125" stroke-width="8.333" stroke="currentColor" fill="transparent"/>`,
  "shape-parallelogram": `<rect transform="skewX(-20)" rx="5" height="50" width="70" y="25" x="35" stroke-width="8.333" stroke="currentColor" fill="transparent"/>`,
  "shape-predefined-process": `
    <g stroke-width="2" stroke="currentColor" fill="none" transform="matrix(4.166667,0,0,4.166667,0,0)">
      <path d="M 4.999687 3 L 19.000312 3 C 20.104688 3 21 3.895312 21 4.999687 L 21 19.000312 C 21 20.104688 20.104688 21 19.000312 21 L 4.999687 21 C 3.895312 21 3 20.104688 3 19.000312 L 3 4.999687 C 3 3.895312 3.895312 3 4.999687 3 Z M 4.999687 3 "/>
      <path d="M 7 3 L 7 21 "/>
      <path d="M 17 3 L 17 21 "/>
    </g>
  `,
  "shape-document": `<path transform="translate(0, 5)" stroke="currentColor" fill="none" stroke-width="8.333" d="M83.75 25C85.82 25 87.5 26.68 87.5 28.75L87.5 64.375Q68.75 54.25 50 64.375 31.25 74.5 12.5 64.375L12.5 30.625 12.5 28.75C12.5 26.68 14.18 25 16.25 25Z"/>`,
  "shape-database": `
    <g transform="translate(20, 20)" stroke-width="8.333" stroke="currentColor" fill="none">
      <path d="M 1 51 L 1 11 C 1 5.48 14.43 1 31 1 C 47.57 1 61 5.48 61 11 L 61 51 C 61 56.52 47.57 61 31 61 C 14.43 61 1 56.52 1 51 Z"/>
      <path d="M 1 11 C 1 16.52 14.43 21 31 21 C 47.57 21 61 16.52 61 11"/>
    </g>
  `,
  "border-solid": `<path stroke="currentColor" fill="none" stroke-width="8.333" d="M91.6667 45.8333v4.1667c0 2.0833-2.0833 4.1667-4.1667 4.1667H12.5c-2.0833 0-4.1667-2.0833-4.1667-4.1667v-4.1667"/>`,
  "border-dashed": `<path stroke="currentColor" fill="none" stroke-width="8.333" stroke-dasharray="13.7" d="M91.6667 45.8333v4.1667c0 2.0833-2.0833 4.1667-4.1667 4.1667H12.5c-2.0833 0-4.1667-2.0833-4.1667-4.1667v-4.1667"/>`,
  "border-dotted": `<path stroke="currentColor" fill="none" stroke-width="8.333" stroke-dasharray="8.7" d="M91.6667 45.8333v4.1667c0 2.0833-2.0833 4.1667-4.1667 4.1667H12.5c-2.0833 0-4.1667-2.0833-4.1667-4.1667v-4.1667"/>`,
  "path-solid": `<path stroke="currentColor" fill="none" stroke-width="8.5" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "path-dotted": `<path stroke="currentColor" fill="none" stroke-width="8.5" stroke-dasharray="8.8" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "path-short-dashed": `<path stroke="currentColor" fill="none" stroke-width="8.5" stroke-dasharray="15" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "path-long-dashed": `<path stroke="currentColor" fill="none" stroke-width="8.5" stroke-dasharray="23" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "arrow-triangle": `<path stroke="currentColor" fill="currentColor" d="M 15 10 L 85 50 L 15 90 Z"/>`,
  "arrow-triangle-outline": `<path stroke="currentColor" stroke-width="8.5" fill="none" d="M 15 10 L 85 50 L 15 90 Z"/>`,
  "arrow-thin-triangle": `<path stroke="currentColor" stroke-width="8.5" fill="none" d="M 15 10 L 85 50 L 15 90"/>`,
  "arrow-halved-triangle": `<path stroke="currentColor" fill="currentColor" d="M 15 50 L 85 50 L 15 90 Z"/>`,
  "arrow-diamond": `<path stroke="currentColor" fill="currentColor" d="M 50 0 L 100 50 L 50 100 L 0 50 Z"/>`,
  "arrow-diamond-outline": `<path stroke="currentColor" stroke-width="8.5" fill="none" d="M 50 0 L 100 50 L 50 100 L 0 50 Z"/>`,
  "arrow-circle": `<circle stroke="currentColor" fill="currentColor" cx="50" cy="50" r="45"/>`,
  "arrow-circle-outline": `<circle stroke="currentColor" stroke-width="8.5" fill="none" cx="50" cy="50" r="45"/>`,
  "pathfinding-method-bezier": `<path stroke="currentColor" fill="none" stroke-width="8.5" d="M37.5 79.1667h35.4167a14.5833 14.5833 90 000-29.1667h-45.8333a14.5833 14.5833 90 010-29.1667H62.5"/>`,
  "pathfinding-method-square": `<path stroke="currentColor" fill="none" stroke-width="8.5" d="M72.9167 79.1667 72.9167 50 27.0833 50 27.0833 20.8333"/>`
};
var IconsHelper = class {
  static addIcons() {
    for (const [id, svg] of Object.entries(CUSTOM_ICONS)) {
      (0, import_obsidian.addIcon)(id, svg);
    }
  }
};

// src/utils/debug-helper.ts
var DebugHelper = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeAdded,
      (_canvas, _node) => console.count("\u{1F7E2} NodeAdded")
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeChanged,
      (_canvas, _node) => console.count("\u{1F7E1} NodeChanged")
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeAdded,
      (_canvas, _edge) => console.count("\u{1F7E2} EdgeAdded")
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeChanged,
      (_canvas, _edge) => console.count("\u{1F7E1} EdgeChanged")
    ));
  }
};

// src/settings.ts
var import_obsidian2 = require("obsidian");

// src/canvas-extensions/advanced-styles/style-config.ts
var BUILTIN_NODE_STYLE_ATTRIBUTES = [
  {
    datasetKey: "textAlign",
    label: "Text Alignment",
    nodeTypes: ["text"],
    options: [
      {
        icon: "align-left",
        label: "Left (default)",
        value: null
      },
      {
        icon: "align-center",
        label: "Center",
        value: "center"
      },
      {
        icon: "align-right",
        label: "Right",
        value: "right"
      }
    ]
  },
  {
    datasetKey: "shape",
    label: "Shape",
    nodeTypes: ["text"],
    options: [
      {
        icon: "rectangle-horizontal",
        label: "Round Rectangle (default)",
        value: null
      },
      {
        icon: "shape-pill",
        label: "Pill",
        value: "pill"
      },
      {
        icon: "diamond",
        label: "Diamond",
        value: "diamond"
      },
      {
        icon: "shape-parallelogram",
        label: "Parallelogram",
        value: "parallelogram"
      },
      {
        icon: "circle",
        label: "Circle",
        value: "circle"
      },
      {
        icon: "shape-predefined-process",
        label: "Predefined Process",
        value: "predefined-process"
      },
      {
        icon: "shape-document",
        label: "Document",
        value: "document"
      },
      {
        icon: "shape-database",
        label: "Database",
        value: "database"
      }
    ]
  },
  {
    datasetKey: "border",
    label: "Border",
    options: [
      {
        icon: "border-solid",
        label: "Solid (default)",
        value: null
      },
      {
        icon: "border-dashed",
        label: "Dashed",
        value: "dashed"
      },
      {
        icon: "border-dotted",
        label: "Dotted",
        value: "dotted"
      },
      {
        icon: "eye-off",
        label: "Invisible",
        value: "invisible"
      }
    ]
  }
];
var BUILTIN_EDGE_STYLE_ATTRIBUTES = [
  {
    datasetKey: "path",
    label: "Path Style",
    options: [
      {
        icon: "path-solid",
        label: "Solid (default)",
        value: null
      },
      {
        icon: "path-dotted",
        label: "Dotted",
        value: "dotted"
      },
      {
        icon: "path-short-dashed",
        label: "Short Dashed",
        value: "short-dashed"
      },
      {
        icon: "path-long-dashed",
        label: "Long Dashed",
        value: "long-dashed"
      }
    ]
  },
  {
    datasetKey: "arrow",
    label: "Arrow Style",
    options: [
      {
        icon: "arrow-triangle",
        label: "Triangle (default)",
        value: null
      },
      {
        icon: "arrow-triangle-outline",
        label: "Triangle Outline",
        value: "triangle-outline"
      },
      {
        icon: "arrow-thin-triangle",
        label: "Thin Triangle",
        value: "thin-triangle"
      },
      {
        icon: "arrow-halved-triangle",
        label: "Halved Triangle",
        value: "halved-triangle"
      },
      {
        icon: "arrow-diamond",
        label: "Diamond",
        value: "diamond"
      },
      {
        icon: "arrow-diamond-outline",
        label: "Diamond Outline",
        value: "diamond-outline"
      },
      {
        icon: "arrow-circle",
        label: "Circle",
        value: "circle"
      },
      {
        icon: "arrow-circle-outline",
        label: "Circle Outline",
        value: "circle-outline"
      }
    ]
  },
  {
    datasetKey: "pathfindingMethod",
    label: "Pathfinding Method",
    options: [
      {
        icon: "pathfinding-method-bezier",
        label: "Bezier (default)",
        value: null
      },
      {
        icon: "slash",
        label: "Direct",
        value: "direct"
      },
      {
        icon: "pathfinding-method-square",
        label: "Square",
        value: "square"
      },
      {
        icon: "map",
        label: "A*",
        value: "a-star"
      }
    ]
  }
];

// src/settings.ts
var NODE_TYPES_ON_DOUBLE_CLICK = {
  "text": "Text",
  "file": "File"
};
var DEFAULT_SETTINGS = {
  nodeTypeOnDoubleClick: Object.keys(NODE_TYPES_ON_DOUBLE_CLICK).first(),
  defaultTextNodeWidth: 260,
  defaultTextNodeHeight: 60,
  defaultFileNodeWidth: 400,
  defaultFileNodeHeight: 400,
  performanceOptimizationEnabled: false,
  nodeStylingFeatureEnabled: true,
  customNodeStyleAttributes: [],
  defaultTextNodeStyleAttributes: {},
  edgesStylingFeatureEnabled: true,
  customEdgeStyleAttributes: [],
  defaultEdgeStyleAttributes: {},
  edgeStyleDirectRotateArrow: false,
  edgeStylePathfinderGridResolution: 10,
  edgeStylePathfinderPathLiveUpdate: true,
  edgeStylePathfinderPathRounded: true,
  commandsFeatureEnabled: true,
  zoomToClonedNode: true,
  cloneNodeMargin: 20,
  expandNodeStepSize: 20,
  betterReadonlyEnabled: true,
  disableNodePopup: false,
  disableZoom: false,
  disablePan: false,
  collapsibleGroupsFeatureEnabled: true,
  collapsedGroupPreviewOnDrag: true,
  presentationFeatureEnabled: true,
  showSetStartNodeInPopup: false,
  defaultSlideSize: "1200x675",
  wrapInSlidePadding: 20,
  useArrowKeysToChangeSlides: true,
  usePgUpPgDownKeysToChangeSlides: true,
  zoomToSlideWithoutPadding: true,
  slideTransitionAnimationDuration: 0.5,
  slideTransitionAnimationIntensity: 1.25,
  canvasEncapsulationEnabled: true,
  portalsFeatureEnabled: true,
  maintainClosedPortalSize: true,
  showEdgesIntoDisabledPortals: true
};
var _SettingsManager = class _SettingsManager {
  constructor(plugin) {
    this.plugin = plugin;
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.plugin.loadData());
    this.plugin.app.workspace.trigger(_SettingsManager.SETTINGS_CHANGED_EVENT);
  }
  async saveSettings() {
    await this.plugin.saveData(this.settings);
  }
  getSetting(key) {
    return this.settings[key];
  }
  async setSetting(data) {
    this.settings = Object.assign(this.settings, data);
    await this.saveSettings();
    this.plugin.app.workspace.trigger(_SettingsManager.SETTINGS_CHANGED_EVENT);
  }
  addSettingsTab() {
    this.settingsTab = new AdvancedCanvasPluginSettingTab(this.plugin, this);
    this.plugin.addSettingTab(this.settingsTab);
  }
};
_SettingsManager.SETTINGS_CHANGED_EVENT = "advanced-canvas:settings-changed";
var SettingsManager = _SettingsManager;
var AdvancedCanvasPluginSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(plugin, settingsManager) {
    super(plugin.app, plugin);
    this.settingsManager = settingsManager;
  }
  display() {
    let { containerEl } = this;
    containerEl.empty();
    new import_obsidian2.Setting(containerEl).setHeading().setClass("ac-settings-heading").setName("General");
    new import_obsidian2.Setting(containerEl).setName("Node type on double click").setDesc("The type of node that will be created when double clicking on the canvas.").addDropdown(
      (dropdown) => dropdown.addOptions(NODE_TYPES_ON_DOUBLE_CLICK).setValue(this.settingsManager.getSetting("nodeTypeOnDoubleClick")).onChange(async (value) => await this.settingsManager.setSetting({ nodeTypeOnDoubleClick: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Default text node width").setDesc("The default width of a text node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultTextNodeWidth").toString()).onChange(async (value) => await this.settingsManager.setSetting({ defaultTextNodeWidth: Math.max(1, parseInt(value)) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Default text node height").setDesc("The default height of a text node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultTextNodeHeight").toString()).onChange(async (value) => await this.settingsManager.setSetting({ defaultTextNodeHeight: Math.max(1, parseInt(value)) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Default file node width").setDesc("The default width of a file node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultFileNodeWidth").toString()).onChange(async (value) => await this.settingsManager.setSetting({ defaultFileNodeWidth: Math.max(1, parseInt(value)) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Default file node height").setDesc("The default height of a file node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultFileNodeHeight").toString()).onChange(async (value) => await this.settingsManager.setSetting({ defaultFileNodeHeight: Math.max(1, parseInt(value)) }))
    );
    this.createFeatureHeading(
      containerEl,
      "Performance optimization",
      "Optimize the performance of the canvas (Side effect is some amount of blurriness).",
      "performanceOptimizationEnabled"
    );
    this.createFeatureHeading(
      containerEl,
      "Node styling",
      "Style your nodes with different shapes and borders.",
      "nodeStylingFeatureEnabled"
    );
    new import_obsidian2.Setting(containerEl).setName("Custom node style settings").setDesc("Add custom style settings for nodes. (Go to GitHub for more information)").addButton(
      (button) => button.setButtonText("Open Tutorial").onClick(() => window.open("https://github.com/Developer-Mike/obsidian-advanced-canvas/blob/main/README.md#custom-styles"))
    );
    const allNodeStyleAttributes = [...BUILTIN_NODE_STYLE_ATTRIBUTES, ...this.settingsManager.getSetting("customNodeStyleAttributes")].filter((setting) => {
      var _a;
      return setting.nodeTypes === void 0 || ((_a = setting.nodeTypes) == null ? void 0 : _a.includes("text"));
    });
    this.createDefaultStylesSection(containerEl, "Default text node style attributes", "defaultTextNodeStyleAttributes", allNodeStyleAttributes);
    this.createFeatureHeading(
      containerEl,
      "Edges styling",
      "Style your edges with different path styles.",
      "edgesStylingFeatureEnabled"
    );
    new import_obsidian2.Setting(containerEl).setName("Custom edge style settings").setDesc("Add custom style settings for edges. (Go to GitHub for more information)").addButton(
      (button) => button.setButtonText("Open Tutorial").onClick(() => window.open("https://github.com/Developer-Mike/obsidian-advanced-canvas/blob/main/README.md#custom-styles"))
    );
    this.createDefaultStylesSection(containerEl, "Default edge style attributes", "defaultEdgeStyleAttributes", [...BUILTIN_EDGE_STYLE_ATTRIBUTES, ...this.settingsManager.getSetting("customEdgeStyleAttributes")]);
    new import_obsidian2.Setting(containerEl).setName('Rotate arrow if pathfinding method is "Direct"').setDesc('When enabled, the arrow will be rotated to the direction of the edge if the pathfinding method is set to "Direct".').addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("edgeStyleDirectRotateArrow")).onChange(async (value) => await this.settingsManager.setSetting({ edgeStyleDirectRotateArrow: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("A* grid resolution").setDesc("The resolution of the grid when using the A* path style. The lower the value, the more precise the path will be. But it will also take longer to calculate.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("edgeStylePathfinderGridResolution").toString()).onChange(async (value) => await this.settingsManager.setSetting({ edgeStylePathfinderGridResolution: Math.max(5, parseInt(value)) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Live update A* path").setDesc("When enabled, the A* path style will be updated live while dragging the edge.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("edgeStylePathfinderPathLiveUpdate")).onChange(async (value) => await this.settingsManager.setSetting({ edgeStylePathfinderPathLiveUpdate: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("A* rounded path").setDesc("When enabled, the A* path style will be rounded.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("edgeStylePathfinderPathRounded")).onChange(async (value) => await this.settingsManager.setSetting({ edgeStylePathfinderPathRounded: value }))
    );
    this.createFeatureHeading(
      containerEl,
      "Extended commands",
      "Add more commands to the canvas.",
      "commandsFeatureEnabled"
    );
    new import_obsidian2.Setting(containerEl).setName("Zoom to cloned node").setDesc("When enabled, the canvas will zoom to the cloned node.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("zoomToClonedNode")).onChange(async (value) => await this.settingsManager.setSetting({ zoomToClonedNode: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Clone node margin").setDesc("The margin between the cloned node and the source node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("cloneNodeMargin").toString()).onChange(async (value) => await this.settingsManager.setSetting({ cloneNodeMargin: parseInt(value) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Expand node step size").setDesc("The step size for expanding the node.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("expandNodeStepSize").toString()).onChange(async (value) => await this.settingsManager.setSetting({ expandNodeStepSize: parseInt(value) }))
    );
    this.createFeatureHeading(
      containerEl,
      "Better readonly",
      "Improve the readonly mode.",
      "betterReadonlyEnabled"
    );
    this.createFeatureHeading(
      containerEl,
      "Collapsible groups",
      "Group nodes can be collapsed and expanded to keep the canvas organized.",
      "collapsibleGroupsFeatureEnabled"
    );
    new import_obsidian2.Setting(containerEl).setName("Collapsed group preview on drag").setDesc("When enabled, a group that is collapsed show its border while dragging a node.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("collapsedGroupPreviewOnDrag")).onChange(async (value) => await this.settingsManager.setSetting({ collapsedGroupPreviewOnDrag: value }))
    );
    this.createFeatureHeading(
      containerEl,
      "Presentations",
      "Create a presentation from your canvas.",
      "presentationFeatureEnabled"
    );
    new import_obsidian2.Setting(containerEl).setName('Show "Set Start Node" in node popup').setDesc("If turned off, you can still set the start node using the corresponding command.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("showSetStartNodeInPopup")).onChange(async (value) => await this.settingsManager.setSetting({ showSetStartNodeInPopup: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Default slide ratio").setDesc("The default ratio of the slide. For example, 16:9 is 1200x675 and 3:2 is 1350x900.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("defaultSlideSize")).onChange(async (value) => await this.settingsManager.setSetting({ defaultSlideSize: value.replace(" ", "") }))
    );
    new import_obsidian2.Setting(containerEl).setName("Wrap in slide padding").setDesc("The padding of the slide when wrapping the canvas in a slide.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("wrapInSlidePadding").toString()).onChange(async (value) => await this.settingsManager.setSetting({ wrapInSlidePadding: parseInt(value) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Use arrow keys to change slides").setDesc("When enabled, you can use the arrow keys to change slides in presentation mode.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("useArrowKeysToChangeSlides")).onChange(async (value) => await this.settingsManager.setSetting({ useArrowKeysToChangeSlides: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Use PgUp/PgDown keys to change slides").setDesc("When enabled, you can use the PgUp/PgDown keys to change slides in presentation mode (Makes the presentation mode compatible with most presentation remotes).").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("usePgUpPgDownKeysToChangeSlides")).onChange(async (value) => await this.settingsManager.setSetting({ usePgUpPgDownKeysToChangeSlides: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Zoom to slide without padding").setDesc("When enabled, the canvas will zoom to the slide without padding.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("zoomToSlideWithoutPadding")).onChange(async (value) => await this.settingsManager.setSetting({ zoomToSlideWithoutPadding: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Slide transition animation duration").setDesc("The duration of the slide transition animation in seconds. Set to 0 to disable the animation.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("slideTransitionAnimationDuration").toString()).onChange(async (value) => await this.settingsManager.setSetting({ slideTransitionAnimationDuration: parseFloat(value) }))
    );
    new import_obsidian2.Setting(containerEl).setName("Slide transition animation intensity").setDesc("The intensity of the slide transition animation. The higher the value, the more the canvas will zoom out before zooming in on the next slide.").addText(
      (text) => text.setValue(this.settingsManager.getSetting("slideTransitionAnimationIntensity").toString()).onChange(async (value) => await this.settingsManager.setSetting({ slideTransitionAnimationIntensity: parseFloat(value) }))
    );
    this.createFeatureHeading(
      containerEl,
      "Canvas encapsulation",
      "Encapsulate a selection of nodes and edges into a new canvas.",
      "canvasEncapsulationEnabled"
    );
    this.createFeatureHeading(
      containerEl,
      "Portals",
      "Create portals to other canvases.",
      "portalsFeatureEnabled"
    );
    new import_obsidian2.Setting(containerEl).setName("Maintain closed portal size").setDesc("When enabled, closing a portal will change the size of the portal to the original, closed size.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("maintainClosedPortalSize")).onChange(async (value) => await this.settingsManager.setSetting({ maintainClosedPortalSize: value }))
    );
    new import_obsidian2.Setting(containerEl).setName("Show edges into disabled portals").setDesc("When enabled, edges into disabled portals will be shown by an edge to the portal node.").addToggle(
      (toggle) => toggle.setValue(this.settingsManager.getSetting("showEdgesIntoDisabledPortals")).onChange(async (value) => await this.settingsManager.setSetting({ showEdgesIntoDisabledPortals: value }))
    );
    const kofiButton = document.createElement("a");
    kofiButton.classList.add("kofi-button");
    kofiButton.href = "https://ko-fi.com/X8X27IA08";
    kofiButton.target = "_blank";
    const kofiImage = document.createElement("img");
    kofiImage.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABNcAAAGVCAMAAADqnefWAAAA3lBMVEUAAAD/////////////////////////////////////////////////////////////////9fX/7Ozv7+//4uH/2dn/2djf39//zc3/ycj/w8P/wMDPz8//ubj/t7f/r6//qqq/v7//o6P/nZz/m5v/lpb/kZCvr6//ion/h4f/hob/hoX/hIP/gH//fXz/fHv/eXifn5//dXT/cXH/bm7/bm3/a2v/amn/aWj/aGf/ZmX/ZGT/Y2L/YWH/YGCPj4//X19/f39vb29fX19PT08/Pz8vLy8fHx8PDw8AAABHqlbKAAAAEHRSTlMAECAwQFBgcICQoLDA0ODwVOCoyAAALtpJREFUeNrs3Vtvm8oaxnGwMcaYw6uiyKpEpI4i1VIutkTUi0pRZGMMZr7/F9rZK90rTnMwzAFm8PO7X6lW7fw7wxxwAAAAAAAAAAAAAAAAAAAAAAAAAAAAwByu5/kBKLDwPG/uAMCYZotgHRMolkbRKvC9mQMAw5ot1wmBVkkULD3XAYAhLFZomgDhui0wdgPQa75KCQaWrJeeAwBauD4eqI0mCtA2AOVmAYZqI1svMScFUGgWEhggWWHYBqCGuyIwRRouHACQhRloZ0gbgBU87OswULrC6QQATEEnJ1li3y4ABmuTE2IVAaA3DNZMl/gYtAH04WIfrgXSFXa1AXQ2xzKoJUKUDaAbn8AaER60AXQQENgEZQO4COemrIOyASBr0xPhORsAsjY5WEEAQNYmJw2wnw0AWZuaxHcA4G9LAqtFOBIPgH1rk4PJKABOGUxOgj0fAK9cZG0a1hiyAfxfRDANKe7UBcDpqckJMWQDeDYnmBA8ZQNwHBe3407MCkM2uHq4HndyEuxlgyvnEUxP4ABcM1z7PUkR5qJwxXB+aqJSLB/A1cKO3OlaOgDXCYsGE4atbHCdZgQTFuPCSbhGuHRt2lJs+IDrg+Ha5OG+SVDK9bwgWEXP6EwaResg8DznIgzXADvZwBiut1xFCV2QRMFi5ozLJZi+0AGQ4i6CKKXuktD/sm2m3uPByqquWw7C6hdlWW5ZTr1gWRQGNPPDhAQkq7kzkoQEZMWRg1ptfSy3OekSI2wgZLFK6IVFafOpv80BwzRtmmrH6EsIGwzF9cOUZCVL1xna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";
    kofiButton.appendChild(kofiImage);
    containerEl.appendChild(kofiButton);
  }
  createFeatureHeading(containerEl, label, description, settingsKey) {
    return new import_obsidian2.Setting(containerEl).setHeading().setClass("ac-settings-heading").setName(label).setDesc(description).addToggle(
      (toggle) => toggle.setTooltip("Requires a reload to take effect.").setValue(this.settingsManager.getSetting(settingsKey)).onChange(async (value) => {
        await this.settingsManager.setSetting({ [settingsKey]: value });
        new import_obsidian2.Notice("Reload obsidian to apply the changes.");
      })
    );
  }
  createDefaultStylesSection(containerEl, label, settingsKey, allStylableAttributes) {
    const defaultNodeStylesEl = document.createElement("details");
    defaultNodeStylesEl.classList.add("setting-item");
    const defaultNodeStylesSummaryEl = document.createElement("summary");
    defaultNodeStylesSummaryEl.textContent = label;
    defaultNodeStylesEl.appendChild(defaultNodeStylesSummaryEl);
    for (const stylableAttribute of allStylableAttributes) {
      new import_obsidian2.Setting(defaultNodeStylesEl).setName(stylableAttribute.label).addDropdown(
        (dropdown) => {
          var _a;
          return dropdown.addOptions(Object.fromEntries(stylableAttribute.options.map((option) => [option.value, option.label]))).setValue((_a = this.settingsManager.getSetting(settingsKey)[stylableAttribute.datasetKey]) != null ? _a : "null").onChange(async (value) => {
            const newValue = this.settingsManager.getSetting(settingsKey);
            if (value === "null")
              delete newValue[stylableAttribute.datasetKey];
            else
              newValue[stylableAttribute.datasetKey] = value;
            await this.settingsManager.setSetting({
              [settingsKey]: newValue
            });
          });
        }
      );
    }
    containerEl.appendChild(defaultNodeStylesEl);
  }
};

// src/windows-manager.ts
var WindowsManager = class {
  constructor(plugin) {
    this.windows = [window];
    this.plugin = plugin;
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "window-open",
      (_win, window2) => this.windows.push(window2)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "window-close",
      (_win, window2) => this.windows = this.windows.filter((w) => w !== window2)
    ));
  }
};

// src/utils/canvas-helper.ts
var import_obsidian3 = require("obsidian");

// src/utils/bbox-helper.ts
function combineBBoxes(bboxes) {
  let minX = Infinity;
  let minY = Infinity;
  let maxX = -Infinity;
  let maxY = -Infinity;
  for (let bbox of bboxes) {
    minX = Math.min(minX, bbox.minX);
    minY = Math.min(minY, bbox.minY);
    maxX = Math.max(maxX, bbox.maxX);
    maxY = Math.max(maxY, bbox.maxY);
  }
  return { minX, minY, maxX, maxY };
}
function scaleBBox(bbox, scale) {
  let diffX = (scale - 1) * (bbox.maxX - bbox.minX);
  let diffY = (scale - 1) * (bbox.maxY - bbox.minY);
  return {
    minX: bbox.minX - diffX / 2,
    maxX: bbox.maxX + diffX / 2,
    minY: bbox.minY - diffY / 2,
    maxY: bbox.maxY + diffY / 2
  };
}
function insideBBox(position, bbox, canTouchEdge) {
  var _a, _b, _c, _d;
  const providedBBox = {
    minX: (_a = position.minX) != null ? _a : position.x,
    minY: (_b = position.minY) != null ? _b : position.y,
    maxX: (_c = position.maxX) != null ? _c : position.x,
    maxY: (_d = position.maxY) != null ? _d : position.y
  };
  return canTouchEdge ? providedBBox.minX >= bbox.minX && providedBBox.maxX <= bbox.maxX && providedBBox.minY >= bbox.minY && providedBBox.maxY <= bbox.maxY : providedBBox.minX > bbox.minX && providedBBox.maxX < bbox.maxX && providedBBox.minY > bbox.minY && providedBBox.maxY < bbox.maxY;
}
function enlargeBBox(bbox, padding) {
  return {
    minX: bbox.minX - padding,
    minY: bbox.minY - padding,
    maxX: bbox.maxX + padding,
    maxY: bbox.maxY + padding
  };
}
function moveInDirection(position, side, distance) {
  switch (side) {
    case "top":
      return { x: position.x, y: position.y - distance };
    case "right":
      return { x: position.x + distance, y: position.y };
    case "bottom":
      return { x: position.x, y: position.y + distance };
    case "left":
      return { x: position.x - distance, y: position.y };
  }
}
function getCenterOfBBoxSide(bbox, side) {
  switch (side) {
    case "top":
      return { x: (bbox.minX + bbox.maxX) / 2, y: bbox.minY };
    case "right":
      return { x: bbox.maxX, y: (bbox.minY + bbox.maxY) / 2 };
    case "bottom":
      return { x: (bbox.minX + bbox.maxX) / 2, y: bbox.maxY };
    case "left":
      return { x: bbox.minX, y: (bbox.minY + bbox.maxY) / 2 };
  }
}
function getSideVector(side) {
  switch (side) {
    case "top":
      return { x: 0, y: 1 };
    case "right":
      return { x: 1, y: 0 };
    case "bottom":
      return { x: 0, y: -1 };
    case "left":
      return { x: -1, y: 0 };
    default:
      return { x: 0, y: 0 };
  }
}
function bboxFromNodeData(nodeData) {
  return {
    minX: nodeData.x,
    minY: nodeData.y,
    maxX: nodeData.x + nodeData.width,
    maxY: nodeData.y + nodeData.height
  };
}

// src/utils/canvas-helper.ts
function canvasCommand(plugin, check, run) {
  return (checking) => {
    const canvas = plugin.getCurrentCanvas();
    if (checking)
      return canvas !== null && check(canvas);
    if (canvas)
      run(canvas);
    return true;
  };
}
function createQuickSettingsButton(menuOption) {
  const quickSetting = document.createElement("div");
  if (menuOption.id)
    quickSetting.id = menuOption.id;
  quickSetting.classList.add("canvas-control-item");
  (0, import_obsidian3.setIcon)(quickSetting, menuOption.icon);
  (0, import_obsidian3.setTooltip)(quickSetting, menuOption.label, { placement: "left" });
  quickSetting.addEventListener("click", () => {
    var _a;
    return (_a = menuOption.callback) == null ? void 0 : _a.call(menuOption);
  });
  return quickSetting;
}
function addQuickSettingsButton(controlGroup, element) {
  var _a;
  if (element.id)
    (_a = controlGroup.querySelector(`#${element.id}`)) == null ? void 0 : _a.remove();
  controlGroup.appendChild(element);
}
function createCardMenuOption(canvas, menuOption, previewNodeSize, onPlaced) {
  const menuOptionElement = document.createElement("div");
  if (menuOption.id)
    menuOptionElement.id = menuOption.id;
  menuOptionElement.classList.add("canvas-card-menu-button");
  menuOptionElement.classList.add("mod-draggable");
  (0, import_obsidian3.setIcon)(menuOptionElement, menuOption.icon);
  (0, import_obsidian3.setTooltip)(menuOptionElement, menuOption.label, { placement: "top" });
  menuOptionElement.addEventListener("click", (_e) => {
    onPlaced(canvas, getCenterCoordinates(canvas, previewNodeSize()));
  });
  menuOptionElement.addEventListener("pointerdown", (e) => {
    canvas.dragTempNode(e, previewNodeSize(), (pos) => {
      canvas.deselectAll();
      onPlaced(canvas, pos);
    });
  });
  return menuOptionElement;
}
function addCardMenuOption(canvas, element) {
  var _a;
  if (element.id)
    (_a = canvas == null ? void 0 : canvas.cardMenuEl.querySelector(`#${element.id}`)) == null ? void 0 : _a.remove();
  canvas == null ? void 0 : canvas.cardMenuEl.appendChild(element);
}
function createPopupMenuOption(menuOption) {
  const menuOptionElement = document.createElement("button");
  if (menuOption.id)
    menuOptionElement.id = menuOption.id;
  menuOptionElement.classList.add("clickable-icon");
  (0, import_obsidian3.setIcon)(menuOptionElement, menuOption.icon);
  (0, import_obsidian3.setTooltip)(menuOptionElement, menuOption.label, { placement: "top" });
  menuOptionElement.addEventListener("click", () => {
    var _a;
    return (_a = menuOption.callback) == null ? void 0 : _a.call(menuOption);
  });
  return menuOptionElement;
}
function addPopupMenuOption(canvas, element, index = -1) {
  var _a, _b;
  const popupMenuEl = (_a = canvas == null ? void 0 : canvas.menu) == null ? void 0 : _a.menuEl;
  if (!popupMenuEl)
    return;
  if (element.id)
    (_b = popupMenuEl.querySelector(`#${element.id}`)) == null ? void 0 : _b.remove();
  const sisterElement = index >= 0 ? popupMenuEl.children[index] : popupMenuEl.children[popupMenuEl.children.length + index];
  popupMenuEl.insertAfter(element, sisterElement);
}
function getCenterCoordinates(canvas, nodeSize) {
  const viewBounds = canvas.getViewportBBox();
  return {
    x: (viewBounds.minX + viewBounds.maxX) / 2 - nodeSize.width / 2,
    y: (viewBounds.minY + viewBounds.maxY) / 2 - nodeSize.height / 2
  };
}
function getBBox(canvasNodes) {
  let minX = Infinity;
  let minY = Infinity;
  let maxX = -Infinity;
  let maxY = -Infinity;
  for (const node of canvasNodes) {
    const nodeData = node.getData ? node.getData() : node;
    minX = Math.min(minX, nodeData.x);
    minY = Math.min(minY, nodeData.y);
    maxX = Math.max(maxX, nodeData.x + nodeData.width);
    maxY = Math.max(maxY, nodeData.y + nodeData.height);
  }
  return { minX, minY, maxX, maxY };
}
function zoomToBBox(canvas, bbox) {
  const PADDING_CORRECTION_FACTOR = 1 / 1.1;
  const zoomedBBox = scaleBBox(bbox, PADDING_CORRECTION_FACTOR);
  canvas.zoomToBbox(zoomedBBox);
  const scaleFactor = Math.min(
    canvas.canvasRect.width / (bbox.maxX - bbox.minX),
    canvas.canvasRect.height / (bbox.maxY - bbox.minY)
  );
  canvas.tZoom = Math.log2(scaleFactor);
}
function createStyleDropdownMenu(canvas, stylableAttributes, currentStyleAttributes, setStyleAttribute) {
  var _a, _b;
  const STYLE_MENU_ID = "style-menu";
  const STYLE_MENU_DROPDOWN_ID = "style-menu-dropdown";
  const STYLE_MENU_DROPDOWN_SUBMENU_ID = "style-menu-dropdown-submenu";
  const popupMenuElement = (_a = canvas == null ? void 0 : canvas.menu) == null ? void 0 : _a.menuEl;
  if (!popupMenuElement)
    return;
  (_b = popupMenuElement.querySelector(`#${STYLE_MENU_ID}`)) == null ? void 0 : _b.remove();
  const styleMenuButtonElement = document.createElement("button");
  styleMenuButtonElement.id = STYLE_MENU_ID;
  styleMenuButtonElement.classList.add("clickable-icon");
  (0, import_obsidian3.setIcon)(styleMenuButtonElement, "paintbrush");
  (0, import_obsidian3.setTooltip)(styleMenuButtonElement, "Style", { placement: "top" });
  popupMenuElement.appendChild(styleMenuButtonElement);
  styleMenuButtonElement.addEventListener("click", () => {
    var _a2, _b2, _c;
    const isOpen = styleMenuButtonElement.classList.toggle("has-active-menu");
    if (!isOpen) {
      (_a2 = popupMenuElement.querySelector(`#${STYLE_MENU_DROPDOWN_ID}`)) == null ? void 0 : _a2.remove();
      (_b2 = popupMenuElement.querySelector(`#${STYLE_MENU_DROPDOWN_SUBMENU_ID}`)) == null ? void 0 : _b2.remove();
      return;
    }
    const styleMenuDropdownElement = document.createElement("div");
    styleMenuDropdownElement.id = STYLE_MENU_DROPDOWN_ID;
    styleMenuDropdownElement.classList.add("menu");
    styleMenuDropdownElement.style.position = "absolute";
    styleMenuDropdownElement.style.maxHeight = "initial";
    styleMenuDropdownElement.style.top = `${popupMenuElement.getBoundingClientRect().height}px`;
    const canvasWrapperCenterX = canvas.wrapperEl.getBoundingClientRect().left + canvas.wrapperEl.getBoundingClientRect().width / 2;
    const leftPosition = styleMenuButtonElement.getBoundingClientRect().left - popupMenuElement.getBoundingClientRect().left;
    const rightPosition = popupMenuElement.getBoundingClientRect().right - styleMenuButtonElement.getBoundingClientRect().right;
    if (popupMenuElement.getBoundingClientRect().left + leftPosition < canvasWrapperCenterX)
      styleMenuDropdownElement.style.left = `${leftPosition}px`;
    else
      styleMenuDropdownElement.style.right = `${rightPosition}px`;
    for (const stylableAttribute of stylableAttributes) {
      const stylableAttributeElement = document.createElement("div");
      stylableAttributeElement.classList.add("menu-item");
      stylableAttributeElement.classList.add("tappable");
      const iconElement = document.createElement("div");
      iconElement.classList.add("menu-item-icon");
      const selectedStyle = (_c = stylableAttribute.options.find((option) => currentStyleAttributes[stylableAttribute.datasetKey] === option.value)) != null ? _c : stylableAttribute.options.find((value) => value.value === null);
      (0, import_obsidian3.setIcon)(iconElement, selectedStyle.icon);
      stylableAttributeElement.appendChild(iconElement);
      const labelElement = document.createElement("div");
      labelElement.classList.add("menu-item-title");
      labelElement.textContent = stylableAttribute.label;
      stylableAttributeElement.appendChild(labelElement);
      const expandIconElement = document.createElement("div");
      expandIconElement.classList.add("menu-item-icon");
      (0, import_obsidian3.setIcon)(expandIconElement, "chevron-right");
      stylableAttributeElement.appendChild(expandIconElement);
      styleMenuDropdownElement.appendChild(stylableAttributeElement);
      stylableAttributeElement.addEventListener("pointerenter", () => {
        stylableAttributeElement.classList.add("selected");
      });
      stylableAttributeElement.addEventListener("pointerleave", () => {
        stylableAttributeElement.classList.remove("selected");
      });
      stylableAttributeElement.addEventListener("click", () => {
        var _a3;
        (_a3 = popupMenuElement.querySelector(`#${STYLE_MENU_DROPDOWN_SUBMENU_ID}`)) == null ? void 0 : _a3.remove();
        const styleMenuDropdownSubmenuElement = document.createElement("div");
        styleMenuDropdownSubmenuElement.id = STYLE_MENU_DROPDOWN_SUBMENU_ID;
        styleMenuDropdownSubmenuElement.classList.add("menu");
        styleMenuDropdownSubmenuElement.style.position = "absolute";
        styleMenuDropdownSubmenuElement.style.maxHeight = "initial";
        const topOffset = parseFloat(window.getComputedStyle(styleMenuDropdownElement).getPropertyValue("padding-top")) + (styleMenuDropdownElement.offsetHeight - styleMenuDropdownElement.clientHeight) / 2;
        styleMenuDropdownSubmenuElement.style.top = `${stylableAttributeElement.getBoundingClientRect().top - topOffset - popupMenuElement.getBoundingClientRect().top}px`;
        const leftPosition2 = styleMenuDropdownElement.getBoundingClientRect().right - popupMenuElement.getBoundingClientRect().left;
        const rightPosition2 = popupMenuElement.getBoundingClientRect().right - styleMenuDropdownElement.getBoundingClientRect().left;
        if (popupMenuElement.getBoundingClientRect().left + leftPosition2 < canvasWrapperCenterX)
          styleMenuDropdownSubmenuElement.style.left = `${leftPosition2}px`;
        else
          styleMenuDropdownSubmenuElement.style.right = `${rightPosition2}px`;
        for (const value of stylableAttribute.options) {
          const styleMenuDropdownSubmenuOptionElement = document.createElement("div");
          styleMenuDropdownSubmenuOptionElement.classList.add("menu-item");
          styleMenuDropdownSubmenuOptionElement.classList.add("tappable");
          const submenuIconElement = document.createElement("div");
          submenuIconElement.classList.add("menu-item-icon");
          (0, import_obsidian3.setIcon)(submenuIconElement, value.icon);
          styleMenuDropdownSubmenuOptionElement.appendChild(submenuIconElement);
          const submenuLabelElement = document.createElement("div");
          submenuLabelElement.classList.add("menu-item-title");
          submenuLabelElement.textContent = value.label;
          styleMenuDropdownSubmenuOptionElement.appendChild(submenuLabelElement);
          if (selectedStyle === value) {
            styleMenuDropdownSubmenuOptionElement.classList.add("mod-selected");
            const selectedIconElement = document.createElement("div");
            selectedIconElement.classList.add("menu-item-icon");
            selectedIconElement.classList.add("mod-selected");
            (0, import_obsidian3.setIcon)(selectedIconElement, "check");
            styleMenuDropdownSubmenuOptionElement.appendChild(selectedIconElement);
          }
          styleMenuDropdownSubmenuElement.appendChild(styleMenuDropdownSubmenuOptionElement);
          styleMenuDropdownSubmenuOptionElement.addEventListener("pointerenter", () => {
            styleMenuDropdownSubmenuOptionElement.classList.add("selected");
          });
          styleMenuDropdownSubmenuOptionElement.addEventListener("pointerleave", () => {
            styleMenuDropdownSubmenuOptionElement.classList.remove("selected");
          });
          styleMenuDropdownSubmenuOptionElement.addEventListener("click", () => {
            setStyleAttribute(stylableAttribute, value.value);
            currentStyleAttributes[stylableAttribute.datasetKey] = value.value;
            styleMenuButtonElement.dispatchEvent(new Event("click"));
          });
        }
        popupMenuElement.appendChild(styleMenuDropdownSubmenuElement);
      });
    }
    popupMenuElement.appendChild(styleMenuDropdownElement);
  });
}

// src/core/canvas-extension.ts
var CanvasExtension = class {
  constructor(plugin) {
    this.plugin = plugin;
    const isEnabled = this.isEnabled();
    if (!(isEnabled === true || this.plugin.settings.getSetting(isEnabled)))
      return;
    this.init();
  }
};

// src/canvas-extensions/group-canvas-extension.ts
var GROUP_NODE_SIZE = { width: 300, height: 300 };
var GroupCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => {
        addCardMenuOption(
          canvas,
          createCardMenuOption(
            canvas,
            {
              id: "create-group",
              label: "Drag to add group",
              icon: "group"
            },
            () => GROUP_NODE_SIZE,
            (canvas2, pos) => {
              canvas2.createGroupNode({
                pos,
                size: GROUP_NODE_SIZE
              });
            }
          )
        );
      }
    ));
  }
};

// src/canvas-extensions/presentation-canvas-extension.ts
var import_obsidian4 = require("obsidian");
var START_SLIDE_NAME = "Start Slide";
var DEFAULT_SLIDE_NAME = "New Slide";
var PresentationCanvasExtension = class extends CanvasExtension {
  constructor() {
    super(...arguments);
    this.savedViewport = null;
    this.isPresentationMode = false;
    this.visitedNodes = [];
    this.fullscreenModalObserver = null;
  }
  isEnabled() {
    return "presentationFeatureEnabled";
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "canvas:selection-menu",
      (menu, canvas) => {
        menu.addItem(
          (item) => item.setTitle("Wrap in slide").setIcon("gallery-vertical").onClick(() => this.addSlide(
            canvas,
            void 0,
            enlargeBBox(combineBBoxes(
              [...canvas.selection.values()].map((element) => element.getBBox())
            ), this.plugin.settings.getSetting("wrapInSlidePadding"))
          ))
        );
      }
    ));
    this.plugin.addCommand({
      id: "create-new-slide",
      name: "Create new slide",
      checkCallback: canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly && !this.isPresentationMode,
        (canvas) => this.addSlide(canvas)
      )
    });
    this.plugin.addCommand({
      id: "set-start-node",
      name: "Set start node",
      checkCallback: canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly && !this.isPresentationMode && canvas.getSelectionData().nodes.length === 1,
        (canvas) => this.setStartNode(canvas, canvas.nodes.get(canvas.getSelectionData().nodes[0].id))
      )
    });
    this.plugin.addCommand({
      id: "start-presentation",
      name: "Start presentation",
      checkCallback: canvasCommand(
        this.plugin,
        (_canvas) => !this.isPresentationMode,
        (canvas) => this.startPresentation(canvas)
      )
    });
    this.plugin.addCommand({
      id: "continue-presentation",
      name: "Continue presentation",
      checkCallback: canvasCommand(
        this.plugin,
        (_canvas) => !this.isPresentationMode,
        (canvas) => this.startPresentation(canvas, true)
      )
    });
    this.plugin.addCommand({
      id: "end-presentation",
      name: "End presentation",
      checkCallback: canvasCommand(
        this.plugin,
        (_canvas) => this.isPresentationMode,
        (canvas) => this.endPresentation(canvas)
      )
    });
    this.plugin.addCommand({
      id: "previous-node",
      name: "Previous node",
      checkCallback: canvasCommand(
        this.plugin,
        (_canvas) => this.isPresentationMode,
        (canvas) => this.previousNode(canvas)
      )
    });
    this.plugin.addCommand({
      id: "next-node",
      name: "Next node",
      checkCallback: canvasCommand(
        this.plugin,
        (_canvas) => this.isPresentationMode,
        (canvas) => this.nextNode(canvas)
      )
    });
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.onCanvasChanged(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.onPopupMenuCreated(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeMoved,
      (canvas, node) => this.onNodeMoved(canvas, node)
    ));
  }
  onCanvasChanged(canvas) {
    addCardMenuOption(
      canvas,
      createCardMenuOption(
        canvas,
        {
          id: "new-slide",
          label: "Drag to add slide",
          icon: "gallery-vertical"
        },
        () => this.getDefaultSlideSize(),
        (canvas2, pos) => this.addSlide(canvas2, pos)
      )
    );
  }
  onPopupMenuCreated(canvas) {
    if (!this.plugin.settings.getSetting("showSetStartNodeInPopup"))
      return;
    const selectedNodesData = canvas.getSelectionData().nodes;
    if (canvas.readonly || selectedNodesData.length !== 1 || canvas.selection.size > 1)
      return;
    const selectedNode = canvas.nodes.get(selectedNodesData[0].id);
    if (!selectedNode)
      return;
    addPopupMenuOption(
      canvas,
      createPopupMenuOption({
        id: "start-node",
        label: "Set as start slide",
        icon: "play",
        callback: () => this.setStartNode(canvas, selectedNode)
      })
    );
  }
  onNodeMoved(_canvas, node) {
    const nodeData = node.getData();
    if (!nodeData.sideRatio)
      return;
    const nodeBBox = node.getBBox();
    const nodeSize = {
      width: nodeBBox.maxX - nodeBBox.minX,
      height: nodeBBox.maxY - nodeBBox.minY
    };
    const nodeAspectRatio = nodeSize.width / nodeSize.height;
    if (nodeAspectRatio < nodeData.sideRatio)
      nodeSize.width = nodeSize.height * nodeData.sideRatio;
    else
      nodeSize.height = nodeSize.width / nodeData.sideRatio;
    node.setData({
      ...nodeData,
      width: nodeSize.width,
      height: nodeSize.height
    });
  }
  getStartNode(canvas) {
    for (const [_, node] of canvas.nodes) {
      if (node.getData().isStartNode)
        return node;
    }
    return void 0;
  }
  setStartNode(canvas, node) {
    if (!node)
      return;
    const startNode = this.getStartNode(canvas);
    if (startNode)
      startNode.setData({ ...startNode.getData(), isStartNode: false });
    if (node !== startNode)
      node.setData({ ...node.getData(), isStartNode: true }, true);
  }
  getDefaultSlideSize() {
    const slideSizeString = this.plugin.settings.getSetting("defaultSlideSize");
    const slideSizeArray = slideSizeString.split("x").map((value) => parseInt(value));
    return { width: slideSizeArray[0], height: slideSizeArray[1] };
  }
  getSlideAspectRatio() {
    const slideSize = this.getDefaultSlideSize();
    return slideSize.width / slideSize.height;
  }
  addSlide(canvas, pos, bbox) {
    const isStartNode = this.getStartNode(canvas) == null;
    const slideSize = this.getDefaultSlideSize();
    const slideAspectRatio = this.getSlideAspectRatio();
    if (bbox) {
      const bboxWidth = bbox.maxX - bbox.minX;
      const bboxHeight = bbox.maxY - bbox.minY;
      if (bboxWidth / bboxHeight > slideAspectRatio) {
        slideSize.width = bboxWidth;
        slideSize.height = bboxWidth / slideAspectRatio;
      } else {
        slideSize.height = bboxHeight;
        slideSize.width = bboxHeight * slideAspectRatio;
      }
      pos = {
        x: bbox.minX,
        y: bbox.minY
      };
    }
    if (!pos)
      pos = getCenterCoordinates(canvas, this.getDefaultSlideSize());
    const groupNode = canvas.createGroupNode({
      pos,
      size: slideSize,
      label: isStartNode ? START_SLIDE_NAME : DEFAULT_SLIDE_NAME,
      focus: false
    });
    groupNode.setData({
      ...groupNode.getData(),
      sideRatio: slideAspectRatio,
      isStartNode: isStartNode ? true : void 0
    });
  }
  async animateNodeTransition(canvas, fromNode, toNode) {
    const useCustomZoomFunction = this.plugin.settings.getSetting("zoomToSlideWithoutPadding");
    const animationDurationMs = this.plugin.settings.getSetting("slideTransitionAnimationDuration") * 1e3;
    if (animationDurationMs > 0 && fromNode) {
      const animationIntensity = this.plugin.settings.getSetting("slideTransitionAnimationIntensity");
      const currentNodeBBoxEnlarged = scaleBBox(fromNode.getBBox(), animationIntensity);
      if (useCustomZoomFunction)
        zoomToBBox(canvas, currentNodeBBoxEnlarged);
      else
        canvas.zoomToBbox(currentNodeBBoxEnlarged);
      await sleep(animationDurationMs / 2);
      const nextNodeBBoxEnlarged = scaleBBox(toNode.getBBox(), animationIntensity);
      if (useCustomZoomFunction)
        zoomToBBox(canvas, nextNodeBBoxEnlarged);
      else
        canvas.zoomToBbox(nextNodeBBoxEnlarged);
      await sleep(animationDurationMs / 2);
    }
    let nodeBBox = toNode.getBBox();
    if (useCustomZoomFunction)
      zoomToBBox(canvas, nodeBBox);
    else
      canvas.zoomToBbox(nodeBBox);
  }
  async startPresentation(canvas, tryContinue = false) {
    if (!tryContinue || this.visitedNodes.length === 0) {
      const startNode = this.getStartNode(canvas);
      if (!startNode) {
        new import_obsidian4.Notice("No start node found. Please mark a node as a start node trough the popup menu.");
        return;
      }
      this.visitedNodes = [startNode];
    }
    this.savedViewport = {
      x: canvas.tx,
      y: canvas.ty,
      zoom: canvas.tZoom
    };
    canvas.wrapperEl.focus();
    canvas.wrapperEl.requestFullscreen();
    canvas.wrapperEl.classList.add("presentation-mode");
    canvas.setReadonly(true);
    canvas.wrapperEl.onkeydown = (e) => {
      if (this.plugin.settings.getSetting("useArrowKeysToChangeSlides")) {
        if (e.key === "ArrowRight")
          this.nextNode(canvas);
        else if (e.key === "ArrowLeft")
          this.previousNode(canvas);
      }
      if (this.plugin.settings.getSetting("usePgUpPgDownKeysToChangeSlides")) {
        if (e.key === "PageDown")
          this.nextNode(canvas);
        else if (e.key === "PageUp")
          this.previousNode(canvas);
      }
    };
    this.fullscreenModalObserver = new MutationObserver((mutationRecords) => {
      mutationRecords.forEach((mutationRecord) => {
        mutationRecord.addedNodes.forEach((node) => {
          var _a;
          document.body.removeChild(node);
          (_a = document.fullscreenElement) == null ? void 0 : _a.appendChild(node);
        });
      });
      const inputField = document.querySelector(".prompt-input");
      if (inputField)
        inputField.focus();
    });
    this.fullscreenModalObserver.observe(document.body, { childList: true });
    canvas.wrapperEl.onfullscreenchange = (_e) => {
      if (document.fullscreenElement)
        return;
      this.endPresentation(canvas);
    };
    this.isPresentationMode = true;
    await sleep(500);
    this.animateNodeTransition(canvas, void 0, this.visitedNodes.last());
  }
  endPresentation(canvas) {
    var _a;
    (_a = this.fullscreenModalObserver) == null ? void 0 : _a.disconnect();
    this.fullscreenModalObserver = null;
    canvas.wrapperEl.onkeydown = null;
    canvas.wrapperEl.onfullscreenchange = null;
    canvas.setReadonly(false);
    canvas.wrapperEl.classList.remove("presentation-mode");
    if (document.fullscreenElement)
      document.exitFullscreen();
    canvas.setViewport(this.savedViewport.x, this.savedViewport.y, this.savedViewport.zoom);
    this.isPresentationMode = false;
  }
  nextNode(canvas) {
    var _a;
    const fromNode = this.visitedNodes.last();
    if (!fromNode)
      return;
    const outgoingEdges = canvas.getEdgesForNode(fromNode).filter((edge) => edge.from.node === fromNode);
    let toNode = (_a = outgoingEdges.first()) == null ? void 0 : _a.to.node;
    if (outgoingEdges.length > 1) {
      const sortedEdges = outgoingEdges.sort((a, b) => {
        if (!a.label)
          return 1;
        if (!b.label)
          return -1;
        return a.label.localeCompare(b.label);
      });
      const traversedEdgesCount = this.visitedNodes.filter((visitedNode) => visitedNode == fromNode).length - 1;
      const nextEdge = sortedEdges[traversedEdgesCount];
      toNode = nextEdge.to.node;
    }
    if (toNode) {
      this.visitedNodes.push(toNode);
      this.animateNodeTransition(canvas, fromNode, toNode);
    } else {
      this.animateNodeTransition(canvas, fromNode, fromNode);
    }
  }
  previousNode(canvas) {
    const fromNode = this.visitedNodes.pop();
    if (!fromNode)
      return;
    let toNode = this.visitedNodes.last();
    if (!toNode) {
      toNode = fromNode;
      this.visitedNodes.push(fromNode);
    }
    this.animateNodeTransition(canvas, fromNode, toNode);
  }
};

// src/canvas-extensions/better-readonly-canvas-extension.ts
var BetterReadonlyCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "betterReadonlyEnabled";
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas, _node) => this.updatePopupMenu(canvas)
    ));
    let movingToBBox = false;
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.ViewportChanged.Before,
      (canvas) => {
        var _a, _b, _c, _d, _e, _f;
        if (movingToBBox) {
          movingToBBox = false;
          this.updateLockedZoom(canvas);
          this.updateLockedPan(canvas);
          return;
        }
        if (!canvas.readonly)
          return;
        if (this.plugin.settings.getSetting("disableZoom")) {
          canvas.zoom = (_a = canvas.lockedZoom) != null ? _a : canvas.zoom;
          canvas.tZoom = (_b = canvas.lockedZoom) != null ? _b : canvas.tZoom;
        }
        if (this.plugin.settings.getSetting("disablePan")) {
          canvas.x = (_c = canvas.lockedX) != null ? _c : canvas.x;
          canvas.tx = (_d = canvas.lockedX) != null ? _d : canvas.tx;
          canvas.y = (_e = canvas.lockedY) != null ? _e : canvas.y;
          canvas.ty = (_f = canvas.lockedY) != null ? _f : canvas.ty;
        }
      }
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.ZoomToBbox.Before,
      () => movingToBBox = true
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.ReadonlyChanged,
      (canvas, _readonly) => {
        this.updatePopupMenu(canvas);
        this.updateLockedZoom(canvas);
        this.updateLockedPan(canvas);
      }
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.addQuickSettings(canvas)
    ));
  }
  addQuickSettings(canvas) {
    var _a;
    const settingsContainer = (_a = canvas.quickSettingsButton) == null ? void 0 : _a.parentElement;
    if (!settingsContainer)
      return;
    addQuickSettingsButton(
      settingsContainer,
      this.createToggle({
        id: "disable-node-popup",
        label: "Disable node popup",
        icon: "arrow-up-right-from-circle",
        callback: () => this.updatePopupMenu(canvas)
      }, "disableNodePopup")
    );
    addQuickSettingsButton(
      settingsContainer,
      this.createToggle({
        id: "disable-zoom",
        label: "Disable zoom",
        icon: "zoom-in",
        callback: () => this.updateLockedZoom(canvas)
      }, "disableZoom")
    );
    addQuickSettingsButton(
      settingsContainer,
      this.createToggle({
        id: "disable-pan",
        label: "Disable pan",
        icon: "move",
        callback: () => this.updateLockedPan(canvas)
      }, "disablePan")
    );
  }
  createToggle(menuOption, settingKey) {
    const toggle = createQuickSettingsButton({
      ...menuOption,
      callback: () => (async () => {
        var _a;
        const newValue = !this.plugin.settings.getSetting(settingKey);
        await this.plugin.settings.setSetting({ [settingKey]: newValue });
        toggle.dataset.toggled = this.plugin.settings.getSetting(settingKey).toString();
        (_a = menuOption.callback) == null ? void 0 : _a.call(this);
      })()
    });
    toggle.classList.add("show-while-readonly");
    toggle.dataset.toggled = this.plugin.settings.getSetting(settingKey).toString();
    return toggle;
  }
  updatePopupMenu(canvas) {
    const hidden = canvas.readonly && this.plugin.settings.getSetting("disableNodePopup");
    canvas.menu.menuEl.style.visibility = hidden ? "hidden" : "visible";
  }
  updateLockedZoom(canvas) {
    canvas.lockedZoom = canvas.tZoom;
  }
  updateLockedPan(canvas) {
    canvas.lockedX = canvas.tx;
    canvas.lockedY = canvas.ty;
  }
};

// src/utils/modal-helper.ts
var import_obsidian5 = require("obsidian");

// src/utils/path-helper.ts
function extension(path) {
  return path.includes(".") ? path.split(".").pop() : void 0;
}

// src/utils/modal-helper.ts
var FileNameModal = class extends import_obsidian5.SuggestModal {
  constructor(app, parentPath, fileExtension) {
    super(app);
    this.parentPath = parentPath;
    this.fileExtension = fileExtension;
  }
  getSuggestions(query) {
    const queryWithoutExtension = query.replace(new RegExp(`\\.${this.fileExtension}$`), "");
    if (queryWithoutExtension === "")
      return [];
    const queryWithExtension = queryWithoutExtension + "." + this.fileExtension;
    const suggestions = [`${this.parentPath}/${queryWithExtension}`, queryWithExtension].filter((s) => this.app.vault.getAbstractFileByPath(s) === null);
    return suggestions;
  }
  renderSuggestion(text, el) {
    el.setText(text);
  }
  onChooseSuggestion(_text, _evt) {
  }
  awaitInput() {
    return new Promise((resolve, _reject) => {
      this.onChooseSuggestion = (text) => {
        resolve(text);
      };
      this.open();
    });
  }
};
var FileSelectModal = class extends import_obsidian5.SuggestModal {
  constructor(app, extensionsRegex, suggestNewFile = false) {
    super(app);
    this.files = this.app.vault.getFiles().map((file) => file.path).filter((path) => {
      var _a;
      return (_a = extension(path)) == null ? void 0 : _a.match(extensionsRegex != null ? extensionsRegex : /.*/);
    });
    this.suggestNewFile = suggestNewFile;
    this.setPlaceholder("Type to search...");
    this.setInstructions([{
      command: "\u2191\u2193",
      purpose: "to navigate"
    }, {
      command: "\u21B5",
      purpose: "to open"
    }, {
      command: "shift \u21B5",
      purpose: "to create"
    }, {
      command: "esc",
      purpose: "to dismiss"
    }]);
    this.scope.register(["Shift"], "Enter", (e) => {
      this.onChooseSuggestion(this.inputEl.value, e);
      this.close();
    });
  }
  getSuggestions(query) {
    const suggestions = this.files.filter((path) => path.toLowerCase().includes(query.toLowerCase()));
    if (suggestions.length === 0 && this.suggestNewFile)
      suggestions.push(query);
    return suggestions;
  }
  renderSuggestion(path, el) {
    const simplifiedPath = path.replace(/\.md$/, "");
    el.setText(simplifiedPath);
  }
  onChooseSuggestion(_path, _evt) {
  }
  awaitInput() {
    return new Promise((resolve, _reject) => {
      this.onChooseSuggestion = (path, _evt) => {
        const file = this.app.vault.getAbstractFileByPath(path);
        if (file instanceof import_obsidian5.TFile)
          return resolve(file);
        if (!this.suggestNewFile)
          return;
        if (extension(path) === void 0)
          path += ".md";
        const newFile = this.app.vault.create(path, "");
        resolve(newFile);
      };
      this.open();
    });
  }
};

// src/canvas-extensions/encapsulate-canvas-extension.ts
var ENCAPSULATED_FILE_NODE_SIZE = { width: 300, height: 300 };
var EncapsulateCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "canvasEncapsulationEnabled";
  }
  init() {
    this.plugin.addCommand({
      id: "encapsulate-selection",
      name: "Encapsulate selection",
      checkCallback: canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly && canvas.selection.size > 0,
        (canvas) => this.encapsulateSelection(canvas)
      )
    });
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "canvas:selection-menu",
      (menu, canvas) => {
        menu.addItem(
          (item) => item.setTitle("Encapsulate").setIcon("file-plus").onClick(() => this.encapsulateSelection(canvas))
        );
      }
    ));
  }
  async encapsulateSelection(canvas) {
    var _a;
    const selection = canvas.getSelectionData();
    const sourceFileFolder = (_a = canvas.view.file.parent) == null ? void 0 : _a.path;
    if (!sourceFileFolder)
      return;
    const targetFilePath = await new FileNameModal(
      this.plugin.app,
      sourceFileFolder,
      "canvas"
    ).awaitInput();
    const newFileData = { nodes: selection.nodes, edges: selection.edges };
    const file = await this.plugin.app.vault.create(targetFilePath, JSON.stringify(newFileData, null, 2));
    for (const nodeData of selection.nodes) {
      const node = canvas.nodes.get(nodeData.id);
      if (node)
        canvas.removeNode(node);
    }
    canvas.createFileNode({
      pos: {
        x: selection.center.x - ENCAPSULATED_FILE_NODE_SIZE.width / 2,
        y: selection.center.y - ENCAPSULATED_FILE_NODE_SIZE.height / 2
      },
      size: ENCAPSULATED_FILE_NODE_SIZE,
      file
    });
  }
};

// src/canvas-extensions/commands-canvas-extension.ts
var DIRECTIONS = ["up", "down", "left", "right"];
var CommandsCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "commandsFeatureEnabled";
  }
  init() {
    this.plugin.addCommand({
      id: "create-text-node",
      name: "Create text node",
      checkCallback: canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly,
        (canvas) => this.createTextNode(canvas)
      )
    });
    this.plugin.addCommand({
      id: "create-file-node",
      name: "Create file node",
      checkCallback: canvasCommand(
        this.plugin,
        (canvas) => !canvas.readonly,
        (canvas) => this.createFileNode(canvas)
      )
    });
    this.plugin.addCommand({
      id: "select-all-edges",
      name: "Select all edges",
      checkCallback: canvasCommand(
        this.plugin,
        (_canvas) => true,
        (canvas) => canvas.updateSelection(
          () => canvas.selection = new Set(canvas.edges.values())
        )
      )
    });
    this.plugin.addCommand({
      id: "zoom-to-selection",
      name: "Zoom to selection",
      checkCallback: canvasCommand(
        this.plugin,
        (canvas) => canvas.selection.size > 0,
        (canvas) => canvas.zoomToSelection()
      )
    });
    for (const direction of DIRECTIONS) {
      this.plugin.addCommand({
        id: `clone-node-${direction}`,
        name: `Clone node ${direction}`,
        checkCallback: canvasCommand(
          this.plugin,
          (canvas) => {
            var _a;
            return !canvas.readonly && canvas.selection.size === 1 && ((_a = canvas.selection.values().next().value) == null ? void 0 : _a.getData().type) === "text";
          },
          (canvas) => this.cloneNode(canvas, direction)
        )
      });
      this.plugin.addCommand({
        id: `expand-node-${direction}`,
        name: `Expand node ${direction}`,
        checkCallback: canvasCommand(
          this.plugin,
          (canvas) => !canvas.readonly && canvas.selection.size === 1,
          (canvas) => this.expandNode(canvas, direction)
        )
      });
    }
  }
  createTextNode(canvas) {
    const size = canvas.config.defaultTextNodeDimensions;
    const pos = getCenterCoordinates(canvas, size);
    canvas.createTextNode({ pos, size });
  }
  async createFileNode(canvas) {
    const size = canvas.config.defaultFileNodeDimensions;
    const pos = getCenterCoordinates(canvas, size);
    const file = await new FileSelectModal(this.plugin.app, void 0, true).awaitInput();
    canvas.createFileNode({ pos, size, file });
  }
  cloneNode(canvas, cloneDirection) {
    const sourceNode = canvas.selection.values().next().value;
    if (!sourceNode)
      return;
    const sourceNodeData = sourceNode.getData();
    const nodeMargin = this.plugin.settings.getSetting("cloneNodeMargin");
    const offset = {
      x: (sourceNode.width + nodeMargin) * (cloneDirection === "left" ? -1 : cloneDirection === "right" ? 1 : 0),
      y: (sourceNode.height + nodeMargin) * (cloneDirection === "up" ? -1 : cloneDirection === "down" ? 1 : 0)
    };
    const clonedNode = canvas.createTextNode({
      pos: {
        x: sourceNode.x + offset.x,
        y: sourceNode.y + offset.y
      },
      size: {
        width: sourceNode.width,
        height: sourceNode.height
      }
    });
    clonedNode.setData({
      ...clonedNode.getData(),
      color: sourceNodeData.color,
      shape: sourceNodeData.shape
    });
    if (this.plugin.settings.getSetting("zoomToClonedNode"))
      canvas.zoomToBbox(clonedNode.getBBox());
  }
  expandNode(canvas, expandDirection) {
    const node = canvas.selection.values().next().value;
    if (!node)
      return;
    const expandNodeStepSize = this.plugin.settings.getSetting("expandNodeStepSize");
    const expand = {
      x: expandDirection === "left" ? -1 : expandDirection === "right" ? 1 : 0,
      y: expandDirection === "up" ? -1 : expandDirection === "down" ? 1 : 0
    };
    node.setData({
      ...node.getData(),
      width: node.width + expand.x * expandNodeStepSize,
      height: node.height + expand.y * expandNodeStepSize
    });
  }
};

// src/canvas-extensions/portals-canvas-extension.ts
var import_obsidian6 = require("obsidian");
var PORTAL_PADDING = 50;
var MIN_OPEN_PORTAL_SIZE = { width: 200, height: 200 };
var PortalsCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "portalsFeatureEnabled";
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.updatePopupMenu(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeRemoved,
      (canvas, node) => this.onNodeRemoved(canvas, node)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeMoved,
      (canvas, node) => this.onNodeMoved(canvas, node)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DraggingStateChanged,
      (canvas, startedDragging) => this.onDraggingStateChanged(canvas, startedDragging)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.ContainingNodesRequested,
      (canvas, bbox, nodes) => this.onContainingNodesRequested(canvas, bbox, nodes)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.SelectionChanged,
      (canvas, oldSelection, updateSelection) => this.onSelectionChanged(canvas, oldSelection, updateSelection)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeChanged,
      (canvas, edge) => this.onEdgeChanged(canvas, edge)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DataRequested,
      (canvas, data) => this.removePortalCanvasData(canvas, data)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.LoadData,
      (canvas, data, setData) => {
        this.getCanvasDataWithPortals(canvas, data).then((newData) => {
          if (newData.nodes.length === data.nodes.length && newData.edges.length === data.edges.length)
            return;
          setData(newData);
        });
      }
    ));
  }
  updatePopupMenu(canvas) {
    if (canvas.readonly)
      return;
    const selectedFileNodes = canvas.getSelectionData().nodes.map((nodeData) => {
      var _a;
      const node = canvas.nodes.get(nodeData.id);
      if (!node)
        return null;
      if (nodeData.type !== "file")
        return null;
      if (((_a = node.file) == null ? void 0 : _a.extension) === "canvas")
        return node;
      if (nodeData.portalToFile)
        this.setPortalOpen(canvas, node, false);
      return null;
    }).filter((node) => node !== null);
    if (selectedFileNodes.length !== 1)
      return;
    const portalNode = selectedFileNodes[0];
    const portalNodeData = portalNode.getData();
    if (portalNodeData.portalToFile && portalNodeData.file !== portalNodeData.portalToFile) {
      this.setPortalOpen(canvas, portalNode, true);
    }
    addPopupMenuOption(
      canvas,
      createPopupMenuOption({
        id: "toggle-portal",
        label: portalNodeData.portalToFile ? "Close portal" : "Open portal",
        icon: portalNodeData.portalToFile ? "door-open" : "door-closed",
        callback: () => {
          this.setPortalOpen(canvas, portalNode, portalNodeData.portalToFile === void 0);
          this.updatePopupMenu(canvas);
        }
      })
    );
  }
  setPortalOpen(canvas, portalNode, open) {
    const portalNodeData = portalNode.getData();
    portalNode.setData({
      ...portalNodeData,
      portalToFile: open ? portalNodeData.file : void 0
    });
    canvas.setData(canvas.getData());
  }
  onNodeRemoved(canvas, node) {
    var _a, _b, _c, _d;
    const nodeData = node.getData();
    if (nodeData.type !== "file" || !nodeData.portalToFile)
      return;
    Object.keys((_b = (_a = nodeData.portalIdMaps) == null ? void 0 : _a.nodeIdMap) != null ? _b : {}).map((refNodeId) => canvas.nodes.get(refNodeId)).filter((node2) => node2 !== void 0).forEach((node2) => canvas.removeNode(node2));
    Object.keys((_d = (_c = nodeData.portalIdMaps) == null ? void 0 : _c.edgeIdMap) != null ? _d : {}).map((refEdgeId) => canvas.edges.get(refEdgeId)).filter((edge) => edge !== void 0).forEach((edge) => canvas.removeEdge(edge));
  }
  onEdgeChanged(_canvas, edge) {
    const isUnsaved = edge.from.node !== void 0 && edge.to.node !== void 0 && // Edge not fully connected
    (edge.from.node.getData().portalId !== void 0 && edge.to.node.getData().portalId !== void 0) && // Both nodes are from portal
    edge.getData().portalId === void 0;
    edge.setData({
      ...edge.getData(),
      isUnsaved: isUnsaved ? true : void 0
    });
  }
  onContainingNodesRequested(_canvas, _bbox, nodes) {
    nodes.splice(0, nodes.length, ...nodes.filter((node) => node.getData().portalId === void 0));
  }
  onSelectionChanged(canvas, oldSelection, updateSelection) {
    updateSelection(() => {
      const updatedSelection = Array.from(canvas.selection).filter((node) => node.getData().portalId === void 0);
      canvas.selection = new Set(updatedSelection);
    });
    const previouslySelectedPortalNodesIds = Array.from(oldSelection).filter((node) => node.getData().portalToFile !== void 0).flatMap((node) => {
      const portalNodeData = node.getData();
      const nestedPortalsIds = this.getNestedPortalsIds(canvas, portalNodeData.id);
      return [portalNodeData.id, ...nestedPortalsIds];
    });
    for (const node of canvas.nodes.values()) {
      const nodeData = node.getData();
      if (nodeData.portalId === void 0 || !previouslySelectedPortalNodesIds.includes(nodeData.portalId))
        continue;
      node.updateZIndex();
    }
  }
  getNestedPortalsIds(canvas, portalId) {
    const nestedPortalsIds = [];
    for (const node of canvas.nodes.values()) {
      const nodeData = node.getData();
      if (nodeData.portalId === portalId) {
        nestedPortalsIds.push(nodeData.id);
        nestedPortalsIds.push(...this.getNestedPortalsIds(canvas, nodeData.id));
      }
    }
    return nestedPortalsIds;
  }
  onDraggingStateChanged(canvas, startedDragging) {
    var _a;
    if (!canvas.getSelectionData().nodes.some((node) => node.type === "file" && node.portalToFile))
      return;
    if (startedDragging) {
      const objectSnappingEnabled = canvas.options.snapToObjects;
      this.restoreObjectSnappingState = () => canvas.toggleObjectSnapping(objectSnappingEnabled);
      if (objectSnappingEnabled)
        canvas.toggleObjectSnapping(false);
    } else
      (_a = this.restoreObjectSnappingState) == null ? void 0 : _a.call(this);
  }
  onNodeMoved(canvas, node) {
    const nodeData = node.getData();
    if (nodeData.type !== "file" || !nodeData.portalToFile)
      return;
    this.onOpenPortalMoved(canvas, node);
  }
  onOpenPortalMoved(canvas, portalNode) {
    var _a;
    let portalNodeData = portalNode.getData();
    const nestedNodesIdMap = (_a = portalNode.getData().portalIdMaps) == null ? void 0 : _a.nodeIdMap;
    if (!nestedNodesIdMap)
      return;
    const nestedNodes = Object.keys(nestedNodesIdMap).map((refNodeId) => canvas.nodes.get(refNodeId)).filter((node) => node !== void 0);
    const sourceBBox = getBBox(nestedNodes);
    const targetSize = this.getPortalSize(sourceBBox);
    if (portalNodeData.width !== targetSize.width || portalNodeData.height !== targetSize.height) {
      portalNode.setData({
        ...portalNodeData,
        width: targetSize.width,
        height: targetSize.height
      });
      return;
    }
    const portalOffset = {
      x: portalNodeData.x - sourceBBox.minX + PORTAL_PADDING,
      y: portalNodeData.y - sourceBBox.minY + PORTAL_PADDING
    };
    for (const nestedNode of nestedNodes) {
      const nestedNodeData = nestedNode.getData();
      nestedNode.setData({
        ...nestedNodeData,
        x: nestedNodeData.x + portalOffset.x,
        y: nestedNodeData.y + portalOffset.y
      });
    }
  }
  removePortalCanvasData(_canvas, data) {
    var _a, _b;
    data.edges = data.edges.filter((edgeData) => {
      var _a2, _b2;
      if (edgeData.portalId !== void 0)
        return false;
      const fromNodeData = data.nodes.find((nodeData) => nodeData.id === edgeData.fromNode);
      const toNodeData = data.nodes.find((nodeData) => nodeData.id === edgeData.toNode);
      if (!fromNodeData || !toNodeData)
        return true;
      if (fromNodeData.portalId === void 0 && toNodeData.portalId === void 0) {
        return true;
      } else if (fromNodeData.portalId !== void 0 && toNodeData.portalId !== void 0) {
        return false;
      } else {
        const fromPortalNodeData = fromNodeData.portalId !== void 0 ? fromNodeData : toNodeData;
        const notFromPortalNodeData = fromNodeData.portalId !== void 0 ? toNodeData : fromNodeData;
        notFromPortalNodeData.edgesToNodeFromPortal = (_a2 = notFromPortalNodeData.edgesToNodeFromPortal) != null ? _a2 : {};
        notFromPortalNodeData.edgesToNodeFromPortal[fromPortalNodeData.portalId] = (_b2 = notFromPortalNodeData.edgesToNodeFromPortal[fromPortalNodeData.portalId]) != null ? _b2 : [];
        notFromPortalNodeData.edgesToNodeFromPortal[fromPortalNodeData.portalId].push(edgeData);
        return false;
      }
    });
    data.nodes = data.nodes.filter((nodeData) => nodeData.portalId === void 0);
    for (const portalNodeData of data.nodes) {
      if (portalNodeData.type !== "file")
        continue;
      if (this.plugin.settings.getSetting("maintainClosedPortalSize")) {
        portalNodeData.width = (_a = portalNodeData.closedPortalWidth) != null ? _a : portalNodeData.width;
        portalNodeData.height = (_b = portalNodeData.closedPortalHeight) != null ? _b : portalNodeData.height;
      }
      delete portalNodeData.closedPortalWidth;
      delete portalNodeData.closedPortalHeight;
      delete portalNodeData.portalIdMaps;
    }
  }
  async getCanvasDataWithPortals(canvas, dataRef) {
    const data = JSON.parse(JSON.stringify(dataRef));
    const addedData = await Promise.all(data.nodes.map((nodeData) => this.tryOpenPortal(canvas, nodeData)));
    for (const newData of addedData) {
      data.nodes.push(...newData.nodes);
      data.edges.push(...newData.edges);
    }
    for (const originNodeData of data.nodes) {
      if (originNodeData.edgesToNodeFromPortal === void 0)
        continue;
      for (const [relativePortalId, edges] of Object.entries(originNodeData.edgesToNodeFromPortal)) {
        const idPrefix = originNodeData.portalId ? `${originNodeData.portalId}-` : "";
        const portalId = `${idPrefix}${relativePortalId}`;
        const targetPortalData = data.nodes.find((nodeData) => nodeData.id === portalId);
        if (!targetPortalData) {
          delete originNodeData.edgesToNodeFromPortal[portalId];
          continue;
        }
        if (targetPortalData.portalToFile) {
          data.edges.push(...edges.map((edge) => ({
            ...edge,
            portalId: originNodeData.portalId,
            fromNode: `${idPrefix}${edge.fromNode}`,
            toNode: `${idPrefix}${edge.toNode}`
          })));
          delete originNodeData.edgesToNodeFromPortal[portalId];
        } else if (this.plugin.settings.getSetting("showEdgesIntoDisabledPortals")) {
          data.edges.push(...edges.map((edge) => {
            const fromNodeId = `${idPrefix}${edge.fromNode}`;
            const fromNode = data.nodes.find((nodeData) => nodeData.id === fromNodeId);
            const toNodeId = `${idPrefix}${edge.toNode}`;
            return {
              ...edge,
              fromNode: fromNode ? fromNodeId : portalId,
              toNode: fromNode ? portalId : toNodeId,
              portalId
              // Mark it as temporary
            };
          }));
        }
      }
      if (Object.keys(originNodeData.edgesToNodeFromPortal).length === 0)
        delete originNodeData.edgesToNodeFromPortal;
    }
    return data;
  }
  async tryOpenPortal(canvas, portalNodeData) {
    var _a, _b;
    const addedData = { nodes: [], edges: [] };
    if (portalNodeData.type !== "file" || !portalNodeData.portalToFile)
      return addedData;
    portalNodeData.portalToFile = portalNodeData.file;
    if (portalNodeData.portalToFile === canvas.view.file.path) {
      portalNodeData.portalToFile = void 0;
      return addedData;
    }
    const portalFile = this.plugin.app.vault.getAbstractFileByPath(portalNodeData.file);
    if (!(portalFile instanceof import_obsidian6.TFile) || portalFile.extension !== "canvas") {
      portalNodeData.portalToFile = void 0;
      return addedData;
    }
    const portalFileData = JSON.parse(await this.plugin.app.vault.cachedRead(portalFile));
    if (!portalFileData) {
      portalNodeData.portalToFile = void 0;
      return addedData;
    }
    portalNodeData.portalIdMaps = {
      nodeIdMap: {},
      edgeIdMap: {}
    };
    const sourceMinCoordinates = getBBox(portalFileData.nodes);
    const portalOffset = {
      x: portalNodeData.x - sourceMinCoordinates.minX + PORTAL_PADDING,
      y: portalNodeData.y - sourceMinCoordinates.minY + PORTAL_PADDING
    };
    for (const nodeDataFromPortal of portalFileData.nodes) {
      const refNodeId = `${portalNodeData.id}-${nodeDataFromPortal.id}`;
      portalNodeData.portalIdMaps.nodeIdMap[refNodeId] = nodeDataFromPortal.id;
      const addedNode = {
        ...nodeDataFromPortal,
        id: refNodeId,
        x: nodeDataFromPortal.x + portalOffset.x,
        y: nodeDataFromPortal.y + portalOffset.y,
        portalId: portalNodeData.id
      };
      addedData.nodes.push(addedNode);
      const nestedNodes = await this.tryOpenPortal(canvas, addedNode);
      addedData.nodes.push(...nestedNodes.nodes);
      addedData.edges.push(...nestedNodes.edges);
    }
    for (const edgeDataFromPortal of portalFileData.edges) {
      const refEdgeId = `${portalNodeData.id}-${edgeDataFromPortal.id}`;
      portalNodeData.portalIdMaps.edgeIdMap[refEdgeId] = edgeDataFromPortal.id;
      const fromRefNode = (_a = Object.entries(portalNodeData.portalIdMaps.nodeIdMap).find(([_refNodeId, nodeId]) => nodeId === edgeDataFromPortal.fromNode)) == null ? void 0 : _a[0];
      const toRefNode = (_b = Object.entries(portalNodeData.portalIdMaps.nodeIdMap).find(([_refNodeId, nodeId]) => nodeId === edgeDataFromPortal.toNode)) == null ? void 0 : _b[0];
      addedData.edges.push({
        ...edgeDataFromPortal,
        id: refEdgeId,
        fromNode: fromRefNode,
        toNode: toRefNode,
        portalId: portalNodeData.id
      });
    }
    const nestedNodesBBox = getBBox(addedData.nodes);
    const targetSize = this.getPortalSize(nestedNodesBBox);
    portalNodeData.closedPortalWidth = portalNodeData.width;
    portalNodeData.closedPortalHeight = portalNodeData.height;
    portalNodeData.width = targetSize.width;
    portalNodeData.height = targetSize.height;
    return addedData;
  }
  getPortalSize(sourceBBox) {
    const sourceSize = {
      width: sourceBBox.maxX - sourceBBox.minX,
      height: sourceBBox.maxY - sourceBBox.minY
    };
    const targetSize = {
      width: Math.max(sourceSize.width + PORTAL_PADDING * 2, MIN_OPEN_PORTAL_SIZE.width),
      height: Math.max(sourceSize.height + PORTAL_PADDING * 2, MIN_OPEN_PORTAL_SIZE.height)
    };
    if (!Number.isFinite(targetSize.width))
      targetSize.width = MIN_OPEN_PORTAL_SIZE.width;
    if (!Number.isFinite(targetSize.height))
      targetSize.height = MIN_OPEN_PORTAL_SIZE.height;
    return targetSize;
  }
};

// src/canvas-extensions/better-default-settings-canvas-extension.ts
var BetterDefaultSettingsCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.modifyCanvasSettings(this.plugin.getCurrentCanvas());
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      SettingsManager.SETTINGS_CHANGED_EVENT,
      () => this.modifyCanvasSettings(this.plugin.getCurrentCanvas())
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.modifyCanvasSettings(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DoubleClick,
      (canvas, event, preventDefault) => this.onDoubleClick(canvas, event, preventDefault)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeCreated,
      (canvas, node) => this.applyDefaultNodeStyles(canvas, node)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeCreated,
      (canvas, edge) => this.applyDefaultEdgeStyles(canvas, edge)
    ));
  }
  modifyCanvasSettings(canvas) {
    if (!canvas)
      return;
    canvas.config.defaultTextNodeDimensions = {
      width: this.plugin.settings.getSetting("defaultTextNodeWidth"),
      height: this.plugin.settings.getSetting("defaultTextNodeHeight")
    };
    canvas.config.defaultFileNodeDimensions = {
      width: this.plugin.settings.getSetting("defaultFileNodeWidth"),
      height: this.plugin.settings.getSetting("defaultFileNodeHeight")
    };
  }
  async onDoubleClick(canvas, event, preventDefault) {
    if (event.defaultPrevented || event.target !== canvas.wrapperEl || canvas.isDragging || canvas.readonly)
      return;
    preventDefault.value = true;
    var pos = canvas.posFromEvt(event);
    switch (this.plugin.settings.getSetting("nodeTypeOnDoubleClick")) {
      case "file":
        const file = await new FileSelectModal(this.plugin.app, void 0, true).awaitInput();
        canvas.createFileNode({
          pos,
          position: "center",
          file
        });
        break;
      default:
        canvas.createTextNode({
          pos,
          position: "center"
        });
        break;
    }
  }
  applyDefaultNodeStyles(_canvas, node) {
    const nodeData = node.getData();
    if (nodeData.type !== "text")
      return;
    node.setData({
      ...nodeData,
      styleAttributes: {
        ...nodeData.styleAttributes,
        ...this.plugin.settings.getSetting("defaultTextNodeStyleAttributes")
      }
    });
  }
  applyDefaultEdgeStyles(_canvas, edge) {
    const edgeData = edge.getData();
    edge.setData({
      ...edgeData,
      styleAttributes: {
        ...edgeData.styleAttributes,
        ...this.plugin.settings.getSetting("defaultEdgeStyleAttributes")
      }
    });
  }
};

// src/canvas-extensions/color-palette-canvas-extension.ts
var DEFAULT_COLORS_COUNT = 6;
var CUSTOM_COLORS_MOD_STYLES_ID = "mod-custom-colors";
var ColorPaletteCanvasExtension = class extends CanvasExtension {
  constructor() {
    super(...arguments);
    this.observer = null;
  }
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "window-open",
      (_win, _window) => this.updateCustomColorModStyleClasses()
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      "css-change",
      () => this.updateCustomColorModStyleClasses()
    ));
    this.updateCustomColorModStyleClasses();
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.patchColorSelection(canvas)
    ));
    this.plugin.register(() => {
      var _a;
      return (_a = this.observer) == null ? void 0 : _a.disconnect();
    });
  }
  updateCustomColorModStyleClasses() {
    var _a;
    const customCss = this.getCustomColors().map((colorId) => `
      .mod-canvas-color-${colorId} {
        --canvas-color: var(--canvas-color-${colorId});
      }
    `).join("");
    for (const win of this.plugin.windowsManager.windows) {
      const doc = win.document;
      (_a = doc.getElementById(CUSTOM_COLORS_MOD_STYLES_ID)) == null ? void 0 : _a.remove();
      const customColorModStyle = doc.createElement("style");
      customColorModStyle.id = CUSTOM_COLORS_MOD_STYLES_ID;
      doc.head.appendChild(customColorModStyle);
      customColorModStyle.textContent = customCss;
    }
  }
  patchColorSelection(canvas) {
    if (this.observer)
      this.observer.disconnect();
    this.observer = new MutationObserver((mutations) => {
      const colorMenuOpened = mutations.some(
        (mutation) => Object.values(mutation.addedNodes).some(
          (node) => node instanceof HTMLElement && node.classList.contains("canvas-submenu") && Object.values(node.childNodes).some(
            (node2) => node2 instanceof HTMLElement && node2.classList.contains("canvas-color-picker-item")
          )
        )
      );
      if (!colorMenuOpened)
        return;
      const submenu = canvas.menu.menuEl.querySelector(".canvas-submenu");
      if (!submenu)
        return;
      const currentNodeColor = canvas.getSelectionData().nodes.map((node) => node.color).last();
      for (const colorId of this.getCustomColors()) {
        const customColorMenuItem = this.createColorMenuItem(canvas, colorId);
        if (currentNodeColor === colorId)
          customColorMenuItem.classList.add("is-active");
        submenu.insertBefore(customColorMenuItem, submenu.lastChild);
      }
    });
    this.observer.observe(canvas.menu.menuEl, { childList: true });
  }
  createColorMenuItem(canvas, colorId) {
    const menuItem = document.createElement("div");
    menuItem.classList.add("canvas-color-picker-item");
    menuItem.classList.add(`mod-canvas-color-${colorId}`);
    menuItem.addEventListener("click", () => {
      menuItem.classList.add("is-active");
      for (const item of canvas.selection) {
        item.setColor(colorId);
      }
      canvas.requestSave();
    });
    return menuItem;
  }
  getCustomColors() {
    const colors = [];
    while (true) {
      const colorId = (DEFAULT_COLORS_COUNT + colors.length + 1).toString();
      if (!getComputedStyle(document.body).getPropertyValue(`--canvas-color-${colorId}`))
        break;
      colors.push(colorId);
    }
    return colors;
  }
};

// src/canvas-extensions/collapsible-groups-canvas-extension.ts
var import_obsidian7 = require("obsidian");
var COLLAPSE_BUTTON_ID = "group-collapse-button";
var CollapsibleGroupsCanvasExtension = class extends CanvasExtension {
  isEnabled() {
    return "collapsibleGroupsFeatureEnabled";
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeChanged,
      (canvas, node) => this.onNodeChanged(canvas, node)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeBBoxRequested,
      (canvas, node, bbox) => this.onNodeBBoxRequested(canvas, node, bbox)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DataRequested,
      (_canvas, data) => this.expandCollapsedNodes(data)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.LoadData,
      (_canvas, data, _setData) => this.collapseNodes(data)
    ));
  }
  onNodeChanged(canvas, groupNode) {
    var _a, _b;
    const groupNodeData = groupNode.getData();
    if (groupNodeData.type !== "group")
      return;
    (_a = groupNode.nodeEl) == null ? void 0 : _a.querySelectorAll(`#${COLLAPSE_BUTTON_ID}`).forEach((el) => el.remove());
    const collapseButton = document.createElement("span");
    collapseButton.id = COLLAPSE_BUTTON_ID;
    (0, import_obsidian7.setIcon)(collapseButton, groupNodeData.isCollapsed ? "plus-circle" : "minus-circle");
    collapseButton.onclick = () => {
      this.setCollapsed(canvas, groupNode, groupNode.getData().isCollapsed ? void 0 : true);
    };
    (_b = groupNode.labelEl) == null ? void 0 : _b.insertAdjacentElement("afterend", collapseButton);
  }
  setCollapsed(canvas, groupNode, collapsed) {
    groupNode.setData({ ...groupNode.getData(), isCollapsed: collapsed });
    canvas.setData(canvas.getData());
  }
  onNodeBBoxRequested(_canvas, node, bbox) {
    var _a, _b;
    const nodeData = node.getData();
    if (nodeData.type !== "group" || !nodeData.isCollapsed)
      return;
    bbox.maxX = bbox.minX + ((_b = (_a = node.nodeEl) == null ? void 0 : _a.getBoundingClientRect().width) != null ? _b : 0);
    bbox.maxY = bbox.minY;
  }
  expandCollapsedNodes(data) {
    data.nodes = data.nodes.flatMap((groupNodeData) => {
      const collapsedData = groupNodeData.collapsedData;
      if (collapsedData === void 0)
        return [groupNodeData];
      groupNodeData.collapsedData = void 0;
      data.edges.push(...collapsedData.edges);
      return [groupNodeData, ...collapsedData.nodes.map((nodeData) => ({
        ...nodeData,
        // Restore the relative position of the node to the group
        x: nodeData.x + groupNodeData.x,
        y: nodeData.y + groupNodeData.y
      }))];
    });
  }
  collapseNodes(data) {
    data.nodes.forEach((groupNodeData) => {
      if (!groupNodeData.isCollapsed)
        return;
      const groupNodeBBox = bboxFromNodeData(groupNodeData);
      const containedNodesData = data.nodes.filter(
        (nodeData) => nodeData.id !== groupNodeData.id && insideBBox(bboxFromNodeData(nodeData), groupNodeBBox, false)
      );
      const containedEdgesData = data.edges.filter((edgeData) => {
        return containedNodesData.some((nodeData) => nodeData.id === edgeData.fromNode) || containedNodesData.some((nodeData) => nodeData.id === edgeData.toNode);
      });
      data.nodes = data.nodes.filter((nodeData) => !containedNodesData.includes(nodeData));
      data.edges = data.edges.filter((edgeData) => !containedEdgesData.includes(edgeData));
      groupNodeData.collapsedData = {
        nodes: containedNodesData.map((nodeData) => ({
          ...nodeData,
          // Store the relative position of the node to the group
          x: nodeData.x - groupNodeData.x,
          y: nodeData.y - groupNodeData.y
        })),
        edges: containedEdgesData
      };
    });
  }
};

// src/canvas-extensions/properties-canvas-extension.ts
var import_obsidian8 = require("obsidian");
var PropertiesCanvasExtension = class extends CanvasExtension {
  constructor() {
    super(...arguments);
    this.previousCssclasses = [];
  }
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.onCanvasChanged(canvas)
    ));
  }
  onCanvasChanged(canvas) {
    var _a;
    this.updateCssClasses(canvas);
    const settingsContainer = (_a = canvas.quickSettingsButton) == null ? void 0 : _a.parentElement;
    if (!settingsContainer)
      return;
    addQuickSettingsButton(
      settingsContainer,
      createQuickSettingsButton({
        id: "properties",
        label: "Properties",
        icon: "settings-2",
        callback: () => this.openPropertiesDialog(canvas)
      })
    );
  }
  updateCssClasses(canvas) {
    var _a, _b;
    this.previousCssclasses.forEach((cssclass) => {
      canvas.wrapperEl.classList.remove(cssclass);
    });
    this.previousCssclasses = ((_b = (_a = canvas.metadata) == null ? void 0 : _a.properties) == null ? void 0 : _b.cssclasses) || [];
    this.previousCssclasses.forEach((cssclass) => {
      canvas.wrapperEl.classList.add(cssclass);
    });
  }
  async openPropertiesDialog(canvas) {
    await new PropertiesModal(this.plugin.app, canvas).awaitDialog();
    this.updateCssClasses(canvas);
  }
};
var PropertiesModal = class extends import_obsidian8.Modal {
  constructor(app, canvas) {
    super(app);
    this.canvas = canvas;
  }
  onOpen() {
    new import_obsidian8.Setting(this.contentEl).setHeading().setName("Properties");
    new import_obsidian8.Setting(this.contentEl).setName("cssclasses").setTooltip("Add classes to the canvas wrapper element. Separate multiple classes with spaces.").addText(
      (text) => {
        var _a, _b;
        return text.setValue((_b = (_a = this.canvas.metadata.properties) == null ? void 0 : _a.cssclasses) == null ? void 0 : _b.join(" ")).onChange((value) => {
          this.canvas.metadata.properties = this.canvas.metadata.properties || {};
          this.canvas.metadata.properties.cssclasses = value.split(" ");
        });
      }
    ).settingEl.classList.add("properties-field");
  }
  onClose() {
  }
  awaitDialog() {
    return new Promise((resolve) => {
      this.onClose = () => {
        this.contentEl.empty();
        resolve();
      };
      this.open();
    });
  }
};

// src/canvas-extensions/advanced-styles/node-styles.ts
var NodeStylesExtension = class extends CanvasExtension {
  isEnabled() {
    return "nodeStylingFeatureEnabled";
  }
  init() {
    this.allNodeStyles = [...BUILTIN_NODE_STYLE_ATTRIBUTES, ...this.plugin.settings.getSetting("customNodeStyleAttributes")];
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      SettingsManager.SETTINGS_CHANGED_EVENT,
      () => this.allNodeStyles = [...BUILTIN_NODE_STYLE_ATTRIBUTES, ...this.plugin.settings.getSetting("customNodeStyleAttributes")]
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.onPopupMenuCreated(canvas)
    ));
  }
  onPopupMenuCreated(canvas) {
    var _a;
    const selectionNodeData = canvas.getSelectionData().nodes;
    if (canvas.readonly || selectionNodeData.length === 0 || selectionNodeData.length !== canvas.selection.size)
      return;
    const selectedNodeTypes = new Set(selectionNodeData.map((node) => node.type));
    const availableNodeStyles = this.allNodeStyles.filter((style) => !style.nodeTypes || style.nodeTypes.some((type) => selectedNodeTypes.has(type)));
    createStyleDropdownMenu(
      canvas,
      availableNodeStyles,
      (_a = selectionNodeData[0].styleAttributes) != null ? _a : {},
      (attribute, value) => this.setStyleAttributeForSelection(canvas, attribute, value)
    );
  }
  setStyleAttributeForSelection(canvas, attribute, value) {
    const selectionNodeData = canvas.getSelectionData().nodes;
    for (const nodeData of selectionNodeData) {
      const node = canvas.nodes.get(nodeData.id);
      if (!node)
        continue;
      if (attribute.nodeTypes && !attribute.nodeTypes.includes(nodeData.type))
        continue;
      node.setData({
        ...nodeData,
        styleAttributes: {
          ...nodeData.styleAttributes,
          [attribute.datasetKey]: value
        }
      });
    }
    canvas.pushHistory(canvas.getData());
  }
};

// src/utils/a-star-helper.ts
var DIRECTIONS2 = [
  { dx: 1, dy: 0 },
  { dx: -1, dy: 0 },
  { dx: 0, dy: 1 },
  { dx: 0, dy: -1 },
  { dx: 1, dy: 1 },
  { dx: -1, dy: 1 },
  { dx: 1, dy: -1 },
  { dx: -1, dy: -1 }
];
var DIAGONAL_COST = Math.sqrt(2);
var Node = class {
  constructor(x, y) {
    this.x = x;
    this.y = y;
    this.gCost = 0;
    this.hCost = 0;
    this.fCost = 0;
    this.parent = null;
  }
  // Only check for x and y, not gCost, hCost, fCost, or parent
  inList(nodes) {
    return nodes.some((n) => n.x === this.x && n.y === this.y);
  }
};
function heuristic(node, end) {
  return Math.abs(node.x - end.x) + Math.abs(node.y - end.y);
}
function isTouchingObstacle(node, obstacles) {
  return obstacles.some((obstacle) => insideBBox(node, obstacle, true));
}
function isInsideObstacle(node, obstacles) {
  return obstacles.some((obstacle) => insideBBox(node, obstacle, false));
}
function getMovementCost(direction) {
  return direction.dx !== 0 && direction.dy !== 0 ? DIAGONAL_COST : 1;
}
function getPossibleNeighbors(node, obstacles, gridResolution) {
  const neighbors = [];
  for (const direction of DIRECTIONS2) {
    const neighbor = new Node(
      node.x + direction.dx * gridResolution,
      node.y + direction.dy * gridResolution
    );
    neighbor.gCost = node.gCost + getMovementCost(direction);
    if (isInsideObstacle(neighbor, obstacles))
      continue;
    neighbors.push(neighbor);
  }
  return neighbors;
}
function reconstructPath(node) {
  const path = [];
  while (node) {
    path.push(node);
    node = node.parent;
  }
  return path.reverse();
}
function aStar(fromPos, fromSide, toPos, toSide, obstacles, gridResolution) {
  const start = new Node(
    Math.floor(fromPos.x / gridResolution) * gridResolution,
    Math.floor(fromPos.y / gridResolution) * gridResolution
  );
  if (fromSide === "right" && fromPos.x !== start.x)
    start.x += gridResolution;
  if (fromSide === "bottom" && fromPos.y !== start.y)
    start.y += gridResolution;
  const end = new Node(
    Math.floor(toPos.x / gridResolution) * gridResolution,
    Math.floor(toPos.y / gridResolution) * gridResolution
  );
  if (toSide === "right" && toPos.x !== end.x)
    end.x += gridResolution;
  if (toSide === "bottom" && toPos.y !== end.y)
    end.y += gridResolution;
  if (isInsideObstacle(start, obstacles) || isInsideObstacle(end, obstacles))
    return null;
  const openSet = [start];
  const closedSet = [];
  while (openSet.length > 0) {
    let current = null;
    let lowestFCost = Infinity;
    for (const node of openSet) {
      if (node.fCost < lowestFCost) {
        current = node;
        lowestFCost = node.fCost;
      }
    }
    if (!current)
      return null;
    openSet.splice(openSet.indexOf(current), 1);
    closedSet.push(current);
    if (current.x === end.x && current.y === end.y) {
      return [fromPos, ...reconstructPath(current), toPos].map((node) => ({ x: node.x, y: node.y }));
    }
    if (!(current.x === start.x && current.y === start.y) && isTouchingObstacle(current, obstacles))
      continue;
    for (const neighbor of getPossibleNeighbors(current, obstacles, gridResolution)) {
      if (neighbor.inList(closedSet))
        continue;
      const tentativeGCost = current.gCost + getMovementCost({
        dx: neighbor.x - current.x,
        dy: neighbor.y - current.y
      });
      if (!neighbor.inList(openSet) || tentativeGCost < neighbor.gCost) {
        neighbor.parent = current;
        neighbor.gCost = tentativeGCost;
        neighbor.hCost = heuristic(neighbor, end);
        neighbor.fCost = neighbor.gCost + neighbor.hCost;
        openSet.push(neighbor);
      }
    }
  }
  return null;
}

// src/utils/svg-path-helper.ts
function pathArrayToSvgPath(positions, rounded = false) {
  const tension = 0.2;
  let newPositions = [...positions];
  if (rounded && positions.length > 2) {
    newPositions = [positions[0]];
    for (let i = 1; i < positions.length - 2; i++) {
      const p1 = positions[i];
      const p2 = positions[i + 1];
      const p3 = positions[i + 2];
      const t1 = (1 - tension) / 2;
      const t2 = 1 - t1;
      const x = t2 * t2 * t2 * p1.x + 3 * t2 * t2 * t1 * p2.x + 3 * t2 * t1 * t1 * p3.x + t1 * t1 * t1 * p2.x;
      const y = t2 * t2 * t2 * p1.y + 3 * t2 * t2 * t1 * p2.y + 3 * t2 * t1 * t1 * p3.y + t1 * t1 * t1 * p2.y;
      newPositions.push({ x, y });
    }
    const lastPoint = positions[positions.length - 1];
    newPositions.push(lastPoint);
  }
  for (let i = 0; i < newPositions.length - 2; i++) {
    const p1 = newPositions[i];
    const p2 = newPositions[i + 1];
    const p3 = newPositions[i + 2];
    const currentDirection = {
      x: p2.x - p1.x,
      y: p2.y - p1.y
    };
    const nextDirection = {
      x: p3.x - p2.x,
      y: p3.y - p2.y
    };
    if (currentDirection.x !== nextDirection.x && currentDirection.y !== nextDirection.y)
      continue;
    newPositions.splice(i + 1, 1);
    i--;
  }
  return newPositions.map(
    (position, index) => `${index === 0 ? "M" : "L"} ${position.x} ${position.y}`
  ).join(" ");
}

// src/canvas-extensions/advanced-styles/edge-styles.ts
var EdgeStylesExtension = class extends CanvasExtension {
  isEnabled() {
    return "edgesStylingFeatureEnabled";
  }
  init() {
    this.allEdgeStyleAttributes = [...BUILTIN_EDGE_STYLE_ATTRIBUTES, ...this.plugin.settings.getSetting("customEdgeStyleAttributes")];
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      SettingsManager.SETTINGS_CHANGED_EVENT,
      () => this.allEdgeStyleAttributes = [...BUILTIN_EDGE_STYLE_ATTRIBUTES, ...this.plugin.settings.getSetting("customEdgeStyleAttributes")]
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.PopupMenuCreated,
      (canvas) => this.onPopupMenuCreated(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeChanged,
      (canvas, edge) => this.onEdgeChanged(canvas, edge)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeCenterRequested,
      (canvas, edge, center) => this.onEdgeCenterRequested(canvas, edge, center)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeAdded,
      (canvas, _node) => this.updateAllEdges(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeMoved,
      (canvas, _node) => this.updateAllEdges(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeRemoved,
      (canvas, _node) => this.updateAllEdges(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DraggingStateChanged,
      (canvas, isDragging) => {
        if (isDragging || this.plugin.settings.getSetting("edgeStylePathfinderPathLiveUpdate"))
          return;
        this.updateAllEdges(canvas);
      }
    ));
  }
  onPopupMenuCreated(canvas) {
    var _a;
    const selectedEdges = [...canvas.selection].filter((item) => item.path !== void 0);
    if (canvas.readonly || selectedEdges.length === 0 || selectedEdges.length !== canvas.selection.size)
      return;
    createStyleDropdownMenu(
      canvas,
      this.allEdgeStyleAttributes,
      (_a = selectedEdges[0].getData().styleAttributes) != null ? _a : {},
      (attribute, value) => this.setStyleAttributeForSelection(canvas, attribute, value)
    );
  }
  setStyleAttributeForSelection(canvas, attribute, value) {
    const selectedEdges = [...canvas.selection].filter((item) => item.path !== void 0);
    for (const edge of selectedEdges) {
      const edgeData = edge.getData();
      edge.setData({
        ...edgeData,
        styleAttributes: {
          ...edgeData.styleAttributes,
          [attribute.datasetKey]: value
        }
      });
    }
    canvas.pushHistory(canvas.getData());
  }
  updateAllEdges(canvas) {
    for (const edge of canvas.edges.values()) {
      this.onEdgeChanged(canvas, edge);
    }
  }
  onEdgeChanged(canvas, edge) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k;
    const edgeData = edge.getData();
    if (!edge.bezier)
      return;
    edge.updatePath();
    edge.center = void 0;
    const arrowPolygonPoints = this.getArrowPolygonPoints((_a = edgeData.styleAttributes) == null ? void 0 : _a.arrow);
    if ((_b = edge.fromLineEnd) == null ? void 0 : _b.el)
      (_c = edge.fromLineEnd.el.querySelector("polygon")) == null ? void 0 : _c.setAttribute("points", arrowPolygonPoints);
    if ((_d = edge.toLineEnd) == null ? void 0 : _d.el)
      (_e = edge.toLineEnd.el.querySelector("polygon")) == null ? void 0 : _e.setAttribute("points", arrowPolygonPoints);
    const pathRouteType = (_f = edgeData.styleAttributes) == null ? void 0 : _f.pathfindingMethod;
    if (pathRouteType) {
      const fromPos = edge.from.end === "none" ? getCenterOfBBoxSide(edge.from.node.getBBox(), edge.from.side) : edge.bezier.from;
      const toPos = edge.to.end === "none" ? getCenterOfBBoxSide(edge.to.node.getBBox(), edge.to.side) : edge.bezier.to;
      let newPath = edge.path.display.getAttribute("d");
      if (pathRouteType === "direct") {
        newPath = pathArrayToSvgPath([fromPos, toPos], false);
        edge.center = {
          x: (fromPos.x + toPos.x) / 2,
          y: (fromPos.y + toPos.y) / 2
        };
      } else if (pathRouteType === "square") {
        let pathArray = [];
        if (edge.from.side === "bottom" || edge.from.side === "top") {
          pathArray = [
            fromPos,
            { x: fromPos.x, y: fromPos.y + (toPos.y - fromPos.y) / 2 },
            { x: toPos.x, y: fromPos.y + (toPos.y - fromPos.y) / 2 },
            toPos
          ];
        } else {
          pathArray = [
            fromPos,
            { x: fromPos.x + (toPos.x - fromPos.x) / 2, y: fromPos.y },
            { x: fromPos.x + (toPos.x - fromPos.x) / 2, y: toPos.y },
            toPos
          ];
        }
        newPath = pathArrayToSvgPath(pathArray, false);
        edge.center = {
          x: (fromPos.x + toPos.x) / 2,
          y: (fromPos.y + toPos.y) / 2
        };
      } else if (pathRouteType === "a-star") {
        if (canvas.isDragging && !this.plugin.settings.getSetting("edgeStylePathfinderPathLiveUpdate"))
          return;
        const nodeBBoxes = [...canvas.nodes.values()].filter((node) => {
          const nodeData = node.getData();
          const isGroup = nodeData.type === "group";
          const isOpenPortal = nodeData.portalToFile !== void 0;
          return !isGroup && !isOpenPortal;
        }).map((node) => node.getBBox());
        const fromPosWithMargin = moveInDirection(fromPos, edge.from.side, 10);
        const toPosWithMargin = moveInDirection(toPos, edge.to.side, 10);
        const gridResolution = this.plugin.settings.getSetting("edgeStylePathfinderGridResolution");
        const pathArray = aStar(fromPosWithMargin, edge.from.side, toPosWithMargin, edge.to.side, nodeBBoxes, gridResolution);
        if (!pathArray)
          return;
        pathArray.splice(0, 0, fromPos);
        pathArray.splice(pathArray.length, 0, toPos);
        const roundedPath = this.plugin.settings.getSetting("edgeStylePathfinderPathRounded");
        const svgPath = pathArrayToSvgPath(pathArray, roundedPath);
        newPath = svgPath;
        edge.center = pathArray[Math.floor(pathArray.length / 2)];
      }
      edge.path.interaction.setAttr("d", newPath);
      edge.path.display.setAttr("d", newPath);
    }
    (_g = edge.labelElement) == null ? void 0 : _g.render();
    if (this.plugin.settings.getSetting("edgeStyleDirectRotateArrow")) {
      const edgeRotation = Math.atan2(edge.bezier.to.y - edge.bezier.from.y, edge.bezier.to.x - edge.bezier.from.x) - Math.PI / 2;
      const setArrowRotation = (element, side, rotation) => {
        element.style.transform = element.style.transform.replace(/rotate\([-\d]+(deg|rad)\)/g, `rotate(${rotation}rad)`);
        const offset = getSideVector(side);
        element.style.translate = `${offset.x * 7}px ${offset.y * -7}px`;
      };
      if (pathRouteType === "direct") {
        if ((_h = edge.fromLineEnd) == null ? void 0 : _h.el)
          setArrowRotation(edge.fromLineEnd.el, edge.from.side, edgeRotation);
        if ((_i = edge.toLineEnd) == null ? void 0 : _i.el)
          setArrowRotation(edge.toLineEnd.el, edge.to.side, edgeRotation - Math.PI);
      } else {
        if ((_j = edge.fromLineEnd) == null ? void 0 : _j.el)
          edge.fromLineEnd.el.style.translate = "";
        if ((_k = edge.toLineEnd) == null ? void 0 : _k.el)
          edge.toLineEnd.el.style.translate = "";
      }
    }
  }
  onEdgeCenterRequested(_canvas, edge, center) {
    var _a, _b, _c, _d;
    center.x = (_b = (_a = edge.center) == null ? void 0 : _a.x) != null ? _b : center.x;
    center.y = (_d = (_c = edge.center) == null ? void 0 : _c.y) != null ? _d : center.y;
  }
  getArrowPolygonPoints(arrowStyle) {
    if (arrowStyle === "halved-triangle")
      return `-2,0 7.5,12 -2,12`;
    else if (arrowStyle === "thin-triangle")
      return `0,0 7,10 0,0 0,10 0,0 -7,10`;
    else if (arrowStyle === "diamond" || arrowStyle === "diamond-outline")
      return `0,0 5,10 0,20 -5,10`;
    else if (arrowStyle === "circle" || arrowStyle === "circle-outline")
      return `0 0, 4.95 1.8, 7.5 6.45, 6.6 11.7, 2.7 15, -2.7 15, -6.6 11.7, -7.5 6.45, -4.95 1.8`;
    else
      return `0,0 6.5,10.4 -6.5,10.4`;
  }
};

// src/canvas-extensions/dataset-exposers/node-exposer.ts
function getExposedNodeData(settings) {
  const exposedData = [];
  if (settings.getSetting("nodeStylingFeatureEnabled"))
    exposedData.push("styleAttributes");
  if (settings.getSetting("collapsibleGroupsFeatureEnabled"))
    exposedData.push("isCollapsed");
  if (settings.getSetting("presentationFeatureEnabled"))
    exposedData.push("isStartNode");
  if (settings.getSetting("portalsFeatureEnabled"))
    exposedData.push("portalToFile", "portalId");
  return exposedData;
}
var NodeExposerExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeChanged,
      (_canvas, node) => {
        const nodeData = node == null ? void 0 : node.getData();
        if (!nodeData)
          return;
        for (const exposedDataKey of getExposedNodeData(this.plugin.settings)) {
          const datasetPairs = nodeData[exposedDataKey] instanceof Object ? Object.entries(nodeData[exposedDataKey]) : [[exposedDataKey, nodeData[exposedDataKey]]];
          for (const [key, value] of datasetPairs) {
            if (!value)
              delete node.nodeEl.dataset[key];
            else
              node.nodeEl.dataset[key] = value;
          }
        }
      }
    ));
  }
};

// src/canvas-extensions/dataset-exposers/node-interaction-exposer.ts
var TARGET_NODE_DATASET_PREFIX = "target";
var NodeInteractionExposerExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.NodeInteraction,
      (canvas, node) => {
        const interactionEl = canvas.nodeInteractionLayer.interactionEl;
        if (!interactionEl)
          return;
        for (const dataKey of getExposedNodeData(this.plugin.settings)) {
          const datasetKey = TARGET_NODE_DATASET_PREFIX + dataKey.toString().charAt(0).toUpperCase() + dataKey.toString().slice(1);
          const dataValue = node == null ? void 0 : node.getData()[dataKey];
          if (!dataValue)
            delete interactionEl.dataset[datasetKey];
          else
            interactionEl.dataset[datasetKey] = dataValue;
        }
      }
    ));
  }
};

// src/canvas-extensions/dataset-exposers/edge-exposer.ts
function getExposedEdgeData(settings) {
  const exposedData = [];
  if (settings.getSetting("edgesStylingFeatureEnabled"))
    exposedData.push("styleAttributes");
  if (settings.getSetting("portalsFeatureEnabled"))
    exposedData.push("isUnsaved");
  return exposedData;
}
var EdgeExposerExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.EdgeChanged,
      (_canvas, edge) => {
        var _a, _b, _c, _d;
        const edgeData = edge == null ? void 0 : edge.getData();
        if (!edgeData)
          return;
        for (const exposedDataKey of getExposedEdgeData(this.plugin.settings)) {
          const datasetPairs = edgeData[exposedDataKey] instanceof Object ? Object.entries(edgeData[exposedDataKey]) : [[exposedDataKey, edgeData[exposedDataKey]]];
          for (const [key, value] of datasetPairs) {
            if (!value) {
              delete edge.path.display.dataset[key];
              if ((_a = edge.fromLineEnd) == null ? void 0 : _a.el)
                delete edge.fromLineEnd.el.dataset[key];
              if ((_b = edge.toLineEnd) == null ? void 0 : _b.el)
                delete edge.toLineEnd.el.dataset[key];
            } else {
              edge.path.display.dataset[key] = value;
              if ((_c = edge.fromLineEnd) == null ? void 0 : _c.el)
                edge.fromLineEnd.el.dataset[key] = value;
              if ((_d = edge.toLineEnd) == null ? void 0 : _d.el)
                edge.toLineEnd.el.dataset[key] = value;
            }
          }
        }
      }
    ));
  }
};

// src/canvas-extensions/dataset-exposers/canvas-wrapper-exposer.ts
var EXPOSED_SETTINGS = [
  "performanceOptimizationEnabled",
  "collapsibleGroupsFeatureEnabled",
  "collapsedGroupPreviewOnDrag"
];
var CanvasWrapperExposerExtension = class extends CanvasExtension {
  isEnabled() {
    return true;
  }
  init() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      SettingsManager.SETTINGS_CHANGED_EVENT,
      () => this.updateExposedSettings(this.plugin.getCurrentCanvas())
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => this.updateExposedSettings(canvas)
    ));
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.DraggingStateChanged,
      (canvas, dragging) => {
        if (dragging)
          canvas.wrapperEl.dataset.isDragging = "true";
        else
          delete canvas.wrapperEl.dataset.isDragging;
      }
    ));
  }
  updateExposedSettings(canvas) {
    if (!canvas)
      return;
    for (const setting of EXPOSED_SETTINGS) {
      canvas.wrapperEl.dataset[setting] = this.plugin.settings.getSetting(setting).toString();
    }
  }
};

// src/utils/migration-helper.ts
var MigrationHelper = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  async migrate() {
    this.migrateNodeAndEdgeStyles();
  }
  migrateNodeAndEdgeStyles() {
    this.plugin.registerEvent(this.plugin.app.workspace.on(
      CanvasEvent.CanvasChanged,
      (canvas) => {
        for (const node of canvas.nodes.values()) {
          const nodeData = node.getData();
          const newStyleAttributes = {};
          if (nodeData.isSticker)
            newStyleAttributes["border"] = "invisible";
          if (nodeData.borderStyle)
            newStyleAttributes["border"] = nodeData.borderStyle;
          if (nodeData.shape) {
            newStyleAttributes.textAlign = "center";
            newStyleAttributes.shape = nodeData.shape;
            if ((newStyleAttributes == null ? void 0 : newStyleAttributes.shape) === "centered-rectangle")
              delete newStyleAttributes.shape;
            if ((newStyleAttributes == null ? void 0 : newStyleAttributes.shape) === "oval")
              newStyleAttributes.shape = "pill";
          }
          delete nodeData.isSticker;
          delete nodeData.borderStyle;
          delete nodeData.shape;
          node.setData({
            ...nodeData,
            styleAttributes: {
              ...nodeData.styleAttributes,
              ...newStyleAttributes
            }
          });
        }
        for (const edge of canvas.edges.values()) {
          const edgeData = edge.getData();
          const newStyleAttributes = {};
          if (edgeData.edgeStyle)
            newStyleAttributes.edge = edgeData.edgeStyle;
          if (edgeData.edgePathRoute)
            newStyleAttributes.pathfindingMethod = edgeData.edgePathRoute;
          delete edgeData.edgeStyle;
          delete edgeData.edgePathRoute;
        }
      }
    ));
  }
};

// src/main.ts
var CANVAS_EXTENSIONS = [
  // Dataset Exposers
  CanvasWrapperExposerExtension,
  NodeExposerExtension,
  EdgeExposerExtension,
  NodeInteractionExposerExtension,
  // Advanced Styles
  NodeStylesExtension,
  EdgeStylesExtension,
  // Basic Extensions
  BetterDefaultSettingsCanvasExtension,
  CommandsCanvasExtension,
  PropertiesCanvasExtension,
  BetterReadonlyCanvasExtension,
  GroupCanvasExtension,
  // More Advanced Extensions
  CollapsibleGroupsCanvasExtension,
  EncapsulateCanvasExtension,
  ColorPaletteCanvasExtension,
  PresentationCanvasExtension,
  PortalsCanvasExtension
];
var AdvancedCanvasPlugin = class extends import_obsidian9.Plugin {
  async onload() {
    this.migrationHelper = new MigrationHelper(this);
    await this.migrationHelper.migrate();
    IconsHelper.addIcons();
    this.settings = new SettingsManager(this);
    await this.settings.loadSettings();
    this.settings.addSettingsTab();
    this.windowsManager = new WindowsManager(this);
    this.canvasPatcher = new CanvasPatcher(this);
    this.canvasExtensions = CANVAS_EXTENSIONS.map((Extension) => new Extension(this));
  }
  onunload() {
  }
  getCurrentCanvasView() {
    const canvasView = this.app.workspace.getActiveViewOfType(import_obsidian9.ItemView);
    if ((canvasView == null ? void 0 : canvasView.getViewType()) !== "canvas")
      return null;
    return canvasView;
  }
  getCurrentCanvas() {
    var _a;
    return ((_a = this.getCurrentCanvasView()) == null ? void 0 : _a.canvas) || null;
  }
  // this.app.plugins.plugins["advanced-canvas"].enableDebugMode()
  enableDebugMode() {
    if (this.debugHelper)
      return;
    this.debugHelper = new DebugHelper(this);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAibm9kZV9tb2R1bGVzL21vbmtleS1hcm91bmQvbWpzL2luZGV4LmpzIiwgInNyYy91dGlscy9wYXRjaC1oZWxwZXIudHMiLCAic3JjL2NvcmUvZXZlbnRzLnRzIiwgInNyYy9jb3JlL2NhbnZhcy1wYXRjaGVyLnRzIiwgInNyYy91dGlscy9pY29ucy1oZWxwZXIudHMiLCAic3JjL3V0aWxzL2RlYnVnLWhlbHBlci50cyIsICJzcmMvc2V0dGluZ3MudHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2FkdmFuY2VkLXN0eWxlcy9zdHlsZS1jb25maWcudHMiLCAic3JjL3dpbmRvd3MtbWFuYWdlci50cyIsICJzcmMvdXRpbHMvY2FudmFzLWhlbHBlci50cyIsICJzcmMvdXRpbHMvYmJveC1oZWxwZXIudHMiLCAic3JjL2NvcmUvY2FudmFzLWV4dGVuc2lvbi50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvZ3JvdXAtY2FudmFzLWV4dGVuc2lvbi50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvcHJlc2VudGF0aW9uLWNhbnZhcy1leHRlbnNpb24udHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2JldHRlci1yZWFkb25seS1jYW52YXMtZXh0ZW5zaW9uLnRzIiwgInNyYy91dGlscy9tb2RhbC1oZWxwZXIudHMiLCAic3JjL3V0aWxzL3BhdGgtaGVscGVyLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9lbmNhcHN1bGF0ZS1jYW52YXMtZXh0ZW5zaW9uLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9jb21tYW5kcy1jYW52YXMtZXh0ZW5zaW9uLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9wb3J0YWxzLWNhbnZhcy1leHRlbnNpb24udHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2JldHRlci1kZWZhdWx0LXNldHRpbmdzLWNhbnZhcy1leHRlbnNpb24udHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2NvbG9yLXBhbGV0dGUtY2FudmFzLWV4dGVuc2lvbi50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvY29sbGFwc2libGUtZ3JvdXBzLWNhbnZhcy1leHRlbnNpb24udHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL3Byb3BlcnRpZXMtY2FudmFzLWV4dGVuc2lvbi50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvYWR2YW5jZWQtc3R5bGVzL25vZGUtc3R5bGVzLnRzIiwgInNyYy91dGlscy9hLXN0YXItaGVscGVyLnRzIiwgInNyYy91dGlscy9zdmctcGF0aC1oZWxwZXIudHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2FkdmFuY2VkLXN0eWxlcy9lZGdlLXN0eWxlcy50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvZGF0YXNldC1leHBvc2Vycy9ub2RlLWV4cG9zZXIudHMiLCAic3JjL2NhbnZhcy1leHRlbnNpb25zL2RhdGFzZXQtZXhwb3NlcnMvbm9kZS1pbnRlcmFjdGlvbi1leHBvc2VyLnRzIiwgInNyYy9jYW52YXMtZXh0ZW5zaW9ucy9kYXRhc2V0LWV4cG9zZXJzL2VkZ2UtZXhwb3Nlci50cyIsICJzcmMvY2FudmFzLWV4dGVuc2lvbnMvZGF0YXNldC1leHBvc2Vycy9jYW52YXMtd3JhcHBlci1leHBvc2VyLnRzIiwgInNyYy91dGlscy9taWdyYXRpb24taGVscGVyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBJdGVtVmlldywgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nXHJcbmltcG9ydCBDYW52YXNQYXRjaGVyIGZyb20gJy4vY29yZS9jYW52YXMtcGF0Y2hlcidcclxuaW1wb3J0IHsgQ2FudmFzLCBDYW52YXNWaWV3IH0gZnJvbSAnLi9AdHlwZXMvQ2FudmFzJ1xyXG5cclxuLy8gVXRpbHNcclxuaW1wb3J0IEljb25zSGVscGVyIGZyb20gJy4vdXRpbHMvaWNvbnMtaGVscGVyJ1xyXG5pbXBvcnQgRGVidWdIZWxwZXIgZnJvbSAnLi91dGlscy9kZWJ1Zy1oZWxwZXInXHJcblxyXG4vLyBNYW5hZ2Vyc1xyXG5pbXBvcnQgU2V0dGluZ3NNYW5hZ2VyIGZyb20gJy4vc2V0dGluZ3MnXHJcbmltcG9ydCBXaW5kb3dzTWFuYWdlciBmcm9tICcuL3dpbmRvd3MtbWFuYWdlcidcclxuXHJcbi8vIENhbnZhcyBFeHRlbnNpb25zXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSAnLi9jb3JlL2NhbnZhcy1leHRlbnNpb24nXHJcbmltcG9ydCBHcm91cENhbnZhc0V4dGVuc2lvbiBmcm9tICcuL2NhbnZhcy1leHRlbnNpb25zL2dyb3VwLWNhbnZhcy1leHRlbnNpb24nXHJcbmltcG9ydCBQcmVzZW50YXRpb25DYW52YXNFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9wcmVzZW50YXRpb24tY2FudmFzLWV4dGVuc2lvbidcclxuaW1wb3J0IEJldHRlclJlYWRvbmx5Q2FudmFzRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvYmV0dGVyLXJlYWRvbmx5LWNhbnZhcy1leHRlbnNpb24nXHJcbmltcG9ydCBFbmNhcHN1bGF0ZUNhbnZhc0V4dGVuc2lvbiBmcm9tICcuL2NhbnZhcy1leHRlbnNpb25zL2VuY2Fwc3VsYXRlLWNhbnZhcy1leHRlbnNpb24nXHJcbmltcG9ydCBDb21tYW5kc0NhbnZhc0V4dGVuc2lvbiBmcm9tICcuL2NhbnZhcy1leHRlbnNpb25zL2NvbW1hbmRzLWNhbnZhcy1leHRlbnNpb24nXHJcbmltcG9ydCBQb3J0YWxzQ2FudmFzRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvcG9ydGFscy1jYW52YXMtZXh0ZW5zaW9uJ1xyXG5pbXBvcnQgQmV0dGVyRGVmYXVsdFNldHRpbmdzQ2FudmFzRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvYmV0dGVyLWRlZmF1bHQtc2V0dGluZ3MtY2FudmFzLWV4dGVuc2lvbidcclxuaW1wb3J0IENvbG9yUGFsZXR0ZUNhbnZhc0V4dGVuc2lvbiBmcm9tICcuL2NhbnZhcy1leHRlbnNpb25zL2NvbG9yLXBhbGV0dGUtY2FudmFzLWV4dGVuc2lvbidcclxuaW1wb3J0IENvbGxhcHNpYmxlR3JvdXBzQ2FudmFzRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvY29sbGFwc2libGUtZ3JvdXBzLWNhbnZhcy1leHRlbnNpb24nXHJcbmltcG9ydCBQcm9wZXJ0aWVzQ2FudmFzRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvcHJvcGVydGllcy1jYW52YXMtZXh0ZW5zaW9uJ1xyXG5cclxuLy8gQWR2YW5jZWQgU3R5bGVzXHJcbmltcG9ydCBOb2RlU3R5bGVzRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvYWR2YW5jZWQtc3R5bGVzL25vZGUtc3R5bGVzJ1xyXG5pbXBvcnQgRWRnZVN0eWxlc0V4dGVuc2lvbiBmcm9tICcuL2NhbnZhcy1leHRlbnNpb25zL2FkdmFuY2VkLXN0eWxlcy9lZGdlLXN0eWxlcydcclxuXHJcbi8vIERhdGFzZXQgRXhwb3NlcnNcclxuaW1wb3J0IE5vZGVJbnRlcmFjdGlvbkV4cG9zZXJFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9kYXRhc2V0LWV4cG9zZXJzL25vZGUtaW50ZXJhY3Rpb24tZXhwb3NlcidcclxuaW1wb3J0IE5vZGVFeHBvc2VyRXh0ZW5zaW9uIGZyb20gJy4vY2FudmFzLWV4dGVuc2lvbnMvZGF0YXNldC1leHBvc2Vycy9ub2RlLWV4cG9zZXInXHJcbmltcG9ydCBFZGdlRXhwb3NlckV4dGVuc2lvbiBmcm9tICcuL2NhbnZhcy1leHRlbnNpb25zL2RhdGFzZXQtZXhwb3NlcnMvZWRnZS1leHBvc2VyJ1xyXG5pbXBvcnQgQ2FudmFzV3JhcHBlckV4cG9zZXJFeHRlbnNpb24gZnJvbSAnLi9jYW52YXMtZXh0ZW5zaW9ucy9kYXRhc2V0LWV4cG9zZXJzL2NhbnZhcy13cmFwcGVyLWV4cG9zZXInXHJcbmltcG9ydCBNaWdyYXRpb25IZWxwZXIgZnJvbSAnLi91dGlscy9taWdyYXRpb24taGVscGVyJ1xyXG5cclxuY29uc3QgQ0FOVkFTX0VYVEVOU0lPTlM6IHR5cGVvZiBDYW52YXNFeHRlbnNpb25bXSA9IFtcclxuICAvLyBEYXRhc2V0IEV4cG9zZXJzXHJcbiAgQ2FudmFzV3JhcHBlckV4cG9zZXJFeHRlbnNpb24sXHJcbiAgTm9kZUV4cG9zZXJFeHRlbnNpb24sXHJcbiAgRWRnZUV4cG9zZXJFeHRlbnNpb24sXHJcbiAgTm9kZUludGVyYWN0aW9uRXhwb3NlckV4dGVuc2lvbixcclxuXHJcbiAgLy8gQWR2YW5jZWQgU3R5bGVzXHJcbiAgTm9kZVN0eWxlc0V4dGVuc2lvbixcclxuICBFZGdlU3R5bGVzRXh0ZW5zaW9uLFxyXG5cclxuICAvLyBCYXNpYyBFeHRlbnNpb25zXHJcbiAgQmV0dGVyRGVmYXVsdFNldHRpbmdzQ2FudmFzRXh0ZW5zaW9uLFxyXG4gIENvbW1hbmRzQ2FudmFzRXh0ZW5zaW9uLFxyXG4gIFByb3BlcnRpZXNDYW52YXNFeHRlbnNpb24sXHJcbiAgQmV0dGVyUmVhZG9ubHlDYW52YXNFeHRlbnNpb24sXHJcbiAgR3JvdXBDYW52YXNFeHRlbnNpb24sXHJcblxyXG4gIC8vIE1vcmUgQWR2YW5jZWQgRXh0ZW5zaW9uc1xyXG4gIENvbGxhcHNpYmxlR3JvdXBzQ2FudmFzRXh0ZW5zaW9uLFxyXG4gIEVuY2Fwc3VsYXRlQ2FudmFzRXh0ZW5zaW9uLFxyXG4gIENvbG9yUGFsZXR0ZUNhbnZhc0V4dGVuc2lvbixcclxuICBQcmVzZW50YXRpb25DYW52YXNFeHRlbnNpb24sXHJcbiAgUG9ydGFsc0NhbnZhc0V4dGVuc2lvblxyXG5dXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBZHZhbmNlZENhbnZhc1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcbiAgbWlncmF0aW9uSGVscGVyOiBNaWdyYXRpb25IZWxwZXJcclxuICBkZWJ1Z0hlbHBlcjogRGVidWdIZWxwZXJcclxuXHJcbiAgc2V0dGluZ3M6IFNldHRpbmdzTWFuYWdlclxyXG4gIHdpbmRvd3NNYW5hZ2VyOiBXaW5kb3dzTWFuYWdlclxyXG5cclxuICBjYW52YXNQYXRjaGVyOiBDYW52YXNQYXRjaGVyXHJcbiAgY2FudmFzRXh0ZW5zaW9uczogQ2FudmFzRXh0ZW5zaW9uW11cclxuXHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG4gICAgdGhpcy5taWdyYXRpb25IZWxwZXIgPSBuZXcgTWlncmF0aW9uSGVscGVyKHRoaXMpXHJcbiAgICBhd2FpdCB0aGlzLm1pZ3JhdGlvbkhlbHBlci5taWdyYXRlKClcclxuXHJcbiAgICBJY29uc0hlbHBlci5hZGRJY29ucygpXHJcbiAgICBcclxuICAgIHRoaXMuc2V0dGluZ3MgPSBuZXcgU2V0dGluZ3NNYW5hZ2VyKHRoaXMpXHJcbiAgICBhd2FpdCB0aGlzLnNldHRpbmdzLmxvYWRTZXR0aW5ncygpXHJcbiAgICB0aGlzLnNldHRpbmdzLmFkZFNldHRpbmdzVGFiKClcclxuXHJcbiAgICB0aGlzLndpbmRvd3NNYW5hZ2VyID0gbmV3IFdpbmRvd3NNYW5hZ2VyKHRoaXMpXHJcblxyXG4gICAgdGhpcy5jYW52YXNQYXRjaGVyID0gbmV3IENhbnZhc1BhdGNoZXIodGhpcylcclxuICAgIHRoaXMuY2FudmFzRXh0ZW5zaW9ucyA9IENBTlZBU19FWFRFTlNJT05TLm1hcCgoRXh0ZW5zaW9uOiBhbnkpID0+IG5ldyBFeHRlbnNpb24odGhpcykpXHJcblx0fVxyXG5cclxuICBvbnVubG9hZCgpIHt9XHJcblxyXG4gIGdldEN1cnJlbnRDYW52YXNWaWV3KCk6IENhbnZhc1ZpZXd8bnVsbCB7XHJcbiAgICBjb25zdCBjYW52YXNWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoSXRlbVZpZXcpXHJcbiAgICBpZiAoY2FudmFzVmlldz8uZ2V0Vmlld1R5cGUoKSAhPT0gJ2NhbnZhcycpIHJldHVybiBudWxsXHJcbiAgICByZXR1cm4gY2FudmFzVmlldyBhcyBDYW52YXNWaWV3XHJcbiAgfVxyXG5cclxuICBnZXRDdXJyZW50Q2FudmFzKCk6IENhbnZhc3xudWxsIHtcclxuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRDYW52YXNWaWV3KCk/LmNhbnZhcyB8fCBudWxsXHJcbiAgfVxyXG5cclxuICAvLyB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJhZHZhbmNlZC1jYW52YXNcIl0uZW5hYmxlRGVidWdNb2RlKClcclxuICBlbmFibGVEZWJ1Z01vZGUoKSB7XHJcbiAgICBpZiAodGhpcy5kZWJ1Z0hlbHBlcikgcmV0dXJuXHJcbiAgICB0aGlzLmRlYnVnSGVscGVyID0gbmV3IERlYnVnSGVscGVyKHRoaXMpXHJcbiAgfVxyXG59IiwgImV4cG9ydCBmdW5jdGlvbiBhcm91bmQob2JqLCBmYWN0b3JpZXMpIHtcbiAgICBjb25zdCByZW1vdmVycyA9IE9iamVjdC5rZXlzKGZhY3RvcmllcykubWFwKGtleSA9PiBhcm91bmQxKG9iaiwga2V5LCBmYWN0b3JpZXNba2V5XSkpO1xuICAgIHJldHVybiByZW1vdmVycy5sZW5ndGggPT09IDEgPyByZW1vdmVyc1swXSA6IGZ1bmN0aW9uICgpIHsgcmVtb3ZlcnMuZm9yRWFjaChyID0+IHIoKSk7IH07XG59XG5mdW5jdGlvbiBhcm91bmQxKG9iaiwgbWV0aG9kLCBjcmVhdGVXcmFwcGVyKSB7XG4gICAgY29uc3Qgb3JpZ2luYWwgPSBvYmpbbWV0aG9kXSwgaGFkT3duID0gb2JqLmhhc093blByb3BlcnR5KG1ldGhvZCk7XG4gICAgbGV0IGN1cnJlbnQgPSBjcmVhdGVXcmFwcGVyKG9yaWdpbmFsKTtcbiAgICAvLyBMZXQgb3VyIHdyYXBwZXIgaW5oZXJpdCBzdGF0aWMgcHJvcHMgZnJvbSB0aGUgd3JhcHBpbmcgbWV0aG9kLFxuICAgIC8vIGFuZCB0aGUgd3JhcHBpbmcgbWV0aG9kLCBwcm9wcyBmcm9tIHRoZSBvcmlnaW5hbCBtZXRob2RcbiAgICBpZiAob3JpZ2luYWwpXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihjdXJyZW50LCBvcmlnaW5hbCk7XG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHdyYXBwZXIsIGN1cnJlbnQpO1xuICAgIG9ialttZXRob2RdID0gd3JhcHBlcjtcbiAgICAvLyBSZXR1cm4gYSBjYWxsYmFjayB0byBhbGxvdyBzYWZlIHJlbW92YWxcbiAgICByZXR1cm4gcmVtb3ZlO1xuICAgIGZ1bmN0aW9uIHdyYXBwZXIoLi4uYXJncykge1xuICAgICAgICAvLyBJZiB3ZSBoYXZlIGJlZW4gZGVhY3RpdmF0ZWQgYW5kIGFyZSBubyBsb25nZXIgd3JhcHBlZCwgcmVtb3ZlIG91cnNlbHZlc1xuICAgICAgICBpZiAoY3VycmVudCA9PT0gb3JpZ2luYWwgJiYgb2JqW21ldGhvZF0gPT09IHdyYXBwZXIpXG4gICAgICAgICAgICByZW1vdmUoKTtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnQuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgICAgLy8gSWYgbm8gb3RoZXIgcGF0Y2hlcywganVzdCBkbyBhIGRpcmVjdCByZW1vdmFsXG4gICAgICAgIGlmIChvYmpbbWV0aG9kXSA9PT0gd3JhcHBlcikge1xuICAgICAgICAgICAgaWYgKGhhZE93bilcbiAgICAgICAgICAgICAgICBvYmpbbWV0aG9kXSA9IG9yaWdpbmFsO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmpbbWV0aG9kXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudCA9PT0gb3JpZ2luYWwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIC8vIEVsc2UgcGFzcyBmdXR1cmUgY2FsbHMgdGhyb3VnaCwgYW5kIHJlbW92ZSB3cmFwcGVyIGZyb20gdGhlIHByb3RvdHlwZSBjaGFpblxuICAgICAgICBjdXJyZW50ID0gb3JpZ2luYWw7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih3cmFwcGVyLCBvcmlnaW5hbCB8fCBGdW5jdGlvbik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZHVwZShrZXksIG9sZEZuLCBuZXdGbikge1xuICAgIGNoZWNrW2tleV0gPSBrZXk7XG4gICAgcmV0dXJuIGNoZWNrO1xuICAgIGZ1bmN0aW9uIGNoZWNrKC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIChvbGRGbltrZXldID09PSBrZXkgPyBvbGRGbiA6IG5ld0ZuKS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYWZ0ZXIocHJvbWlzZSwgY2IpIHtcbiAgICByZXR1cm4gcHJvbWlzZS50aGVuKGNiLCBjYik7XG59XG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplKGFzeW5jRnVuY3Rpb24pIHtcbiAgICBsZXQgbGFzdFJ1biA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIGZ1bmN0aW9uIHdyYXBwZXIoLi4uYXJncykge1xuICAgICAgICByZXR1cm4gbGFzdFJ1biA9IG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgICAgICAgYWZ0ZXIobGFzdFJ1biwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGFzeW5jRnVuY3Rpb24uYXBwbHkodGhpcywgYXJncykudGhlbihyZXMsIHJlaik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHdyYXBwZXIuYWZ0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBsYXN0UnVuID0gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7IGFmdGVyKGxhc3RSdW4sIHJlcyk7IH0pO1xuICAgIH07XG4gICAgcmV0dXJuIHdyYXBwZXI7XG59XG4iLCAiaW1wb3J0IHsgYXJvdW5kIH0gZnJvbSBcIm1vbmtleS1hcm91bmRcIlxyXG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRyeVBhdGNoV29ya3NwYWNlUHJvdG90eXBlPFQ+KHBsdWdpbjogUGx1Z2luLCBnZXRUYXJnZXQ6ICgpID0+IFR8dW5kZWZpbmVkLCBmdW5jdGlvbnM6IHsgW2tleTogc3RyaW5nXTogKG5leHQ6IGFueSkgPT4gKC4uLmFyZ3M6IGFueSkgPT4gYW55IH0pOiBQcm9taXNlPFQ+IHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgIGNvbnN0IHRyeVBhdGNoID0gKCkgPT4ge1xyXG4gICAgICBjb25zdCB0YXJnZXQgPSBnZXRUYXJnZXQoKVxyXG4gICAgICBpZiAoIXRhcmdldCkgcmV0dXJuIG51bGxcclxuXHJcbiAgICAgIGNvbnN0IHVuaW5zdGFsbGVyID0gYXJvdW5kKHRhcmdldC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIGZ1bmN0aW9ucylcclxuICAgICAgcGx1Z2luLnJlZ2lzdGVyKHVuaW5zdGFsbGVyKVxyXG5cclxuICAgICAgcmV0dXJuIHRhcmdldFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IHRyeVBhdGNoKClcclxuICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgcmVzb2x2ZShyZXN1bHQpXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGxpc3RlbmVyID0gcGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ2xheW91dC1jaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHRyeVBhdGNoKClcclxuXHJcbiAgICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgICBwbHVnaW4uYXBwLndvcmtzcGFjZS5vZmZyZWYobGlzdGVuZXIpXHJcbiAgICAgICAgcmVzb2x2ZShyZXN1bHQpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgcGx1Z2luLnJlZ2lzdGVyRXZlbnQobGlzdGVuZXIpXHJcbiAgfSlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhdGNoT2JqZWN0UHJvdG90eXBlPFQ+KHBsdWdpbjogUGx1Z2luLCB0YXJnZXQ6IFQsIGZ1bmN0aW9uczogeyBba2V5OiBzdHJpbmddOiAobmV4dDogYW55KSA9PiAoLi4uYXJnczogYW55KSA9PiBhbnkgfSk6IHZvaWQge1xyXG4gIGNvbnN0IHVuaW5zdGFsbGVyID0gYXJvdW5kKCh0YXJnZXQgYXMgYW55KS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIGZ1bmN0aW9ucylcclxuICBwbHVnaW4ucmVnaXN0ZXIodW5pbnN0YWxsZXIpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXRjaE9iamVjdEluc3RhbmNlPFQ+KHBsdWdpbjogUGx1Z2luLCB0YXJnZXQ6IFQsIGZ1bmN0aW9uczogeyBba2V5OiBzdHJpbmddOiAobmV4dDogYW55KSA9PiAoLi4uYXJnczogYW55KSA9PiBhbnkgfSk6IHZvaWQge1xyXG4gIGNvbnN0IHVuaW5zdGFsbGVyID0gYXJvdW5kKHRhcmdldCBhcyBhbnksIGZ1bmN0aW9ucylcclxuICBwbHVnaW4ucmVnaXN0ZXIodW5pbnN0YWxsZXIpXHJcbn0iLCAiY29uc3QgUExVR0lOX0VWRU5UX1BSRUZJWCA9ICdhZHZhbmNlZC1jYW52YXMnXHJcblxyXG5leHBvcnQgY29uc3QgQ2FudmFzRXZlbnQgPSB7XHJcbiAgQ2FudmFzQ2hhbmdlZDogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06Y2FudmFzLWNoYW5nZWRgLFxyXG4gIFZpZXdwb3J0Q2hhbmdlZDoge1xyXG4gICAgQmVmb3JlOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTp2aWV3cG9ydC1jaGFuZ2VkOmJlZm9yZWAsXHJcbiAgICBBZnRlcjogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06dmlld3BvcnQtY2hhbmdlZDphZnRlcmBcclxuICB9LFxyXG4gIE5vZGVNb3ZlZDogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06bm9kZS1tb3ZlZGAsXHJcbiAgRG91YmxlQ2xpY2s6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OmRvdWJsZS1jbGlja2AsXHJcbiAgRHJhZ2dpbmdTdGF0ZUNoYW5nZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OmRyYWdnaW5nLXN0YXRlLWNoYW5nZWRgLFxyXG4gIE5vZGVDcmVhdGVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpub2RlLWNyZWF0ZWRgLFxyXG4gIEVkZ2VDcmVhdGVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTplZGdlLWNyZWF0ZWRgLFxyXG4gIE5vZGVBZGRlZDogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06bm9kZS1hZGRlZGAsXHJcbiAgRWRnZUFkZGVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTplZGdlLWFkZGVkYCxcclxuICBOb2RlUmVtb3ZlZDogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06bm9kZS1yZW1vdmVkYCxcclxuICBFZGdlUmVtb3ZlZDogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06ZWRnZS1yZW1vdmVkYCxcclxuICBOb2RlQ2hhbmdlZDogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06bm9kZS1jaGFuZ2VkYCxcclxuICBFZGdlQ2hhbmdlZDogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06ZWRnZS1jaGFuZ2VkYCxcclxuICBOb2RlQkJveFJlcXVlc3RlZDogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06bm9kZS1iYm94LXJlcXVlc3RlZGAsXHJcbiAgRWRnZUNlbnRlclJlcXVlc3RlZDogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06ZWRnZS1jZW50ZXItcmVxdWVzdGVkYCxcclxuICBDb250YWluaW5nTm9kZXNSZXF1ZXN0ZWQ6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OmNvbnRhaW5pbmctbm9kZXMtcmVxdWVzdGVkYCxcclxuICBTZWxlY3Rpb25DaGFuZ2VkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpzZWxlY3Rpb24tY2hhbmdlZGAsXHJcbiAgWm9vbVRvQmJveDoge1xyXG4gICAgQmVmb3JlOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTp6b29tLXRvLWJib3g6YmVmb3JlYCxcclxuICAgIEFmdGVyOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTp6b29tLXRvLWJib3g6YWZ0ZXJgXHJcbiAgfSxcclxuICBQb3B1cE1lbnVDcmVhdGVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpwb3B1cC1tZW51LWNyZWF0ZWRgLFxyXG4gIE5vZGVJbnRlcmFjdGlvbjogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06bm9kZS1pbnRlcmFjdGlvbmAsXHJcbiAgVW5kbzogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06dW5kb2AsXHJcbiAgUmVkbzogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06cmVkb2AsXHJcbiAgUmVhZG9ubHlDaGFuZ2VkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpyZWFkb25seS1jaGFuZ2VkYCxcclxuICBEYXRhUmVxdWVzdGVkOiBgJHtQTFVHSU5fRVZFTlRfUFJFRklYfTpkYXRhLXJlcXVlc3RlZGAsXHJcbiAgTG9hZERhdGE6IGAke1BMVUdJTl9FVkVOVF9QUkVGSVh9OmxvYWQtZGF0YWAsXHJcbiAgQ2FudmFzU2F2ZWQ6IHtcclxuICAgIEJlZm9yZTogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06Y2FudmFzLXNhdmVkOmJlZm9yZWAsXHJcbiAgICBBZnRlcjogYCR7UExVR0lOX0VWRU5UX1BSRUZJWH06Y2FudmFzLXNhdmVkOmFmdGVyYFxyXG4gIH1cclxufSIsICJpbXBvcnQgQWR2YW5jZWRDYW52YXNQbHVnaW4gZnJvbSBcInNyYy9tYWluXCJcclxuaW1wb3J0IHsgQkJveCwgQ2FudmFzLCBDYW52YXNEYXRhLCBDYW52YXNFZGdlLCBDYW52YXNFZGdlRGF0YSwgQ2FudmFzRWxlbWVudCwgQ2FudmFzTm9kZSwgQ2FudmFzTm9kZURhdGEsIENhbnZhc1ZpZXcgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBwYXRjaE9iamVjdEluc3RhbmNlLCBwYXRjaE9iamVjdFByb3RvdHlwZSB9IGZyb20gXCJzcmMvdXRpbHMvcGF0Y2gtaGVscGVyXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwiLi9ldmVudHNcIlxyXG5pbXBvcnQgeyBXb3Jrc3BhY2VMZWFmIH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuaW1wb3J0IHsgYXJvdW5kIH0gZnJvbSBcIm1vbmtleS1hcm91bmRcIlxyXG5pbXBvcnQgeyBjcmVhdGUgfSBmcm9tIFwiZG9tYWluXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbnZhc1BhdGNoZXIge1xyXG4gIHBsdWdpbjogQWR2YW5jZWRDYW52YXNQbHVnaW5cclxuXHJcbiAgY29uc3RydWN0b3IocGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpbikge1xyXG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW5cclxuICAgIHRoaXMuYXBwbHlQYXRjaGVzKClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgYXBwbHlQYXRjaGVzKCkge1xyXG4gICAgY29uc3QgdGhhdCA9IHRoaXNcclxuXHJcbiAgICAvLyBHZXQgdGhlIGN1cnJlbnQgY2FudmFzIHZpZXcgb3Igd2FpdCBmb3IgaXQgdG8gYmUgY3JlYXRlZFxyXG4gICAgY29uc3QgY2FudmFzVmlldyA9IChcclxuICAgICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2NhbnZhcycpPy5maXJzdCgpPy52aWV3ID8/XHJcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlPENhbnZhc1ZpZXc+KChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGNvbnN0IHVuaW5zdGFsbCA9IGFyb3VuZCh0aGlzLnBsdWdpbi5hcHAuaW50ZXJuYWxQbHVnaW5zLnBsdWdpbnMuY2FudmFzLnZpZXdzLCB7XHJcbiAgICAgICAgICBjYW52YXM6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcblxyXG4gICAgICAgICAgICByZXNvbHZlKHJlc3VsdClcclxuICAgICAgICAgICAgdW5pbnN0YWxsKCkgLy8gVW5pbnN0YWxsIHRoZSBwYXRjaFxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXIodW5pbnN0YWxsKVxyXG4gICAgICB9KVxyXG4gICAgKSBhcyBDYW52YXNWaWV3XHJcbiAgICBcclxuICAgIC8vIFBhdGNoIGNhbnZhcyB2aWV3XHJcbiAgICBwYXRjaE9iamVjdFByb3RvdHlwZSh0aGlzLnBsdWdpbiwgY2FudmFzVmlldywge1xyXG4gICAgICBnZXRWaWV3RGF0YTogKF9uZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5fYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3QgY2FudmFzRGF0YSA9IHRoaXMuY2FudmFzLmdldERhdGEoKVxyXG4gICAgICAgIGNhbnZhc0RhdGEubWV0YWRhdGEgPSB0aGlzLmNhbnZhcy5tZXRhZGF0YSA/PyB7fVxyXG5cclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoY2FudmFzRGF0YSwgbnVsbCwgMilcclxuICAgICAgfSxcclxuICAgICAgc2V0Vmlld0RhdGE6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uIChqc29uOiBzdHJpbmcsIC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCBqc29uLCAuLi5hcmdzKVxyXG5cclxuICAgICAgICB0cnkgeyB0aGlzLmNhbnZhcy5tZXRhZGF0YSA9IEpTT04ucGFyc2UoanNvbikubWV0YWRhdGEgfVxyXG4gICAgICAgIGNhdGNoIChfZSkgeyB0aGlzLmNhbnZhcy5tZXRhZGF0YSA9IHt9IH1cclxuXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuQ2FudmFzQ2hhbmdlZCwgdGhpcy5jYW52YXMpXHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBQYXRjaCBjYW52YXNcclxuICAgIHBhdGNoT2JqZWN0UHJvdG90eXBlKHRoaXMucGx1Z2luLCBjYW52YXNWaWV3LmNhbnZhcywge1xyXG4gICAgICBtYXJrVmlld3BvcnRDaGFuZ2VkOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuVmlld3BvcnRDaGFuZ2VkLkJlZm9yZSwgdGhpcylcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5WaWV3cG9ydENoYW5nZWQuQWZ0ZXIsIHRoaXMpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICBtYXJrTW92ZWQ6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uIChub2RlOiBDYW52YXNOb2RlKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIG5vZGUpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTm9kZU1vdmVkLCB0aGlzLCBub2RlKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgb25Eb3VibGVDbGljazogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKGV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJldmVudERlZmF1bHQgPSB7IHZhbHVlOiBmYWxzZSB9XHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuRG91YmxlQ2xpY2ssIHRoaXMsIGV2ZW50LCBwcmV2ZW50RGVmYXVsdClcclxuICAgICAgICBpZiAoIXByZXZlbnREZWZhdWx0LnZhbHVlKSBuZXh0LmNhbGwodGhpcywgZXZlbnQpXHJcbiAgICAgIH0sXHJcbiAgICAgIHNldERyYWdnaW5nOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoZHJhZ2dpbmc6IGJvb2xlYW4pIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgZHJhZ2dpbmcpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuRHJhZ2dpbmdTdGF0ZUNoYW5nZWQsIHRoaXMsIGRyYWdnaW5nKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgZ2V0Q29udGFpbmluZ05vZGVzOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoYmJveDogQkJveCkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCBiYm94KVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LkNvbnRhaW5pbmdOb2Rlc1JlcXVlc3RlZCwgdGhpcywgYmJveCwgcmVzdWx0KVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgdXBkYXRlU2VsZWN0aW9uOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAodXBkYXRlOiAoKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgY29uc3Qgb2xkU2VsZWN0aW9uID0gbmV3IFNldCh0aGlzLnNlbGVjdGlvbilcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgdXBkYXRlKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LlNlbGVjdGlvbkNoYW5nZWQsIHRoaXMsIG9sZFNlbGVjdGlvbiwgKCh1cGRhdGU6ICgpID0+IHZvaWQpID0+IG5leHQuY2FsbCh0aGlzLCB1cGRhdGUpKSlcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIGNyZWF0ZVRleHROb2RlOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVDcmVhdGVkLCB0aGlzLCBub2RlKVxyXG4gICAgICAgIHJldHVybiBub2RlXHJcbiAgICAgIH0sXHJcbiAgICAgIGNyZWF0ZUZpbGVOb2RlOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVDcmVhdGVkLCB0aGlzLCBub2RlKVxyXG4gICAgICAgIHJldHVybiBub2RlXHJcbiAgICAgIH0sXHJcbiAgICAgIGNyZWF0ZUZpbGVOb2RlczogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IG5vZGVzID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgbm9kZXMuZm9yRWFjaCgobm9kZTogQ2FudmFzTm9kZSkgPT4gdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTm9kZUNyZWF0ZWQsIHRoaXMsIG5vZGUpKVxyXG4gICAgICAgIHJldHVybiBub2Rlc1xyXG4gICAgICB9LFxyXG4gICAgICBjcmVhdGVHcm91cE5vZGU6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBub2RlID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTm9kZUNyZWF0ZWQsIHRoaXMsIG5vZGUpXHJcbiAgICAgICAgcmV0dXJuIG5vZGVcclxuICAgICAgfSxcclxuICAgICAgY3JlYXRlTGlua05vZGU6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBub2RlID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTm9kZUNyZWF0ZWQsIHRoaXMsIG5vZGUpXHJcbiAgICAgICAgcmV0dXJuIG5vZGVcclxuICAgICAgfSxcclxuICAgICAgYWRkTm9kZTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKG5vZGU6IENhbnZhc05vZGUpIHtcclxuICAgICAgICB0aGF0LnBhdGNoTm9kZShub2RlKVxyXG4gICAgICAgIHJldHVybiBuZXh0LmNhbGwodGhpcywgbm9kZSlcclxuICAgICAgfSxcclxuICAgICAgYWRkRWRnZTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKGVkZ2U6IENhbnZhc0VkZ2UpIHtcclxuICAgICAgICB0aGF0LnBhdGNoRWRnZShlZGdlKVxyXG4gICAgICAgIGlmICghdGhpcy52aWV3cG9ydENoYW5nZWQpIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LkVkZ2VDcmVhdGVkLCB0aGlzLCBlZGdlKVxyXG4gICAgICAgIHJldHVybiBuZXh0LmNhbGwodGhpcywgZWRnZSlcclxuICAgICAgfSxcclxuICAgICAgcmVtb3ZlTm9kZTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKG5vZGU6IENhbnZhc05vZGUpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgbm9kZSlcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5Ob2RlUmVtb3ZlZCwgdGhpcywgbm9kZSlcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIHJlbW92ZUVkZ2U6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uIChlZGdlOiBDYW52YXNFZGdlKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIGVkZ2UpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuRWRnZVJlbW92ZWQsIHRoaXMsIGVkZ2UpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICB6b29tVG9CYm94OiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoYmJveDogQkJveCkge1xyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Llpvb21Ub0Jib3guQmVmb3JlLCB0aGlzLCBiYm94KVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCBiYm94KVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Llpvb21Ub0Jib3guQWZ0ZXIsIHRoaXMsIGJib3gpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICBzZXRSZWFkb25seTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKHJlYWRvbmx5OiBib29sZWFuKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIHJlYWRvbmx5KVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LlJlYWRvbmx5Q2hhbmdlZCwgdGhpcywgcmVhZG9ubHkpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICB9LFxyXG4gICAgICB1bmRvOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhpcy5pbXBvcnREYXRhKHRoaXMuZ2V0RGF0YSgpLCB0cnVlKSAvLyBGb3JjZSB1cGRhdGUgdGhlIGNhbnZhcyBkYXRhXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuVW5kbywgdGhpcylcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIHJlZG86IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICB0aGlzLmltcG9ydERhdGEodGhpcy5nZXREYXRhKCksIHRydWUpIC8vIEZvcmNlIHVwZGF0ZSB0aGUgY2FudmFzIGRhdGFcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5SZWRvLCB0aGlzKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgLypzZXREYXRhOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgLy9cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuICAgICAgICAvL1xyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSwqL1xyXG4gICAgICBnZXREYXRhOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuRGF0YVJlcXVlc3RlZCwgdGhpcywgcmVzdWx0KVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgaW1wb3J0RGF0YTogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKGRhdGE6IENhbnZhc0RhdGEsIGNsZWFyQ2FudmFzPzogYm9vbGVhbiwgc2lsZW50PzogYm9vbGVhbikge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldEZpbGVQYXRoID0gdGhpcy52aWV3LmZpbGUucGF0aFxyXG4gICAgICAgIGNvbnN0IHNldERhdGEgPSAoZGF0YTogQ2FudmFzRGF0YSkgPT4ge1xyXG4gICAgICAgICAgLy8gU2tpcCBpZiB0aGUgY2FudmFzIGdvdCB1bmxvYWRlZCBvciB0aGUgZmlsZSBjaGFuZ2VkXHJcbiAgICAgICAgICBpZiAoIXRoaXMudmlldy5maWxlIHx8IHRoaXMudmlldy5maWxlLnBhdGggIT09IHRhcmdldEZpbGVQYXRoKSByZXR1cm5cclxuXHJcbiAgICAgICAgICB0aGlzLmltcG9ydERhdGEoZGF0YSwgdHJ1ZSwgdHJ1ZSlcclxuICAgICAgICAgIHRoYXQuZW1pdEV2ZW50c0ZvclVua25vd25EYXRhQ2hhbmdlcyh0aGlzKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFzaWxlbnQpIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LkxvYWREYXRhLCB0aGlzLCBkYXRhLCBzZXREYXRhKVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCBkYXRhLCBjbGVhckNhbnZhcylcclxuICAgICAgICB0aGF0LmVtaXRFdmVudHNGb3JVbmtub3duRGF0YUNoYW5nZXModGhpcylcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH0sXHJcbiAgICAgIHJlcXVlc3RTYXZlOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuQ2FudmFzU2F2ZWQuQmVmb3JlLCB0aGlzKVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LkNhbnZhc1NhdmVkLkFmdGVyLCB0aGlzKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBQYXRjaCBjYW52YXMgcG9wdXAgbWVudVxyXG4gICAgcGF0Y2hPYmplY3RQcm90b3R5cGUodGhpcy5wbHVnaW4sIGNhbnZhc1ZpZXcuY2FudmFzLm1lbnUsIHtcclxuICAgICAgcmVuZGVyOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuUG9wdXBNZW51Q3JlYXRlZCwgdGhpcy5jYW52YXMpXHJcbiAgICAgICAgbmV4dC5jYWxsKHRoaXMpIC8vIFJlLUNlbnRlciB0aGUgcG9wdXAgbWVudVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBQYXRjaCBpbnRlcmFjdGlvbiBsYXllclxyXG4gICAgcGF0Y2hPYmplY3RQcm90b3R5cGUodGhpcy5wbHVnaW4sIGNhbnZhc1ZpZXcuY2FudmFzLm5vZGVJbnRlcmFjdGlvbkxheWVyLCB7XHJcbiAgICAgIHNldFRhcmdldDogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKG5vZGU6IENhbnZhc05vZGUpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgbm9kZSlcclxuICAgICAgICB0aGF0LnRyaWdnZXJXb3Jrc3BhY2VFdmVudChDYW52YXNFdmVudC5Ob2RlSW50ZXJhY3Rpb24sIHRoaXMuY2FudmFzLCBub2RlKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBDYW52YXMgaXMgbm93IHBhdGNoZWQgLSB1cGRhdGUgYWxsIG9wZW4gY2FudmFzIHZpZXdzXHJcbiAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWY6IFdvcmtzcGFjZUxlYWYpID0+IHtcclxuICAgICAgaWYgKGxlYWYudmlldy5nZXRWaWV3VHlwZSgpICE9PSAnY2FudmFzJykgcmV0dXJuXHJcblxyXG4gICAgICBjb25zdCBjYW52YXNWaWV3ID0gbGVhZi52aWV3IGFzIENhbnZhc1ZpZXdcclxuICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICBjYW52YXNWaWV3LmxlYWYucmVidWlsZFZpZXcoKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcGF0Y2hOb2RlKG5vZGU6IENhbnZhc05vZGUpIHtcclxuICAgIGNvbnN0IHRoYXQgPSB0aGlzXHJcblxyXG4gICAgcGF0Y2hPYmplY3RJbnN0YW5jZSh0aGlzLnBsdWdpbiwgbm9kZSwge1xyXG4gICAgICBzZXREYXRhOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoZGF0YTogQ2FudmFzTm9kZURhdGEsIGFkZEhpc3Rvcnk/OiBib29sZWFuKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIGRhdGEpXHJcblxyXG4gICAgICAgIGlmIChub2RlLmluaXRpYWxpemVkICYmICFub2RlLmlzRGlydHkpIHtcclxuICAgICAgICAgIG5vZGUuaXNEaXJ0eSA9IHRydWVcclxuICAgICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVDaGFuZ2VkLCB0aGlzLmNhbnZhcywgbm9kZSlcclxuICAgICAgICAgIGRlbGV0ZSBub2RlLmlzRGlydHlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNhdmUgdGhlIGRhdGEgdG8gdGhlIGZpbGVcclxuICAgICAgICB0aGlzLmNhbnZhcy5kYXRhID0gdGhpcy5jYW52YXMuZ2V0RGF0YSgpXHJcbiAgICAgICAgdGhpcy5jYW52YXMudmlldy5yZXF1ZXN0U2F2ZSgpXHJcblxyXG4gICAgICAgIC8vIEFkZCB0byB0aGUgdW5kbyBzdGFja1xyXG4gICAgICAgIGlmIChhZGRIaXN0b3J5KSB0aGlzLmNhbnZhcy5wdXNoSGlzdG9yeSh0aGlzLmNhbnZhcy5nZXREYXRhKCkpXHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgZ2V0QkJveDogKG5leHQ6IGFueSkgPT4gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5leHQuY2FsbCh0aGlzLCAuLi5hcmdzKVxyXG4gICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVCQm94UmVxdWVzdGVkLCB0aGlzLmNhbnZhcywgbm9kZSwgcmVzdWx0KVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIFxyXG4gICAgdGhpcy5ydW5BZnRlckluaXRpYWxpemVkKG5vZGUsICgpID0+IHtcclxuICAgICAgdGhpcy50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTm9kZUFkZGVkLCBub2RlLmNhbnZhcywgbm9kZSlcclxuICAgICAgdGhpcy50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuTm9kZUNoYW5nZWQsIG5vZGUuY2FudmFzLCBub2RlKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcGF0Y2hFZGdlKGVkZ2U6IENhbnZhc0VkZ2UpIHtcclxuICAgIGNvbnN0IHRoYXQgPSB0aGlzXHJcblxyXG4gICAgcGF0Y2hPYmplY3RJbnN0YW5jZSh0aGlzLnBsdWdpbiwgZWRnZSwge1xyXG4gICAgICBzZXREYXRhOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoZGF0YTogQ2FudmFzRWRnZURhdGEsIGFkZEhpc3Rvcnk/OiBib29sZWFuKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIGRhdGEpXHJcblxyXG4gICAgICAgIGlmIChlZGdlLmluaXRpYWxpemVkICYmICFlZGdlLmlzRGlydHkpIHtcclxuICAgICAgICAgIGVkZ2UuaXNEaXJ0eSA9IHRydWVcclxuICAgICAgICAgIHRoYXQudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LkVkZ2VDaGFuZ2VkLCB0aGlzLmNhbnZhcywgZWRnZSlcclxuICAgICAgICAgIGRlbGV0ZSBlZGdlLmlzRGlydHlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNhdmUgdGhlIGRhdGEgdG8gdGhlIGZpbGVcclxuICAgICAgICB0aGlzLmNhbnZhcy5kYXRhID0gdGhpcy5jYW52YXMuZ2V0RGF0YSgpXHJcbiAgICAgICAgdGhpcy5jYW52YXMudmlldy5yZXF1ZXN0U2F2ZSgpXHJcblxyXG4gICAgICAgIC8vIEFkZCB0byB0aGUgdW5kbyBzdGFja1xyXG4gICAgICAgIGlmIChhZGRIaXN0b3J5KSB0aGlzLmNhbnZhcy5wdXNoSGlzdG9yeSh0aGlzLmNhbnZhcy5nZXREYXRhKCkpXHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgcmVuZGVyOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuRWRnZUNoYW5nZWQsIHRoaXMuY2FudmFzLCBlZGdlKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgZ2V0Q2VudGVyOiAobmV4dDogYW55KSA9PiBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dC5jYWxsKHRoaXMsIC4uLmFyZ3MpXHJcbiAgICAgICAgdGhhdC50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuRWRnZUNlbnRlclJlcXVlc3RlZCwgdGhpcy5jYW52YXMsIGVkZ2UsIHJlc3VsdClcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICBcclxuICAgIHRoaXMucnVuQWZ0ZXJJbml0aWFsaXplZChlZGdlLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50LkVkZ2VBZGRlZCwgZWRnZS5jYW52YXMsIGVkZ2UpXHJcbiAgICB9KVxyXG4gIH1cclxuICBcclxuICBwcml2YXRlIHJ1bkFmdGVySW5pdGlhbGl6ZWQoY2FudmFzRWxlbWVudDogQ2FudmFzRWxlbWVudCwgb25SZWFkeTogKCkgPT4gdm9pZCkge1xyXG4gICAgaWYgKGNhbnZhc0VsZW1lbnQuaW5pdGlhbGl6ZWQpIHtcclxuICAgICAgb25SZWFkeSgpXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRoYXQgPSB0aGlzXHJcblxyXG4gICAgLy8gUGF0Y2ggQ2FudmFzRWxlbWVudCBvYmplY3RcclxuICAgIGNvbnN0IHVuaW5zdGFsbCA9IGFyb3VuZChjYW52YXNFbGVtZW50LCB7XHJcbiAgICAgIGluaXRpYWxpemU6IChuZXh0OiBhbnkpID0+IGZ1bmN0aW9uICguLi5hcmdzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncylcclxuXHJcbiAgICAgICAgb25SZWFkeSgpXHJcbiAgICAgICAgdW5pbnN0YWxsKCkgLy8gVW5pbnN0YWxsIHRoZSBwYXRjaFxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgdGhhdC5wbHVnaW4ucmVnaXN0ZXIodW5pbnN0YWxsKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBlbWl0RXZlbnRzRm9yVW5rbm93bkRhdGFDaGFuZ2VzKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICAvLyBJZiBub2RlIGRhdGEgY2hhbmdlZFxyXG4gICAgY2FudmFzLm5vZGVzLmZvckVhY2goKG5vZGU6IENhbnZhc05vZGUpID0+IHRoaXMucnVuQWZ0ZXJJbml0aWFsaXplZChub2RlLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMudHJpZ2dlcldvcmtzcGFjZUV2ZW50KENhbnZhc0V2ZW50Lk5vZGVDaGFuZ2VkLCBub2RlLmNhbnZhcywgbm9kZSlcclxuICAgIH0pKVxyXG5cclxuICAgIC8vIElmIGVkZ2UgZGF0YSBjaGFuZ2VkXHJcbiAgICBjYW52YXMuZWRnZXMuZm9yRWFjaCgoZWRnZTogQ2FudmFzRWRnZSkgPT4gdGhpcy5ydW5BZnRlckluaXRpYWxpemVkKGVkZ2UsICgpID0+IHtcclxuICAgICAgdGhpcy50cmlnZ2VyV29ya3NwYWNlRXZlbnQoQ2FudmFzRXZlbnQuRWRnZUNoYW5nZWQsIGVkZ2UuY2FudmFzLCBlZGdlKVxyXG4gICAgfSkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHRyaWdnZXJXb3Jrc3BhY2VFdmVudChldmVudDogc3RyaW5nLCAuLi5hcmdzOiBhbnkpIHtcclxuICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UudHJpZ2dlcihldmVudCwgLi4uYXJncylcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgYWRkSWNvbiB9IGZyb20gXCJvYnNpZGlhblwiXHJcblxyXG5jb25zdCBDVVNUT01fSUNPTlMgPSB7XHJcbiAgJ3NoYXBlLXBpbGwnOiBgPHJlY3Qgcng9XCIzMS4yNVwiIGhlaWdodD1cIjYyLjVcIiB3aWR0aD1cIjkzLjc1XCIgeT1cIjE4Ljc1XCIgeD1cIjMuMTI1XCIgc3Ryb2tlLXdpZHRoPVwiOC4zMzNcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwidHJhbnNwYXJlbnRcIi8+YCxcclxuICAnc2hhcGUtcGFyYWxsZWxvZ3JhbSc6IGA8cmVjdCB0cmFuc2Zvcm09XCJza2V3WCgtMjApXCIgcng9XCI1XCIgaGVpZ2h0PVwiNTBcIiB3aWR0aD1cIjcwXCIgeT1cIjI1XCIgeD1cIjM1XCIgc3Ryb2tlLXdpZHRoPVwiOC4zMzNcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwidHJhbnNwYXJlbnRcIi8+YCxcclxuICAnc2hhcGUtcHJlZGVmaW5lZC1wcm9jZXNzJzogYFxyXG4gICAgPGcgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJub25lXCIgdHJhbnNmb3JtPVwibWF0cml4KDQuMTY2NjY3LDAsMCw0LjE2NjY2NywwLDApXCI+XHJcbiAgICAgIDxwYXRoIGQ9XCJNIDQuOTk5Njg3IDMgTCAxOS4wMDAzMTIgMyBDIDIwLjEwNDY4OCAzIDIxIDMuODk1MzEyIDIxIDQuOTk5Njg3IEwgMjEgMTkuMDAwMzEyIEMgMjEgMjAuMTA0Njg4IDIwLjEwNDY4OCAyMSAxOS4wMDAzMTIgMjEgTCA0Ljk5OTY4NyAyMSBDIDMuODk1MzEyIDIxIDMgMjAuMTA0Njg4IDMgMTkuMDAwMzEyIEwgMyA0Ljk5OTY4NyBDIDMgMy44OTUzMTIgMy44OTUzMTIgMyA0Ljk5OTY4NyAzIFogTSA0Ljk5OTY4NyAzIFwiLz5cclxuICAgICAgPHBhdGggZD1cIk0gNyAzIEwgNyAyMSBcIi8+XHJcbiAgICAgIDxwYXRoIGQ9XCJNIDE3IDMgTCAxNyAyMSBcIi8+XHJcbiAgICA8L2c+XHJcbiAgYCxcclxuICAnc2hhcGUtZG9jdW1lbnQnOiBgPHBhdGggdHJhbnNmb3JtPVwidHJhbnNsYXRlKDAsIDUpXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCI4LjMzM1wiIGQ9XCJNODMuNzUgMjVDODUuODIgMjUgODcuNSAyNi42OCA4Ny41IDI4Ljc1TDg3LjUgNjQuMzc1UTY4Ljc1IDU0LjI1IDUwIDY0LjM3NSAzMS4yNSA3NC41IDEyLjUgNjQuMzc1TDEyLjUgMzAuNjI1IDEyLjUgMjguNzVDMTIuNSAyNi42OCAxNC4xOCAyNSAxNi4yNSAyNVpcIi8+YCxcclxuICAnc2hhcGUtZGF0YWJhc2UnOiBgXHJcbiAgICA8ZyB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMjAsIDIwKVwiIHN0cm9rZS13aWR0aD1cIjguMzMzXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIj5cclxuICAgICAgPHBhdGggZD1cIk0gMSA1MSBMIDEgMTEgQyAxIDUuNDggMTQuNDMgMSAzMSAxIEMgNDcuNTcgMSA2MSA1LjQ4IDYxIDExIEwgNjEgNTEgQyA2MSA1Ni41MiA0Ny41NyA2MSAzMSA2MSBDIDE0LjQzIDYxIDEgNTYuNTIgMSA1MSBaXCIvPlxyXG4gICAgICA8cGF0aCBkPVwiTSAxIDExIEMgMSAxNi41MiAxNC40MyAyMSAzMSAyMSBDIDQ3LjU3IDIxIDYxIDE2LjUyIDYxIDExXCIvPlxyXG4gICAgPC9nPlxyXG4gIGAsXHJcbiAgXHJcbiAgJ2JvcmRlci1zb2xpZCc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjguMzMzXCIgZD1cIk05MS42NjY3IDQ1LjgzMzN2NC4xNjY3YzAgMi4wODMzLTIuMDgzMyA0LjE2NjctNC4xNjY3IDQuMTY2N0gxMi41Yy0yLjA4MzMgMC00LjE2NjctMi4wODMzLTQuMTY2Ny00LjE2Njd2LTQuMTY2N1wiLz5gLFxyXG4gICdib3JkZXItZGFzaGVkJzogYDxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiOC4zMzNcIiBzdHJva2UtZGFzaGFycmF5PVwiMTMuN1wiIGQ9XCJNOTEuNjY2NyA0NS44MzMzdjQuMTY2N2MwIDIuMDgzMy0yLjA4MzMgNC4xNjY3LTQuMTY2NyA0LjE2NjdIMTIuNWMtMi4wODMzIDAtNC4xNjY3LTIuMDgzMy00LjE2NjctNC4xNjY3di00LjE2NjdcIi8+YCxcclxuICAnYm9yZGVyLWRvdHRlZCc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjguMzMzXCIgc3Ryb2tlLWRhc2hhcnJheT1cIjguN1wiIGQ9XCJNOTEuNjY2NyA0NS44MzMzdjQuMTY2N2MwIDIuMDgzMy0yLjA4MzMgNC4xNjY3LTQuMTY2NyA0LjE2NjdIMTIuNWMtMi4wODMzIDAtNC4xNjY3LTIuMDgzMy00LjE2NjctNC4xNjY3di00LjE2NjdcIi8+YCxcclxuXHJcbiAgJ3BhdGgtc29saWQnOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCI4LjVcIiBkPVwiTTM3LjUgNzkuMTY2N2gzNS40MTY3YTE0LjU4MzMgMTQuNTgzMyA5MCAwMDAtMjkuMTY2N2gtNDUuODMzM2ExNC41ODMzIDE0LjU4MzMgOTAgMDEwLTI5LjE2NjdINjIuNVwiLz5gLFxyXG4gICdwYXRoLWRvdHRlZCc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjguNVwiIHN0cm9rZS1kYXNoYXJyYXk9XCI4LjhcIiBkPVwiTTM3LjUgNzkuMTY2N2gzNS40MTY3YTE0LjU4MzMgMTQuNTgzMyA5MCAwMDAtMjkuMTY2N2gtNDUuODMzM2ExNC41ODMzIDE0LjU4MzMgOTAgMDEwLTI5LjE2NjdINjIuNVwiLz5gLFxyXG4gICdwYXRoLXNob3J0LWRhc2hlZCc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjguNVwiIHN0cm9rZS1kYXNoYXJyYXk9XCIxNVwiIGQ9XCJNMzcuNSA3OS4xNjY3aDM1LjQxNjdhMTQuNTgzMyAxNC41ODMzIDkwIDAwMC0yOS4xNjY3aC00NS44MzMzYTE0LjU4MzMgMTQuNTgzMyA5MCAwMTAtMjkuMTY2N0g2Mi41XCIvPmAsXHJcbiAgJ3BhdGgtbG9uZy1kYXNoZWQnOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCI4LjVcIiBzdHJva2UtZGFzaGFycmF5PVwiMjNcIiBkPVwiTTM3LjUgNzkuMTY2N2gzNS40MTY3YTE0LjU4MzMgMTQuNTgzMyA5MCAwMDAtMjkuMTY2N2gtNDUuODMzM2ExNC41ODMzIDE0LjU4MzMgOTAgMDEwLTI5LjE2NjdINjIuNVwiLz5gLFxyXG5cclxuICAnYXJyb3ctdHJpYW5nbGUnOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIGQ9XCJNIDE1IDEwIEwgODUgNTAgTCAxNSA5MCBaXCIvPmAsXHJcbiAgJ2Fycm93LXRyaWFuZ2xlLW91dGxpbmUnOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiOC41XCIgZmlsbD1cIm5vbmVcIiBkPVwiTSAxNSAxMCBMIDg1IDUwIEwgMTUgOTAgWlwiLz5gLFxyXG4gICdhcnJvdy10aGluLXRyaWFuZ2xlJzogYDxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjguNVwiIGZpbGw9XCJub25lXCIgZD1cIk0gMTUgMTAgTCA4NSA1MCBMIDE1IDkwXCIvPmAsXHJcbiAgJ2Fycm93LWhhbHZlZC10cmlhbmdsZSc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk0gMTUgNTAgTCA4NSA1MCBMIDE1IDkwIFpcIi8+YCxcclxuICAnYXJyb3ctZGlhbW9uZCc6IGA8cGF0aCBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk0gNTAgMCBMIDEwMCA1MCBMIDUwIDEwMCBMIDAgNTAgWlwiLz5gLFxyXG4gICdhcnJvdy1kaWFtb25kLW91dGxpbmUnOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiOC41XCIgZmlsbD1cIm5vbmVcIiBkPVwiTSA1MCAwIEwgMTAwIDUwIEwgNTAgMTAwIEwgMCA1MCBaXCIvPmAsXHJcbiAgJ2Fycm93LWNpcmNsZSc6IGA8Y2lyY2xlIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBjeD1cIjUwXCIgY3k9XCI1MFwiIHI9XCI0NVwiLz5gLFxyXG4gICdhcnJvdy1jaXJjbGUtb3V0bGluZSc6IGA8Y2lyY2xlIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjguNVwiIGZpbGw9XCJub25lXCIgY3g9XCI1MFwiIGN5PVwiNTBcIiByPVwiNDVcIi8+YCxcclxuXHJcbiAgJ3BhdGhmaW5kaW5nLW1ldGhvZC1iZXppZXInOiBgPHBhdGggc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCI4LjVcIiBkPVwiTTM3LjUgNzkuMTY2N2gzNS40MTY3YTE0LjU4MzMgMTQuNTgzMyA5MCAwMDAtMjkuMTY2N2gtNDUuODMzM2ExNC41ODMzIDE0LjU4MzMgOTAgMDEwLTI5LjE2NjdINjIuNVwiLz5gLFxyXG4gICdwYXRoZmluZGluZy1tZXRob2Qtc3F1YXJlJzogYDxwYXRoIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiOC41XCIgZD1cIk03Mi45MTY3IDc5LjE2NjcgNzIuOTE2NyA1MCAyNy4wODMzIDUwIDI3LjA4MzMgMjAuODMzM1wiLz5gLFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJY29uc0hlbHBlciB7XHJcbiAgc3RhdGljIGFkZEljb25zKCkge1xyXG4gICAgZm9yIChjb25zdCBbaWQsIHN2Z10gb2YgT2JqZWN0LmVudHJpZXMoQ1VTVE9NX0lDT05TKSkge1xyXG4gICAgICBhZGRJY29uKGlkLCBzdmcpXHJcbiAgICB9XHJcbiAgfVxyXG59IiwgImltcG9ydCBBZHZhbmNlZENhbnZhc1BsdWdpbiBmcm9tIFwic3JjL21haW5cIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCIuLi9jb3JlL2V2ZW50c1wiXHJcbmltcG9ydCB7IENhbnZhcywgQ2FudmFzTm9kZSB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEZWJ1Z0hlbHBlciB7XHJcbiAgcGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpblxyXG5cclxuICBjb25zdHJ1Y3RvcihwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luKSB7XHJcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuTm9kZUFkZGVkLFxyXG4gICAgICAoX2NhbnZhczogQ2FudmFzLCBfbm9kZTogQ2FudmFzTm9kZSkgPT4gY29uc29sZS5jb3VudCgnXHVEODNEXHVERkUyIE5vZGVBZGRlZCcpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuTm9kZUNoYW5nZWQsXHJcbiAgICAgIChfY2FudmFzOiBDYW52YXMsIF9ub2RlOiBDYW52YXNOb2RlKSA9PiBjb25zb2xlLmNvdW50KCdcdUQ4M0RcdURGRTEgTm9kZUNoYW5nZWQnKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkVkZ2VBZGRlZCxcclxuICAgICAgKF9jYW52YXM6IENhbnZhcywgX2VkZ2U6IENhbnZhc05vZGUpID0+IGNvbnNvbGUuY291bnQoJ1x1RDgzRFx1REZFMiBFZGdlQWRkZWQnKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkVkZ2VDaGFuZ2VkLFxyXG4gICAgICAoX2NhbnZhczogQ2FudmFzLCBfZWRnZTogQ2FudmFzTm9kZSkgPT4gY29uc29sZS5jb3VudCgnXHVEODNEXHVERkUxIEVkZ2VDaGFuZ2VkJylcclxuICAgICkpXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IE5vdGljZSwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiXHJcbmltcG9ydCBBZHZhbmNlZENhbnZhc1BsdWdpbiBmcm9tIFwiLi9tYWluXCJcclxuaW1wb3J0IHsgQlVJTFRJTl9FREdFX1NUWUxFX0FUVFJJQlVURVMsIEJVSUxUSU5fTk9ERV9TVFlMRV9BVFRSSUJVVEVTLCBTdHlsZUF0dHJpYnV0ZSB9IGZyb20gXCIuL2NhbnZhcy1leHRlbnNpb25zL2FkdmFuY2VkLXN0eWxlcy9zdHlsZS1jb25maWdcIlxyXG5cclxuY29uc3QgTk9ERV9UWVBFU19PTl9ET1VCTEVfQ0xJQ0sgPSB7XHJcbiAgJ3RleHQnOiAnVGV4dCcsXHJcbiAgJ2ZpbGUnOiAnRmlsZSdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzIHtcclxuICBub2RlVHlwZU9uRG91YmxlQ2xpY2s6IHN0cmluZ1xyXG4gIGRlZmF1bHRUZXh0Tm9kZVdpZHRoOiBudW1iZXJcclxuICBkZWZhdWx0VGV4dE5vZGVIZWlnaHQ6IG51bWJlclxyXG4gIGRlZmF1bHRGaWxlTm9kZVdpZHRoOiBudW1iZXJcclxuICBkZWZhdWx0RmlsZU5vZGVIZWlnaHQ6IG51bWJlclxyXG5cclxuICBwZXJmb3JtYW5jZU9wdGltaXphdGlvbkVuYWJsZWQ6IGJvb2xlYW5cclxuXHJcbiAgbm9kZVN0eWxpbmdGZWF0dXJlRW5hYmxlZDogYm9vbGVhblxyXG4gIGN1c3RvbU5vZGVTdHlsZUF0dHJpYnV0ZXM6IFN0eWxlQXR0cmlidXRlW11cclxuICBkZWZhdWx0VGV4dE5vZGVTdHlsZUF0dHJpYnV0ZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH1cclxuXHJcbiAgZWRnZXNTdHlsaW5nRmVhdHVyZUVuYWJsZWQ6IGJvb2xlYW5cclxuICBjdXN0b21FZGdlU3R5bGVBdHRyaWJ1dGVzOiBTdHlsZUF0dHJpYnV0ZVtdXHJcbiAgZGVmYXVsdEVkZ2VTdHlsZUF0dHJpYnV0ZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH1cclxuICBlZGdlU3R5bGVEaXJlY3RSb3RhdGVBcnJvdzogYm9vbGVhblxyXG4gIGVkZ2VTdHlsZVBhdGhmaW5kZXJHcmlkUmVzb2x1dGlvbjogbnVtYmVyXHJcbiAgZWRnZVN0eWxlUGF0aGZpbmRlclBhdGhMaXZlVXBkYXRlOiBib29sZWFuXHJcbiAgZWRnZVN0eWxlUGF0aGZpbmRlclBhdGhSb3VuZGVkOiBib29sZWFuXHJcblxyXG4gIGNvbW1hbmRzRmVhdHVyZUVuYWJsZWQ6IGJvb2xlYW5cclxuICB6b29tVG9DbG9uZWROb2RlOiBib29sZWFuXHJcbiAgY2xvbmVOb2RlTWFyZ2luOiBudW1iZXJcclxuICBleHBhbmROb2RlU3RlcFNpemU6IG51bWJlclxyXG5cclxuICBiZXR0ZXJSZWFkb25seUVuYWJsZWQ6IGJvb2xlYW5cclxuICBkaXNhYmxlTm9kZVBvcHVwOiBib29sZWFuXHJcbiAgZGlzYWJsZVpvb206IGJvb2xlYW5cclxuICBkaXNhYmxlUGFuOiBib29sZWFuXHJcblxyXG4gIGNvbGxhcHNpYmxlR3JvdXBzRmVhdHVyZUVuYWJsZWQ6IGJvb2xlYW5cclxuICBjb2xsYXBzZWRHcm91cFByZXZpZXdPbkRyYWc6IGJvb2xlYW5cclxuXHJcbiAgcHJlc2VudGF0aW9uRmVhdHVyZUVuYWJsZWQ6IGJvb2xlYW5cclxuICBzaG93U2V0U3RhcnROb2RlSW5Qb3B1cDogYm9vbGVhblxyXG4gIGRlZmF1bHRTbGlkZVNpemU6IHN0cmluZ1xyXG4gIHdyYXBJblNsaWRlUGFkZGluZzogbnVtYmVyXHJcbiAgdXNlQXJyb3dLZXlzVG9DaGFuZ2VTbGlkZXM6IGJvb2xlYW5cclxuICB1c2VQZ1VwUGdEb3duS2V5c1RvQ2hhbmdlU2xpZGVzOiBib29sZWFuXHJcbiAgem9vbVRvU2xpZGVXaXRob3V0UGFkZGluZzogYm9vbGVhblxyXG4gIHNsaWRlVHJhbnNpdGlvbkFuaW1hdGlvbkR1cmF0aW9uOiBudW1iZXJcclxuICBzbGlkZVRyYW5zaXRpb25BbmltYXRpb25JbnRlbnNpdHk6IG51bWJlclxyXG5cclxuICBjYW52YXNFbmNhcHN1bGF0aW9uRW5hYmxlZDogYm9vbGVhblxyXG5cclxuICBwb3J0YWxzRmVhdHVyZUVuYWJsZWQ6IGJvb2xlYW5cclxuICBtYWludGFpbkNsb3NlZFBvcnRhbFNpemU6IGJvb2xlYW5cclxuICBzaG93RWRnZXNJbnRvRGlzYWJsZWRQb3J0YWxzOiBib29sZWFuXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBQYXJ0aWFsPEFkdmFuY2VkQ2FudmFzUGx1Z2luU2V0dGluZ3M+ID0ge1xyXG4gIG5vZGVUeXBlT25Eb3VibGVDbGljazogT2JqZWN0LmtleXMoTk9ERV9UWVBFU19PTl9ET1VCTEVfQ0xJQ0spLmZpcnN0KCksXHJcbiAgZGVmYXVsdFRleHROb2RlV2lkdGg6IDI2MCxcclxuICBkZWZhdWx0VGV4dE5vZGVIZWlnaHQ6IDYwLFxyXG4gIGRlZmF1bHRGaWxlTm9kZVdpZHRoOiA0MDAsXHJcbiAgZGVmYXVsdEZpbGVOb2RlSGVpZ2h0OiA0MDAsXHJcblxyXG4gIHBlcmZvcm1hbmNlT3B0aW1pemF0aW9uRW5hYmxlZDogZmFsc2UsXHJcblxyXG4gIG5vZGVTdHlsaW5nRmVhdHVyZUVuYWJsZWQ6IHRydWUsXHJcbiAgY3VzdG9tTm9kZVN0eWxlQXR0cmlidXRlczogW10sXHJcbiAgZGVmYXVsdFRleHROb2RlU3R5bGVBdHRyaWJ1dGVzOiB7fSxcclxuXHJcbiAgZWRnZXNTdHlsaW5nRmVhdHVyZUVuYWJsZWQ6IHRydWUsXHJcbiAgY3VzdG9tRWRnZVN0eWxlQXR0cmlidXRlczogW10sXHJcbiAgZGVmYXVsdEVkZ2VTdHlsZUF0dHJpYnV0ZXM6IHt9LFxyXG4gIGVkZ2VTdHlsZURpcmVjdFJvdGF0ZUFycm93OiBmYWxzZSxcclxuICBlZGdlU3R5bGVQYXRoZmluZGVyR3JpZFJlc29sdXRpb246IDEwLFxyXG4gIGVkZ2VTdHlsZVBhdGhmaW5kZXJQYXRoTGl2ZVVwZGF0ZTogdHJ1ZSxcclxuICBlZGdlU3R5bGVQYXRoZmluZGVyUGF0aFJvdW5kZWQ6IHRydWUsXHJcblxyXG4gIGNvbW1hbmRzRmVhdHVyZUVuYWJsZWQ6IHRydWUsXHJcbiAgem9vbVRvQ2xvbmVkTm9kZTogdHJ1ZSxcclxuICBjbG9uZU5vZGVNYXJnaW46IDIwLFxyXG4gIGV4cGFuZE5vZGVTdGVwU2l6ZTogMjAsXHJcblxyXG4gIGJldHRlclJlYWRvbmx5RW5hYmxlZDogdHJ1ZSxcclxuICBkaXNhYmxlTm9kZVBvcHVwOiBmYWxzZSxcclxuICBkaXNhYmxlWm9vbTogZmFsc2UsXHJcbiAgZGlzYWJsZVBhbjogZmFsc2UsXHJcblxyXG4gIGNvbGxhcHNpYmxlR3JvdXBzRmVhdHVyZUVuYWJsZWQ6IHRydWUsXHJcbiAgY29sbGFwc2VkR3JvdXBQcmV2aWV3T25EcmFnOiB0cnVlLFxyXG5cclxuICBwcmVzZW50YXRpb25GZWF0dXJlRW5hYmxlZDogdHJ1ZSxcclxuICBzaG93U2V0U3RhcnROb2RlSW5Qb3B1cDogZmFsc2UsXHJcbiAgZGVmYXVsdFNsaWRlU2l6ZTogJzEyMDB4Njc1JyxcclxuICB3cmFwSW5TbGlkZVBhZGRpbmc6IDIwLFxyXG4gIHVzZUFycm93S2V5c1RvQ2hhbmdlU2xpZGVzOiB0cnVlLFxyXG4gIHVzZVBnVXBQZ0Rvd25LZXlzVG9DaGFuZ2VTbGlkZXM6IHRydWUsXHJcbiAgem9vbVRvU2xpZGVXaXRob3V0UGFkZGluZzogdHJ1ZSxcclxuICBzbGlkZVRyYW5zaXRpb25BbmltYXRpb25EdXJhdGlvbjogMC41LFxyXG4gIHNsaWRlVHJhbnNpdGlvbkFuaW1hdGlvbkludGVuc2l0eTogMS4yNSxcclxuXHJcbiAgY2FudmFzRW5jYXBzdWxhdGlvbkVuYWJsZWQ6IHRydWUsXHJcblxyXG4gIHBvcnRhbHNGZWF0dXJlRW5hYmxlZDogdHJ1ZSxcclxuICBtYWludGFpbkNsb3NlZFBvcnRhbFNpemU6IHRydWUsXHJcbiAgc2hvd0VkZ2VzSW50b0Rpc2FibGVkUG9ydGFsczogdHJ1ZVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXR0aW5nc01hbmFnZXIge1xyXG4gIHN0YXRpYyBTRVRUSU5HU19DSEFOR0VEX0VWRU5UID0gJ2FkdmFuY2VkLWNhbnZhczpzZXR0aW5ncy1jaGFuZ2VkJ1xyXG5cclxuICBwcml2YXRlIHBsdWdpbjogQWR2YW5jZWRDYW52YXNQbHVnaW5cclxuICBwcml2YXRlIHNldHRpbmdzOiBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzXHJcbiAgcHJpdmF0ZSBzZXR0aW5nc1RhYjogQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5nVGFiXHJcblxyXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogQWR2YW5jZWRDYW52YXNQbHVnaW4pIHtcclxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luXHJcbiAgfVxyXG5cclxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5wbHVnaW4ubG9hZERhdGEoKSlcclxuICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UudHJpZ2dlcihTZXR0aW5nc01hbmFnZXIuU0VUVElOR1NfQ0hBTkdFRF9FVkVOVClcclxuICB9XHJcblxyXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpXHJcbiAgfVxyXG5cclxuICBnZXRTZXR0aW5nPFQgZXh0ZW5kcyBrZXlvZiBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzPihrZXk6IFQpOiBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzW1RdIHtcclxuICAgIHJldHVybiB0aGlzLnNldHRpbmdzW2tleV1cclxuICB9XHJcblxyXG4gIGFzeW5jIHNldFNldHRpbmcoZGF0YTogUGFydGlhbDxBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzPikge1xyXG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24odGhpcy5zZXR0aW5ncywgZGF0YSlcclxuICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKClcclxuICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UudHJpZ2dlcihTZXR0aW5nc01hbmFnZXIuU0VUVElOR1NfQ0hBTkdFRF9FVkVOVClcclxuICB9XHJcblxyXG4gIGFkZFNldHRpbmdzVGFiKCkge1xyXG4gICAgdGhpcy5zZXR0aW5nc1RhYiA9IG5ldyBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdUYWIodGhpcy5wbHVnaW4sIHRoaXMpXHJcbiAgICB0aGlzLnBsdWdpbi5hZGRTZXR0aW5nVGFiKHRoaXMuc2V0dGluZ3NUYWIpXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXJcclxuXHJcbiAgY29uc3RydWN0b3IocGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpbiwgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXIpIHtcclxuICAgIHN1cGVyKHBsdWdpbi5hcHAsIHBsdWdpbilcclxuICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyID0gc2V0dGluZ3NNYW5hZ2VyXHJcbiAgfVxyXG5cclxuICBkaXNwbGF5KCk6IHZvaWQge1xyXG4gICAgbGV0IHsgY29udGFpbmVyRWwgfSA9IHRoaXNcclxuICAgIGNvbnRhaW5lckVsLmVtcHR5KClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldEhlYWRpbmcoKVxyXG4gICAgICAuc2V0Q2xhc3MoJ2FjLXNldHRpbmdzLWhlYWRpbmcnKVxyXG4gICAgICAuc2V0TmFtZShcIkdlbmVyYWxcIilcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJOb2RlIHR5cGUgb24gZG91YmxlIGNsaWNrXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhlIHR5cGUgb2Ygbm9kZSB0aGF0IHdpbGwgYmUgY3JlYXRlZCB3aGVuIGRvdWJsZSBjbGlja2luZyBvbiB0aGUgY2FudmFzLlwiKVxyXG4gICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxyXG4gICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAuYWRkT3B0aW9ucyhOT0RFX1RZUEVTX09OX0RPVUJMRV9DTElDSylcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdub2RlVHlwZU9uRG91YmxlQ2xpY2snKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBub2RlVHlwZU9uRG91YmxlQ2xpY2s6IHZhbHVlIH0pKVxyXG4gICAgICAgIClcclxuICAgIFxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiRGVmYXVsdCB0ZXh0IG5vZGUgd2lkdGhcIilcclxuICAgICAgLnNldERlc2MoXCJUaGUgZGVmYXVsdCB3aWR0aCBvZiBhIHRleHQgbm9kZS5cIilcclxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2RlZmF1bHRUZXh0Tm9kZVdpZHRoJykudG9TdHJpbmcoKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBkZWZhdWx0VGV4dE5vZGVXaWR0aDogTWF0aC5tYXgoMSwgcGFyc2VJbnQodmFsdWUpKSB9KSlcclxuICAgICAgKVxyXG4gICAgXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJEZWZhdWx0IHRleHQgbm9kZSBoZWlnaHRcIilcclxuICAgICAgLnNldERlc2MoXCJUaGUgZGVmYXVsdCBoZWlnaHQgb2YgYSB0ZXh0IG5vZGUuXCIpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdkZWZhdWx0VGV4dE5vZGVIZWlnaHQnKS50b1N0cmluZygpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IGRlZmF1bHRUZXh0Tm9kZUhlaWdodDogTWF0aC5tYXgoMSwgcGFyc2VJbnQodmFsdWUpKSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkRlZmF1bHQgZmlsZSBub2RlIHdpZHRoXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhlIGRlZmF1bHQgd2lkdGggb2YgYSBmaWxlIG5vZGUuXCIpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdkZWZhdWx0RmlsZU5vZGVXaWR0aCcpLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgZGVmYXVsdEZpbGVOb2RlV2lkdGg6IE1hdGgubWF4KDEsIHBhcnNlSW50KHZhbHVlKSkgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJEZWZhdWx0IGZpbGUgbm9kZSBoZWlnaHRcIilcclxuICAgICAgLnNldERlc2MoXCJUaGUgZGVmYXVsdCBoZWlnaHQgb2YgYSBmaWxlIG5vZGUuXCIpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdkZWZhdWx0RmlsZU5vZGVIZWlnaHQnKS50b1N0cmluZygpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IGRlZmF1bHRGaWxlTm9kZUhlaWdodDogTWF0aC5tYXgoMSwgcGFyc2VJbnQodmFsdWUpKSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIHRoaXMuY3JlYXRlRmVhdHVyZUhlYWRpbmcoXHJcbiAgICAgIGNvbnRhaW5lckVsLFxyXG4gICAgICBcIlBlcmZvcm1hbmNlIG9wdGltaXphdGlvblwiLFxyXG4gICAgICBcIk9wdGltaXplIHRoZSBwZXJmb3JtYW5jZSBvZiB0aGUgY2FudmFzIChTaWRlIGVmZmVjdCBpcyBzb21lIGFtb3VudCBvZiBibHVycmluZXNzKS5cIixcclxuICAgICAgJ3BlcmZvcm1hbmNlT3B0aW1pemF0aW9uRW5hYmxlZCdcclxuICAgIClcclxuXHJcbiAgICB0aGlzLmNyZWF0ZUZlYXR1cmVIZWFkaW5nKFxyXG4gICAgICBjb250YWluZXJFbCxcclxuICAgICAgXCJOb2RlIHN0eWxpbmdcIixcclxuICAgICAgXCJTdHlsZSB5b3VyIG5vZGVzIHdpdGggZGlmZmVyZW50IHNoYXBlcyBhbmQgYm9yZGVycy5cIixcclxuICAgICAgJ25vZGVTdHlsaW5nRmVhdHVyZUVuYWJsZWQnXHJcbiAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiQ3VzdG9tIG5vZGUgc3R5bGUgc2V0dGluZ3NcIilcclxuICAgICAgLnNldERlc2MoXCJBZGQgY3VzdG9tIHN0eWxlIHNldHRpbmdzIGZvciBub2Rlcy4gKEdvIHRvIEdpdEh1YiBmb3IgbW9yZSBpbmZvcm1hdGlvbilcIilcclxuICAgICAgLmFkZEJ1dHRvbigoYnV0dG9uKSA9PlxyXG4gICAgICAgIGJ1dHRvblxyXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJPcGVuIFR1dG9yaWFsXCIpXHJcbiAgICAgICAgICAub25DbGljaygoKSA9PiB3aW5kb3cub3BlbihcImh0dHBzOi8vZ2l0aHViLmNvbS9EZXZlbG9wZXItTWlrZS9vYnNpZGlhbi1hZHZhbmNlZC1jYW52YXMvYmxvYi9tYWluL1JFQURNRS5tZCNjdXN0b20tc3R5bGVzXCIpKVxyXG4gICAgICApXHJcblxyXG4gICAgY29uc3QgYWxsTm9kZVN0eWxlQXR0cmlidXRlcyA9IFsgLi4uQlVJTFRJTl9OT0RFX1NUWUxFX0FUVFJJQlVURVMsIC4uLnRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2N1c3RvbU5vZGVTdHlsZUF0dHJpYnV0ZXMnKSBdXHJcbiAgICAgIC5maWx0ZXIoKHNldHRpbmcpID0+IHNldHRpbmcubm9kZVR5cGVzID09PSB1bmRlZmluZWQgfHwgc2V0dGluZy5ub2RlVHlwZXM/LmluY2x1ZGVzKCd0ZXh0JykpXHJcbiAgICB0aGlzLmNyZWF0ZURlZmF1bHRTdHlsZXNTZWN0aW9uKGNvbnRhaW5lckVsLCAnRGVmYXVsdCB0ZXh0IG5vZGUgc3R5bGUgYXR0cmlidXRlcycsICdkZWZhdWx0VGV4dE5vZGVTdHlsZUF0dHJpYnV0ZXMnLCBhbGxOb2RlU3R5bGVBdHRyaWJ1dGVzKVxyXG5cclxuICAgIHRoaXMuY3JlYXRlRmVhdHVyZUhlYWRpbmcoXHJcbiAgICAgIGNvbnRhaW5lckVsLFxyXG4gICAgICBcIkVkZ2VzIHN0eWxpbmdcIixcclxuICAgICAgXCJTdHlsZSB5b3VyIGVkZ2VzIHdpdGggZGlmZmVyZW50IHBhdGggc3R5bGVzLlwiLFxyXG4gICAgICAnZWRnZXNTdHlsaW5nRmVhdHVyZUVuYWJsZWQnXHJcbiAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiQ3VzdG9tIGVkZ2Ugc3R5bGUgc2V0dGluZ3NcIilcclxuICAgICAgLnNldERlc2MoXCJBZGQgY3VzdG9tIHN0eWxlIHNldHRpbmdzIGZvciBlZGdlcy4gKEdvIHRvIEdpdEh1YiBmb3IgbW9yZSBpbmZvcm1hdGlvbilcIilcclxuICAgICAgLmFkZEJ1dHRvbigoYnV0dG9uKSA9PlxyXG4gICAgICAgIGJ1dHRvblxyXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJPcGVuIFR1dG9yaWFsXCIpXHJcbiAgICAgICAgICAub25DbGljaygoKSA9PiB3aW5kb3cub3BlbihcImh0dHBzOi8vZ2l0aHViLmNvbS9EZXZlbG9wZXItTWlrZS9vYnNpZGlhbi1hZHZhbmNlZC1jYW52YXMvYmxvYi9tYWluL1JFQURNRS5tZCNjdXN0b20tc3R5bGVzXCIpKVxyXG4gICAgICApXHJcblxyXG4gICAgdGhpcy5jcmVhdGVEZWZhdWx0U3R5bGVzU2VjdGlvbihjb250YWluZXJFbCwgJ0RlZmF1bHQgZWRnZSBzdHlsZSBhdHRyaWJ1dGVzJywgJ2RlZmF1bHRFZGdlU3R5bGVBdHRyaWJ1dGVzJywgWyAuLi5CVUlMVElOX0VER0VfU1RZTEVfQVRUUklCVVRFUywgLi4udGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnY3VzdG9tRWRnZVN0eWxlQXR0cmlidXRlcycpIF0pXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiUm90YXRlIGFycm93IGlmIHBhdGhmaW5kaW5nIG1ldGhvZCBpcyBcXFwiRGlyZWN0XFxcIlwiKVxyXG4gICAgICAuc2V0RGVzYyhcIldoZW4gZW5hYmxlZCwgdGhlIGFycm93IHdpbGwgYmUgcm90YXRlZCB0byB0aGUgZGlyZWN0aW9uIG9mIHRoZSBlZGdlIGlmIHRoZSBwYXRoZmluZGluZyBtZXRob2QgaXMgc2V0IHRvIFxcXCJEaXJlY3RcXFwiLlwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnZWRnZVN0eWxlRGlyZWN0Um90YXRlQXJyb3cnKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBlZGdlU3R5bGVEaXJlY3RSb3RhdGVBcnJvdzogdmFsdWUgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJBKiBncmlkIHJlc29sdXRpb25cIilcclxuICAgICAgLnNldERlc2MoXCJUaGUgcmVzb2x1dGlvbiBvZiB0aGUgZ3JpZCB3aGVuIHVzaW5nIHRoZSBBKiBwYXRoIHN0eWxlLiBUaGUgbG93ZXIgdGhlIHZhbHVlLCB0aGUgbW9yZSBwcmVjaXNlIHRoZSBwYXRoIHdpbGwgYmUuIEJ1dCBpdCB3aWxsIGFsc28gdGFrZSBsb25nZXIgdG8gY2FsY3VsYXRlLlwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnZWRnZVN0eWxlUGF0aGZpbmRlckdyaWRSZXNvbHV0aW9uJykudG9TdHJpbmcoKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBlZGdlU3R5bGVQYXRoZmluZGVyR3JpZFJlc29sdXRpb246IE1hdGgubWF4KDUsIHBhcnNlSW50KHZhbHVlKSkgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJMaXZlIHVwZGF0ZSBBKiBwYXRoXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiV2hlbiBlbmFibGVkLCB0aGUgQSogcGF0aCBzdHlsZSB3aWxsIGJlIHVwZGF0ZWQgbGl2ZSB3aGlsZSBkcmFnZ2luZyB0aGUgZWRnZS5cIilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2VkZ2VTdHlsZVBhdGhmaW5kZXJQYXRoTGl2ZVVwZGF0ZScpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IGVkZ2VTdHlsZVBhdGhmaW5kZXJQYXRoTGl2ZVVwZGF0ZTogdmFsdWUgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJBKiByb3VuZGVkIHBhdGhcIilcclxuICAgICAgLnNldERlc2MoXCJXaGVuIGVuYWJsZWQsIHRoZSBBKiBwYXRoIHN0eWxlIHdpbGwgYmUgcm91bmRlZC5cIilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2VkZ2VTdHlsZVBhdGhmaW5kZXJQYXRoUm91bmRlZCcpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IGVkZ2VTdHlsZVBhdGhmaW5kZXJQYXRoUm91bmRlZDogdmFsdWUgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICB0aGlzLmNyZWF0ZUZlYXR1cmVIZWFkaW5nKFxyXG4gICAgICBjb250YWluZXJFbCxcclxuICAgICAgXCJFeHRlbmRlZCBjb21tYW5kc1wiLFxyXG4gICAgICBcIkFkZCBtb3JlIGNvbW1hbmRzIHRvIHRoZSBjYW52YXMuXCIsXHJcbiAgICAgICdjb21tYW5kc0ZlYXR1cmVFbmFibGVkJ1xyXG4gICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIlpvb20gdG8gY2xvbmVkIG5vZGVcIilcclxuICAgICAgLnNldERlc2MoXCJXaGVuIGVuYWJsZWQsIHRoZSBjYW52YXMgd2lsbCB6b29tIHRvIHRoZSBjbG9uZWQgbm9kZS5cIilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ3pvb21Ub0Nsb25lZE5vZGUnKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyB6b29tVG9DbG9uZWROb2RlOiB2YWx1ZSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkNsb25lIG5vZGUgbWFyZ2luXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhlIG1hcmdpbiBiZXR3ZWVuIHRoZSBjbG9uZWQgbm9kZSBhbmQgdGhlIHNvdXJjZSBub2RlLlwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnY2xvbmVOb2RlTWFyZ2luJykudG9TdHJpbmcoKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBjbG9uZU5vZGVNYXJnaW46IHBhcnNlSW50KHZhbHVlKSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkV4cGFuZCBub2RlIHN0ZXAgc2l6ZVwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlRoZSBzdGVwIHNpemUgZm9yIGV4cGFuZGluZyB0aGUgbm9kZS5cIilcclxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2V4cGFuZE5vZGVTdGVwU2l6ZScpLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgZXhwYW5kTm9kZVN0ZXBTaXplOiBwYXJzZUludCh2YWx1ZSkgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICB0aGlzLmNyZWF0ZUZlYXR1cmVIZWFkaW5nKFxyXG4gICAgICBjb250YWluZXJFbCxcclxuICAgICAgXCJCZXR0ZXIgcmVhZG9ubHlcIixcclxuICAgICAgXCJJbXByb3ZlIHRoZSByZWFkb25seSBtb2RlLlwiLFxyXG4gICAgICAnYmV0dGVyUmVhZG9ubHlFbmFibGVkJ1xyXG4gICAgKVxyXG5cclxuICAgIHRoaXMuY3JlYXRlRmVhdHVyZUhlYWRpbmcoXHJcbiAgICAgIGNvbnRhaW5lckVsLFxyXG4gICAgICBcIkNvbGxhcHNpYmxlIGdyb3Vwc1wiLFxyXG4gICAgICBcIkdyb3VwIG5vZGVzIGNhbiBiZSBjb2xsYXBzZWQgYW5kIGV4cGFuZGVkIHRvIGtlZXAgdGhlIGNhbnZhcyBvcmdhbml6ZWQuXCIsXHJcbiAgICAgICdjb2xsYXBzaWJsZUdyb3Vwc0ZlYXR1cmVFbmFibGVkJ1xyXG4gICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkNvbGxhcHNlZCBncm91cCBwcmV2aWV3IG9uIGRyYWdcIilcclxuICAgICAgLnNldERlc2MoXCJXaGVuIGVuYWJsZWQsIGEgZ3JvdXAgdGhhdCBpcyBjb2xsYXBzZWQgc2hvdyBpdHMgYm9yZGVyIHdoaWxlIGRyYWdnaW5nIGEgbm9kZS5cIilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ2NvbGxhcHNlZEdyb3VwUHJldmlld09uRHJhZycpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IGNvbGxhcHNlZEdyb3VwUHJldmlld09uRHJhZzogdmFsdWUgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICB0aGlzLmNyZWF0ZUZlYXR1cmVIZWFkaW5nKFxyXG4gICAgICBjb250YWluZXJFbCxcclxuICAgICAgXCJQcmVzZW50YXRpb25zXCIsXHJcbiAgICAgIFwiQ3JlYXRlIGEgcHJlc2VudGF0aW9uIGZyb20geW91ciBjYW52YXMuXCIsXHJcbiAgICAgICdwcmVzZW50YXRpb25GZWF0dXJlRW5hYmxlZCdcclxuICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgIC5zZXROYW1lKFwiU2hvdyBcXFwiU2V0IFN0YXJ0IE5vZGVcXFwiIGluIG5vZGUgcG9wdXBcIilcclxuICAgIC5zZXREZXNjKFwiSWYgdHVybmVkIG9mZiwgeW91IGNhbiBzdGlsbCBzZXQgdGhlIHN0YXJ0IG5vZGUgdXNpbmcgdGhlIGNvcnJlc3BvbmRpbmcgY29tbWFuZC5cIilcclxuICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgdG9nZ2xlXHJcbiAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ3Nob3dTZXRTdGFydE5vZGVJblBvcHVwJykpXHJcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IHNob3dTZXRTdGFydE5vZGVJblBvcHVwOiB2YWx1ZSB9KSlcclxuICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJEZWZhdWx0IHNsaWRlIHJhdGlvXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhlIGRlZmF1bHQgcmF0aW8gb2YgdGhlIHNsaWRlLiBGb3IgZXhhbXBsZSwgMTY6OSBpcyAxMjAweDY3NSBhbmQgMzoyIGlzIDEzNTB4OTAwLlwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnZGVmYXVsdFNsaWRlU2l6ZScpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IGRlZmF1bHRTbGlkZVNpemU6IHZhbHVlLnJlcGxhY2UoJyAnLCAnJykgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJXcmFwIGluIHNsaWRlIHBhZGRpbmdcIilcclxuICAgICAgLnNldERlc2MoXCJUaGUgcGFkZGluZyBvZiB0aGUgc2xpZGUgd2hlbiB3cmFwcGluZyB0aGUgY2FudmFzIGluIGEgc2xpZGUuXCIpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCd3cmFwSW5TbGlkZVBhZGRpbmcnKS50b1N0cmluZygpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IHdyYXBJblNsaWRlUGFkZGluZzogcGFyc2VJbnQodmFsdWUpIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiVXNlIGFycm93IGtleXMgdG8gY2hhbmdlIHNsaWRlc1wiKVxyXG4gICAgICAuc2V0RGVzYyhcIldoZW4gZW5hYmxlZCwgeW91IGNhbiB1c2UgdGhlIGFycm93IGtleXMgdG8gY2hhbmdlIHNsaWRlcyBpbiBwcmVzZW50YXRpb24gbW9kZS5cIilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ3VzZUFycm93S2V5c1RvQ2hhbmdlU2xpZGVzJykpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgdXNlQXJyb3dLZXlzVG9DaGFuZ2VTbGlkZXM6IHZhbHVlIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiVXNlIFBnVXAvUGdEb3duIGtleXMgdG8gY2hhbmdlIHNsaWRlc1wiKVxyXG4gICAgICAuc2V0RGVzYyhcIldoZW4gZW5hYmxlZCwgeW91IGNhbiB1c2UgdGhlIFBnVXAvUGdEb3duIGtleXMgdG8gY2hhbmdlIHNsaWRlcyBpbiBwcmVzZW50YXRpb24gbW9kZSAoTWFrZXMgdGhlIHByZXNlbnRhdGlvbiBtb2RlIGNvbXBhdGlibGUgd2l0aCBtb3N0IHByZXNlbnRhdGlvbiByZW1vdGVzKS5cIilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ3VzZVBnVXBQZ0Rvd25LZXlzVG9DaGFuZ2VTbGlkZXMnKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyB1c2VQZ1VwUGdEb3duS2V5c1RvQ2hhbmdlU2xpZGVzOiB2YWx1ZSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIlpvb20gdG8gc2xpZGUgd2l0aG91dCBwYWRkaW5nXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiV2hlbiBlbmFibGVkLCB0aGUgY2FudmFzIHdpbGwgem9vbSB0byB0aGUgc2xpZGUgd2l0aG91dCBwYWRkaW5nLlwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnem9vbVRvU2xpZGVXaXRob3V0UGFkZGluZycpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IHpvb21Ub1NsaWRlV2l0aG91dFBhZGRpbmc6IHZhbHVlIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiU2xpZGUgdHJhbnNpdGlvbiBhbmltYXRpb24gZHVyYXRpb25cIilcclxuICAgICAgLnNldERlc2MoXCJUaGUgZHVyYXRpb24gb2YgdGhlIHNsaWRlIHRyYW5zaXRpb24gYW5pbWF0aW9uIGluIHNlY29uZHMuIFNldCB0byAwIHRvIGRpc2FibGUgdGhlIGFuaW1hdGlvbi5cIilcclxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ3NsaWRlVHJhbnNpdGlvbkFuaW1hdGlvbkR1cmF0aW9uJykudG9TdHJpbmcoKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBzbGlkZVRyYW5zaXRpb25BbmltYXRpb25EdXJhdGlvbjogcGFyc2VGbG9hdCh2YWx1ZSkgfSkpXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJTbGlkZSB0cmFuc2l0aW9uIGFuaW1hdGlvbiBpbnRlbnNpdHlcIilcclxuICAgICAgLnNldERlc2MoXCJUaGUgaW50ZW5zaXR5IG9mIHRoZSBzbGlkZSB0cmFuc2l0aW9uIGFuaW1hdGlvbi4gVGhlIGhpZ2hlciB0aGUgdmFsdWUsIHRoZSBtb3JlIHRoZSBjYW52YXMgd2lsbCB6b29tIG91dCBiZWZvcmUgem9vbWluZyBpbiBvbiB0aGUgbmV4dCBzbGlkZS5cIilcclxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoJ3NsaWRlVHJhbnNpdGlvbkFuaW1hdGlvbkludGVuc2l0eScpLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgc2xpZGVUcmFuc2l0aW9uQW5pbWF0aW9uSW50ZW5zaXR5OiBwYXJzZUZsb2F0KHZhbHVlKSB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIHRoaXMuY3JlYXRlRmVhdHVyZUhlYWRpbmcoXHJcbiAgICAgIGNvbnRhaW5lckVsLFxyXG4gICAgICBcIkNhbnZhcyBlbmNhcHN1bGF0aW9uXCIsXHJcbiAgICAgIFwiRW5jYXBzdWxhdGUgYSBzZWxlY3Rpb24gb2Ygbm9kZXMgYW5kIGVkZ2VzIGludG8gYSBuZXcgY2FudmFzLlwiLFxyXG4gICAgICAnY2FudmFzRW5jYXBzdWxhdGlvbkVuYWJsZWQnXHJcbiAgICApXHJcblxyXG4gICAgdGhpcy5jcmVhdGVGZWF0dXJlSGVhZGluZyhcclxuICAgICAgY29udGFpbmVyRWwsXHJcbiAgICAgIFwiUG9ydGFsc1wiLFxyXG4gICAgICBcIkNyZWF0ZSBwb3J0YWxzIHRvIG90aGVyIGNhbnZhc2VzLlwiLFxyXG4gICAgICAncG9ydGFsc0ZlYXR1cmVFbmFibGVkJ1xyXG4gICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIk1haW50YWluIGNsb3NlZCBwb3J0YWwgc2l6ZVwiKVxyXG4gICAgICAuc2V0RGVzYyhcIldoZW4gZW5hYmxlZCwgY2xvc2luZyBhIHBvcnRhbCB3aWxsIGNoYW5nZSB0aGUgc2l6ZSBvZiB0aGUgcG9ydGFsIHRvIHRoZSBvcmlnaW5hbCwgY2xvc2VkIHNpemUuXCIpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICB0b2dnbGVcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKCdtYWludGFpbkNsb3NlZFBvcnRhbFNpemUnKSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldFNldHRpbmcoeyBtYWludGFpbkNsb3NlZFBvcnRhbFNpemU6IHZhbHVlIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiU2hvdyBlZGdlcyBpbnRvIGRpc2FibGVkIHBvcnRhbHNcIilcclxuICAgICAgLnNldERlc2MoXCJXaGVuIGVuYWJsZWQsIGVkZ2VzIGludG8gZGlzYWJsZWQgcG9ydGFscyB3aWxsIGJlIHNob3duIGJ5IGFuIGVkZ2UgdG8gdGhlIHBvcnRhbCBub2RlLlwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZygnc2hvd0VkZ2VzSW50b0Rpc2FibGVkUG9ydGFscycpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4gYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0U2V0dGluZyh7IHNob3dFZGdlc0ludG9EaXNhYmxlZFBvcnRhbHM6IHZhbHVlIH0pKVxyXG4gICAgICApXHJcblxyXG4gICAgY29uc3Qga29maUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxyXG4gICAga29maUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdrb2ZpLWJ1dHRvbicpXHJcbiAgICBrb2ZpQnV0dG9uLmhyZWYgPSAnaHR0cHM6Ly9rby1maS5jb20vWDhYMjdJQTA4J1xyXG4gICAga29maUJ1dHRvbi50YXJnZXQgPSAnX2JsYW5rJ1xyXG5cclxuICAgIGNvbnN0IGtvZmlJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpXHJcbiAgICBrb2ZpSW1hZ2Uuc3JjID0gJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFCTmNBQUFHVkNBTUFBQURxbmVmV0FBQUEzbEJNVkVVQUFBRC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vOWZYLzdPenY3Ky8vNHVILzJkbi8yZGpmMzkvL3pjMy95Y2ovdzhQL3dNRFB6OC8vdWJqL3Q3Zi9yNi8vcXFxL3Y3Ly9vNlAvblp6L201di9scGIva1pDdnI2Ly9pb24vaDRmL2hvYi9ob1gvaElQL2dILy9mWHovZkh2L2VYaWZuNS8vZFhUL2NYSC9ibTcvYm0zL2Eydi9hbW4vYVdqL2FHZi9abVgvWkdUL1kyTC9ZV0gvWUdDUGo0Ly9YMTkvZjM5dmIyOWZYMTlQVDA4L1B6OHZMeThmSHg4UER3OEFBQUJIcWxiS0FBQUFFSFJTVGxNQUVDQXdRRkJnY0lDUW9MREEwT0R3Vk9Db3lBQUFMdHBKUkVGVWVOcnMzVnR2bThvYXhuR3dNY2FZdzZ1aXlLcEVwSTRpMVZJdXRrVFVpMHBSWkdNTVpyNy9GOXJaSzkwclRuTXd6QUZtOFBPN1g2bFc3Znc3d3h4d0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUF3Qnl1NS9rQktMRHdQRy91QU1DWVpvdGdIUk1vbGtiUkt2QzltUU1BdzVvdDF3bUJWa2tVTEQzWEFZQWhMRlpvbWdEaHVpMHdkZ1BRYTc1S0NRYVdySmVlQXdCYXVENGVxSTBtQ3RBMkFPVm1BWVpxSTFzdk1TY0ZVR2dXRWhnZ1dXSFlCcUNHdXlJd1JSb3VIQUNRaFJsb1owZ2JnQlU4N09zd1VMckM2UVFBVEVFbkoxbGkzeTRBQm11VEUySVZBYUEzRE5aTWwvZ1l0QUgwNFdJZnJnWFNGWGExQVhRMnh6S29KVUtVRGFBYm44QWFFUjYwQVhRUUVOZ0VaUU80Q09lbXJJT3lBU0JyMHhQaE9Sc0Fzalk1V0VFQVFOWW1KdzJ3bncwQVdadWF4SGNBNEc5TEFxdEZPQklQZ0gxcms0UEpLQUJPR1V4T2dqMGZBSzljWkcwYTFoaXlBZnhmUkRBTktlN1VCY0RwcWNrSk1XUURlRFlubUJBOFpRTndIQmUzNDA3TUNrTTJ1SHE0SG5keUV1eGxneXZuRVV4UDRBQmNNMXo3UFVrUjVxSnd4WEIrYXFKU0xCL0ExY0tPM09sYU9nRFhDWXNHRTRhdGJIQ2RaZ1FURnVQQ1NiaEd1SFJ0MmxKcytJRHJnK0hhNU9HK1NWREs5YndnV0VYUDZFd2FSZXNnOER6bklnelhBRHZad0JpdXQxeEZDVjJRUk1GaTVvekxKWmkrMEFHUTRpNkNLS1h1a3REL3NtMm0zdVBCeXFxdVd3N0M2aGRsV1c1WlRyMWdXUlFHTlBQRGhBUWtxN2t6a29RRVpNV1JnMXB0ZlN5M09la1NJMndnWkxGSzZJVkZhZk9wdjgwQnd6UnRtbXJINkVzSUd3ekY5Y09VWkNWTDF4bmFtdnJLU2xSTnQrYXd6ZWdUQ0JzTVpIRWhha0p2N1o1NXl5Q01vcGorRmIrc284NUgzZVRCVGh3R2FodDlER0VEL1dhcmhCU0tQTWVaKzJGRVgwaldnZWVPYytLOTVEQ1k5bGhrOUI3Q0Jyb3QxcVJhbkZJWDhjb2Ivb0tpaXNPd1BrZ2J3Z1o2K1FtTktRMFhnMDVEczRiRDhJNEZuYnZHc0hsK0VFWlJTaStpYUIwc1BVdi9WNHpuQmdtTkxsM05ocHVHMWh4RzBWWTV5Wk1QbStjdGduOTUzc3dad0h3WnhwODlqbG5pNkt0eXk1VE1FSGxEcklaaUVqcXVwaUFsSXNHaUxjTW9wWGZpZGJCd3RhN0lKWmVtTEhoWjZvUm1vRzhsdmlPRyt0aHhHRk5iYmtpQnNIL1RndWpTaVJsM3hHMEdhWWhiZ1JYeElqSkw1R2wvWFV2T1lXelZodVNGT3VJU0xXZktuL0tZdmZOemV0eVF6TE4yTlo4TnhackIxK3dwbSs5ME5ROVQ2bXp0TzhyTVF1b25EVkEyU1Fzelh3ZVFMcDIrSXVvSUc5ZTZzS1pzQzZjVFA1S0lpM3pWVUxZaHVXc3lWZVE2L2FUVVdZYkRVeDFZVXJaMHJ1c0pjaHJPSEZudWlzU2t1RDl6YW9NMW9kZXF6YWtqRE5jTVUyWWtKWEgxcllzRjduajdEQ0xzKzVqT2t6WGgxNm90cUJzTTE0elRGaVFsMHJndWxpNGRjZk9ZenVCbTRFSE16WDh2ZXFoaDJRQjdQQXhVNXlSamRXRWlLQ1dlTzRJQ2toWGg5VnVUbW9NS3JJdXVxVE5jNHRHUCtaTlJYK3ZYZk9XSW1NVWtMOFZHM1g0Q3NrTHNLbDRPeGQ0MVE1MFlpVXZuQW9NMW5VTzI4NkJpTHZvSEhxMEpoSTA2TzNBdzBTR1QrWm9JUEdyUnVUajVXVkR4bGhxTlhQTWZyZjByVXRzMTdNazFsOHlRTGRUOHFDV1UyejkxamRlV25FSFczZ3NWYi9QSU9KanFRQXEzNXk1SnBjZ1Yvd1ZEMklZd3QySEY0RXlnOW5RbzQ1K3BTNUJSMWRMdktteHlFcFRPTkw4aU8zYUZmOEVRTm1UdEF3dWxYU3Y1SndvQ0JUTEd5b053MzlvZENZcjBabzBvblkvekM0YXdUVE5ybE02RzZGcE5vRkRHeXVPSkN6aG1KQ1owWHJrUnFaZk94L2tGUTlnbW1UV2lXT1Z4ZzVwL2pCR290dGtlVHNQTlJlT1o4NGNYa3c3cGZMUmZzTFVEWDNCdHpCcFJvR28vM3VkZE94Rm9zU21Pdko5MlM0TENoZXM0TXo4aVRXSjN0SEhEeW9HSnJJU2VtU25zR3FhaGc5dFdMZTlqUjRhSzNkR21RN2pmWTNwWm93aGRzMXkvVVZ0RmhscVBsVFZLY2IzSFo2dzVaZkNlajY3WmJyTTc4Yzdxak13VWpQYndPc0hhZ2RWblFqK1VvR3NUc0sxNVY0MnBZZlBHeVJwT1ZIMW1RVFlMMExVcDJGUzJoeTExUjdzaEI1ZDdUR1dIeDZ2VVJkY21ZVk5aSHJiSStaQlAycVdZaVU1b3plQ1BKYm8yRVp2SzdyQXR4OGthZHJGTmJNM2dSWUt1VGNibWFIUFlVbGN3YS9MdzB1UkpQVno3aDQrdVRRZHJMQTdiZXF5c1VlTEFCTTRadkJHaGExT3lhKzBObXllWU5YbExCODZZKzU3UUhtYm8ycFJrUjM3R3F0c0k0bkd5aHFVRHJiUFFEZnVmYlZteVp4a05ab211VGN1MnRmWGtnVDlPMXZDK0F4MnowSHhiVnZYcGZSR3FYVTVEaUhWMnJTUVkxcnNobTBVZlRESk8xakJnVTd3V211K3FobitocmJhazN3eGRtNXF6SVp0VjkzMzY0MlFOVDlqT2VDUWxLNnFXWDlaV0c5SnNpYTVOVGxiekM5cWN6Qk9Qa3pVc2laNkpTRnpXNXg0RzNXVmJvMnNUdE9NWG5ESXlqemRPMW5CaGtZcUJNcXNFM2dHcEVibzJSZm1KZisxSTVnbkh5aHBGRHZ4UFFvS0todmQyeXVrcjdGOGt3a1BYcGlpckxWdzdjQVd6Sm0vbWdQamZmWEhpWitRdmNXWmwzZkp6OWFISXFKOGx1alpORmY5YVRzWlpqcE0xckJ4SURkZFl6UVcxT2IyM09iVDhJMGRHZllUbzJrVHRySHZFRm8rVk5Zb2RFUHZMenc1Y1hKdlIzMHBGcjFXTDBiV3BLcXpibmh1U25BMTdsbE5mbUlnS0Q5ZllpY3VvNksyc1ZuWUVFRjJiTE5ieXIyeHBTckxpMlBJWHg0SjZ3VVJVZExoMjRKSTI5TVpSM1JIQU9ibzJXWG5iYXhZZ0w5dVdkWDNpdkJFNE1TTWxLMXQrNWxSUUQxZ1JGZHU3bHRWY1ZrWG5Db1VieWoxMGJicnlkc2laS0R2eWM2Y3lvNEhzV3RtMzFEalhiazU5NVEyWDF0SzVFNy9nUkowdDBiVUorenBzakZUNWVGMnNMV2tJV1MzNU1BYlhTenBPS1BMVmtwZlRxeTIvYUV0ZEJlamErTmloYnZqSDZtZUhzbUFaQ1NrRS92a1RVdktQTkJ2U0xqOHB1R2d1Y0M1eFBTOEl3aWlLNmEwMGlxSlZzUFRzTHFPYjZzaGF2MUJWL0tJRGRZS3VtV0I3NGgyMGRibk5GSWV0SkVXeVd1NG9xbzRoYVVNOXJKM1B6ZjFnSGRObGFSUUducVVycTc3R3JIWDlCallxTHcrTTBMVnhaVWZlWFZQbXNnT3BjKzJHbE1nYXVUUDJlbWJhQitvdStTeHBZVXo5cEZHd3NDOXVzYnFzQ1hlTmQwQ2RvR3VqeXhyZXorblFNMGFWL3FXRGVyUU53TnRXMGZORDV4MHZpRklTbElTK1ZXMmJTWDlwNWJ1MlFkY21wT2I5TllXeUx5RWpCY3JSenRnWGFwYlAzdTEzbXZucmxDUWxLM3ZldXJ5a1htcXVvV3VNZDVCUkYramEyRW91cEMwejZtelQ2bjNiUWM2L3hraVhRc3QrcDNrUWt5SnIzNDdMZUdQcTQ4Qkg2eHFqTHRDMWtXVXQ1L3JMdHRVYm5acC9yU0ZOQ29YN25RTG54V3lWa0RxV3BHMUdmVEN1RGtQWHBxams0dHFDdWpyb0hMQXhzUytqdklKZmxGTkhMMTF6bHpGcEVKbytJZldwaCt6RTFkbWdhMVBVY0JrTm8yNnlSbU4wcXBIZWdGVndsZnVkVm83amhhUkxFaGk5akxDbUhnNWNuUk9oYXhPVWNRRWl0eW5uR2dkc2JZZHZyd1lGVi9xeTFOaFBTS3ZRNEkyN0tYWEh1RUlIZEcyS0dKZDF5cW1UVXR1QUxlODAyMUN1NEoyUVFXSkQzNk13VzFFUE5kY3hEVFd4YXkyNkpvaHhlVHZxNUtScndGWUlmQnZsRmR5K3JoRWxCcFp0RmxJZlc2NVFUYS9NNjVwRlYrZ2JobkVGcWt6eWo4cEpSaW5RWG1rRnQ3SnJSR25nT2laeFErcm54QVZjUHU2Q3JrMEo0d0lFVDNoWE9oN3JkK3hhU1dvVjNOYXVHVFptQzFMcWgzR0ZpdjQvbWpwQjE4YkZ1QURCTTVpYlZzUGpyM0c2Vm5DTHUyWlEyYnlFK3FxNU9oVzlrYUZyVThINGdHRXJOV1JuK0s3MXkxcERSb284WjN6dWlucmJxRjRMUGNlNXFwVjFkRzFjakE4WXRxeFZ2dzlqOEs2OXk1cDFMNmQ1RWJyT3lPWUo5WGZnM1RWVldiQm51L0pZZDlwVlhxdmN0N05HMThiRCtKQmhLOVMvd21XRXJoWDhMVXZmVFpNdW5WRXRTY1NKZDFRWEdaM0xpMFBEWDdWVlJ1OGNWQzVBQmVqYWVCZ2ZOR3duNVZkdUROeTF2bGs3a2NIaXVUTWFOeVFSZWRlcU1mb0lLdzcxczg5ZTM1NHJPeGVIcm8yTHFWMDB2NlJRdm5Jd2VOY092SStDakJZNEkzRmpFbEx5VGtvU2MxSTNEU1VmWFJzUDR3bzFtZmdYWjBkaWh1NWF4ZnVveVhBakRkbm1NWWxwOVA1cndoVHU3L2JRdGZFd3J0S1JMaWxWcnhzTzNMV3E3d2pXZUlFenZIbEtnclNPMWk1L3ZnZnFib2F1alVTa2E1S2ZlOVlxbm9nTzI3V0tUMmtXK2lLZU9hOE16eHJUUGtpdWxDMXVPK2phZUJqL1dGVytPdFluZGN0L2h3dEpGREJRMXlhYU5hSjA0ZnlmNFZtamtuZVFrNHppODgxSVcrb2hzcmRyMzIvLytLNzR4LzY4di8vMSs5bjkvZjN0TGVuRU9qNUhZTHVxVlRMejJpaGVPUnlzYTVQTjJyT1ZNeUEzSldISEFYWU1aa1hEUDNBc3FKZVZoVjI3K1hILzYzSC94dVB2K3p2NXZOM2NQVHp1Ly9iNDhQTTc2ZENoYStmeVE2dGdFbENybllnTzFiVXBaNDBvZHAwWDVxNkUvcU1aNWtxcWpKMVBVdXI2c0dQVWwyOVoxMjd1ZnUwLzlmdGVva0EvSHA3Mm4zbDYrRUhLZGV2YXVhS1IzcmhZcUYwUkhhaHIwODRhVVRwM0JoS1JCSXNPZU14dDZ0ck56OGY5SldJRit2RncrUWQvSjdYNmQ0MkluV1Jub3EzU0ZkRmh1amIxckQzem5VR3NTRUptendHUDFMR25hejllUjJwcUMvVHQvbW5meGU4N1VrbWthMFM3Vm1LengxZUJ5RWpBVUYycitwNjlzRTdnREdCQk1oaS9xQ1V6ckszcDJ0M1R2cnZISGdXNmVkaDM5cVN5YkdKZG8wMHR0WGN4Vnp6RTBkKzFxOGdhVWVob04wdEpCck5uSjdSdlNkZWVxOWJQMC8wM3V1aWxhcjA4M1pKQ1RLaE5PNm1yZVU1S240em83OXFWWkkwb2NvMSt1UGIyQ25ERDkzYTVWblR0OW5FdjRKNHVlS2xhWDc5dlNBM2hyaEZySlo0dEhWVHU5TkRmdGF2Sm12NWwwU1hKS2ExNXJoazdGblR0MjMvMllwNSswTmZ1OTBKK2toTGlYYU84RmIvRUlsZTVRcSs5YTFlVU5hTFlOWFhuR2xHM1Q1cVJFWHdMdXZiOWRRcXFkbXgxK3lUelkrVkpkSTN5Vm54TnFsWDRiNjN1cnZYT1dtUEJtZENSd3JZbUdWWjF6VFcvYTNkN0tmZjBpVysvOWhKdVNaNTQxeTZFcmFZdlZRb2ZzR251V3Yrc1pXUTFqV0h6U0lwTlhRc2Q0N3Yyc0pmMCtKMCs4bU12NXlkSmsrb2E1Y0pIOUxZS0g3RHA3bHJXWEZYV2lHTFgwRVVEbTdybW1kNjE1MEdWdkR0NjYrV1JuYXdIa2lYWE5TcEVOMzFuQ2grdzZlemFOV1pOWDlnV0pNZWlyc1dPNFYzNzlyaFg0ZUVidmZWZDRPZXFENXRrMStnZ3VqdXlVYmRYWEdQWHJqTnIyc0tXa0J5THV1YWIzclhIdlJxUE4vUktZQTZxSjJ5eVhhTkdjT1dnVlBlQjZldGEvNndkSjVFMW9zak1wMnYyZE0wenZHc1BlMlcrMDZ2Ny9kNklzRWwzTFJlY2lESjFtOFgxZGUwbGExTjRwVjV2b1lsUDF5enEydHJzcnQzdkZmcEJmM3hUV011ZkpFTzZhMVFLVGtUVkhlN1QxYlZyenBxT0M5bm1KTXVpcnBGcmN0ZHU5MHJkRVpIQUl6dU4yejNrdTVhMVl0K3ZSdG5DZ2FhdUdaMDE5cXg4c1dPTTVhU2U3eWdXa2l5YnVyWTB1R3ZmOW9yZDBVdldsTG9oY2ZKZG8wTHNXdStEc20rbG5xNlptYlVOS3c4ZjM4bGUxK1dPa1VwelI2MlVaTm5VdGRqZ3J2M2FxM2FuUG12NzN5Uk91bXZDdDZrVnlqNHhMVjNybjdVRDZaV3hzbTc1QmFkcWw1TWlxZXVvNUpNMG03cEdNMk83ZHJ0WDcwNGdhMW9mc2NsM3JSUzZUUzFYTnVyUjBiWCtXU3RJcDd4c2VGZnRzZGlRQ3JIaUkxVFNodTdhaHBYL1lCbjF0elMyYTA5N0RYVDgwQnNTSjkrMWpkZ1hUSGhCVkw1cmxtVnRXN1c4cDJhM0lYbWhvNDVMQXNiczJxWThuZjk5WnRUVDJ0U3UzZTF0OFVEaTVMdEdOZjlZS2ZSZjBUa05YYk1zYS9taDVVS2FJaU5aL2xCbkRZenJXbGJ4dnh3eTZzZlVyajN0clhGTDR1Uzd0aE82RHJ3U21MMUtkODIyckJVTmwxRGxKQ2VkamJrYW1oZGwvYmRUaDZEWG56dVVqTHJZdHZ5ZGxsRXZucGxkczJlNEpyZDBJTisxamREQ1FTbnc1OHAxemJhc1pXWExKZFVGU1ltVm42RVNtQWFxMVZhTUxqbW8rSndETTd2MnVMZklMUW1UN3hxZFJLYVVUUFNFcVA2dVpZMEJ0MGh1cXBZcmNDcEl4dXEvN04yQmp0eTJGWVZocEhDQ05BaVM0eVVjd3FqY2hBaHFGVUZxVks2QnVIRWRpZUpJNG4zL0Y2cGhPN1hqN3N4b2VDOHBVdUwvQUx2T3p1aUxSRktrMUxFR3VDM3JLVjZUeHNVY0VSZTJiTTl0ZVR5VTFITUVKT2FhQzFsajJ6QStzcml1NlZpczhlL1Ywc3YyWUl2aHRXYW1xUG51NnJnS0g3WnZzblR0MlZCVWp4Q1FsR3Q5MEkvSTFiWEd4MlV0L2UzS1pCRGNONTk5TktmNTRQTXZ2L3pxNjVDK3VZazFUN0Z6T0p1UityUS9TK2JhUG1jTkdHdllaRnd6UWY5Mzh3RUxQVGl1bGNPYVdVaTRrMFpJSDU1RS8vVDVuNy8rRm94U3NjWmZScjFJSGVMM0lKRnIrMzBNSFlaWENFaktOY1ZZNkpIT3RWSllVeWVTei9jSTdjRm5uMy8xRGRLbFBLV29DL3N1ZFZqZEZ4bTY5dE5RV0k4UWtKQnJrSFJ0QmpaMHJmRmJuOURTZW9yU0hFcnd0MGpiaVpMazllWGJOZjVPOVY5bTZOckxvYkNlSWlBcDEyYTZOeGVFVVRMWCtLd3BTS2RPRkswZUpXUW9VUTczMWRLVkdxenRxd3hkRzByclpXVFhnaDRwUzNOdGM5YU1wNGhOSmV6bU8xR3FOTzdKeWUxdjhIVjAxM1kvdlBhbTRsenJFN3RXQUd1VzR1WU5jazlUc3ZvcnMxbXNjWkk4WFN2cFpZUDNQU25OTlVQMzEwUnlMWHZXUGp5REh2aFp0Q2V4UW9SU2REV3NLay9YaXBzMkdJYW5lM0hOSkhDTno1cFRFRTdQRkZhdW0vcm1QR3Z3dHJEUnZRWnJ5OCsxRjBOeFBhdXVzVnhydkNnUGVhN2F5djhrd0puU1pZSmNNMWhWWE5lT01oMDZEQytyYXhlemViTm1QTDJwd2thYytLNTErM1p0S0xEcTJzVnMxcXgxbEs2bFFiNFJKNzVydHJxMnZ1cmFmZW5FcmxYV2ZzOW5EQnU5cTdwV1hYdmZYV0d1SWJGckROYXUvcVNpV01zYU5ucFhkYTI2OXI0bjFiVkFqUnJQZkxHd2xDWDIvOHRuTzhhMjBOdXFhOVcxU0s3eHY0eTJqT2ZRbHN0YUlUT2hSVXdlVEpRdVZWMHJvTGV1RmZUZXU4bkV0WTYyWlUxNytxUWp3MllwV1F1cWF3VlVYYnVZelpRMU5kTjlIWFdCcnFGa3VlcGFDVzNuV25NT2dRSmM2OWo3UnhlMHdQNFBXY1NwbUFFMlUxMHJJWEhYK0Q4aWY5YzY5alJpT2M5ZG45YUNYOEYva0FuVnRSS1NkbzMvVld5eWQyMXoxbHJhTHErUllXcWhOSmtEdWxiWTZRYU1IWE5qbmtlRjNQY3BFbVl0Mnoydnp6UWpTbVdNc0RrYzBMVUMzdy9kOEgyRDZRd0V5SHhmeWMxWncwU0JUWk8xdGpXbXMzYWM1bjBOc2Rra3Bxc2p1bGJnZmg0YnVrYjNOMlh1MnZhczlSVFFNbllhbjlUMHpsTkFlYjUzNEpLd2RrVFhDdHgvVFh3L0QvWlBjRUgzS2tzcTF6cUI2eUQ1eXJXNTF6aFRNeTQ3ZVJKRlQ1R2JGQTdwV29INzVZcTd4bGFsUjg3bjdDVm5qZjhVNmwyRGk1blRQcDVFWVJhS21MZkFNVjE3TWhUWFQ1dTVOb1g5QkVyc1duYXNkYmRlalFwWDAyNFhUNkpBRjAwMjd6U082bHFCQ3oxKzNNbzFSV2RTUVIvWm1NQzE5S3p4NTBLdHdxcjBpVzVwUXE0MWR2SWszZXc2QlJ6WHRmSVdlanhPNk5vcUlwYXczMnRqdVpZWmF4aHY0a2RqZFdZcGYzVnVUSGVPN0ZwNUU2S1FkbzM3R09yQ09Hd1R1TllsUGFHRmY2Q2M3K090bEZoUVV0VTFubXRQaDhKNkllNGE5L3Jzd3I1QkpwWnJvYXdoVGlkYTNheHhZOFlYUDNWUVhidm8ybEVPUm40cTdocjNjVXFIM2VhcDZLNk5PYkJtNHY0VDFMeURQU2FyYStkZE84ckV3ZU9OWEZNKzhQbkcwNzE1eEhiTlpUR3NQc1hlR3NudDhvYXR1dlkyaTRNTXNMM0dScTVaQ3B2WDFBeElXSzQ1dWltREtKbllyQUZ1anpkczFiVzNXZUFZSzNPZmIrU2E5b0h6YkcwUWgzelhYQjRuQVp5aXN3YTRIZDZ3VmRlWW45aWpvYWgra0hlTmQzMzZ3R0c1UHE1cmpyRk5sMkNhd1pvOGJCN0ZWRjFqdW9aWFEwRzlocmhybXZjNDVYQzVtZTdQUkhYTkpkMzBnaTlPVjhTdnVhWHFtcEJyaDFqcDhVemVOZWFTZVJQNGtnSml1dVlvSkFQcGxFODBHVHNYL2ZwN2RlMjhhOGQ0RUgyMGpXdW40TldlYmNBVnhuYk41WExZWnAvcUVWajVzdDhTcmE1ZGNHMy9lMHUreENhdWpSY1VDWHhDY2hGZGN4VFlCT0htWko2YW9nK25xcTZkdjd5T01DUDZ3eWF1ZFhRK0ZYanFVQmZQTlpmTjBVMU53amMzN2I1bURxcHJiN01BOXI4MDl6VWl1TVppellWZTJUcmF4ZXVKa1lGa1k4cDdxSGxYTXdmVk5iNXJ6NFpDK2pHR2F4eldTQWRlMlQ3VEhmRzlnbUJMeWw5cGFFMG5yRXYzcDRVQ204WVcxVFVwMS9ZL2MvQWFHN2cyMG9WYzZKWHRNbldOWnNqVnBMMkRjclFtaFJWMUUvRmFyS3F1YmUwYW5nOUY5Q09TdTZZbXVwUU92Yks3WEYyakVXS05hZWNxbEJjYXpHc200dWZiNnBxWWE3dmVEZndWb3JqRzJBYkhoZThCa3ExcjFFS3FKZkdJbnBVWnpldElKcWVxYXhLdTdYMnB4eE1rZGswNTdqbmk1MWljTXo1eDBtdklwQm0zYS9GdTJKWjBoOS9OcXJyR2RtMzNOMnd2Z0xTdTlaNjdLcUtqTTQwWnUwWXpaT3FTVDhCYWdhVzVqdVNhVlhXTjdkcmViOWp1RU1lMTRIT0NsdkM5eDVxY1hhTVJJcDBZaGthOFlldFhZOHp2VkYzanU3YnZLZEduUURyWFZMY0lmTzc2dkloWnUwWXRKUExwbDVNNXJqV05KOUg2NnRxNi9BWFg5cnlHN1NXUXpMWEdlYnJlR0g2VnVjeGQ4eHI4OUFiTC94dnU3NXhJTnErcWE2dWFJcmwyTitUZEhaREVOV1A2bVRGMnN1NnBxTW5jTlpyQnI5dmlkYzJacnFkeE5rUFN1ZXFhZ0d1N2ZVdjBDWUJJcnRsM1RXK2k5ZmttL0t1eklIZlhhQVM3Y1l2dE5YcmVVL2FKcFBPcXVzWjFiYjlUQnorQm55SEpPc1lnOXBpL2E5U0MyN1RGa1o2YTlYSy9Jdm02NmhyWHRkMU9IYndBTDNuWFJzNDNSeGZnbW0vQXpHK3lhOURNV1RMWGtueW42dHEycnVHSElkTmUzWUdWdkd1T3MrWmdSZ0d1MGF6QVNqRnVDdU0rL1M1Si83eSt1aWJnMmg1ZkUzM05aRTNldFpuMXhlbUtjSTFjL0QrM2duZ3RYZS9TeFNXZnFxN0p1TGEzSTF3ZWc1VzhhN1Bpbk12blZSbXVVUmQ3QkgrR2ZJcXUxeVIxelZUWHRuYnQ3cmZobG9waURTWWxhM0Q4cVVaNTE1YUVRMnlXY1VjWWVZRE5WTmVPNVJvZUR3SGx2RGxSQk5kbXhmdGxlalBYSEtaMFEyd254bUw4eUs4YzJPcmF3VnpEWDRmVkZjYWFsR3VPZWRkd3dsYXVPVUI1OGY5V2hoRUdFYkxWdGVwYTlzdHpuMElzazNEQnFvMzFiZVNDYkpJTnNjMk1FZlhJSDdPcnJoM09OZng5eUtqbjRDVHZtdSt3SnUwajdUZG1tYXdCZmFvaE5yb2VZdFF3RnJEWk9oKzZXOWZ3ejJGRjViRW00ZHJjc0ovQnpFYXVXYnp2bEdpSWpjRUxJOTR2N2tpK3BhNWZrM0p0TDh2WWVLekp1ellxOWhLSENhd3NmODJHV3VpVzNBNWRtMU8rUitXcWE1bTRobCtHdGVWOG5vRzBhNHNSZUJJeVlHWFpyQUZOa2gzRUd0NVFaZHdKaTRUdnZWTmJYY3ZGdFlmcllDdmk3YW1QU25PekJqWEh1MFd4UE5aQ2h0aW9RVWlHTVMyNW5Xc2RTYmZVZllxeWNRMFBmeDB1VkNocm1DbThxUkZaUUdVMmNhMWozWlVzNmppdVlTYmh1dXBhUHE3aDd0Vnd0bEpaUTAraExhM01kb29UbUZuT3BSVTZ4SFk2a0d1R1pKdnJQdUN5cmhVT1d3VFdvSHlnYXAzVXVKSkdldGU4WWUvaTN4L0hOVmlTekRmVk5XSFh5b2J0RVNMVVUwQnpoeHZTUHVwQXVXVmNXWXh4cE9ZNHJzR1JZRzA5ajRyM3FVMlE3cnZmaGdzVjhxNDcrenQ3TXJnbE5iTzJoSlozelRjU2Y0bEZIY2MxU2RpNmVpNXlCTmZLaFUyR05mN2xiTFhrTmRXQm5SVmlEV3EramZjRHVZWlI3aUcwdWhiRHRWSmhZN0VtOVozMXpzaXlPWUdmWlZ4WnZDRzJBN21HZGlHQlRnclZ0VGl1bFFuYlkwVE1USFM5WmJKRy9HNVFJeUNXYTBzamQ3QjVjeURYb0t3blpwTUJxbXQ1dXZZcGJEdGdEWUR1M1RSTi95ZlptNXkxdGpVR2dibjRWN0VWZkxmVFJUMHZUalBlTUlxK1RCSFhhOTNDUUszWFFIVXRXOWYrQ05zK1dJdVdTN0RudFdXd3hoeGltL2J6ZnVpRWRUVW1LQVVBMWJXY1hmc1l0c29hZ3pWcUlKRU5ZQzFvVFFyL2hwTzlaclc0Ris3L1VIVXRhOWMrd0ZaWjQ3RFdReVRMWUkxOVhLWXBZdjgxVTEzTHg3VXZzblh0ZDlncWE1ZFNwelJYa3BWa0RSZ2pEckZOc1haYzVHUHRrSC83Y08xQnZxNjllL09nc25ZcE5iTkVrSGZ0cEdKc0JURHQvWHdEd2FwcnVidUd1MThyYXhkcmxsUVhzR1hzWlpoNGlNMXhmbHlCNTJCOVVuVXRlOWZ3OEpmSzJvVTZuK3o2dFF6V0VnK3hXY1piREp3V3VwcEIvbFhYMXJoV0FteWxzalltdkh3dGc3WEVRMndkWFcyQmZKcXUxeUQvcW11clhNc2Z0a0paVXhOdkNGL2V0UnNablNJTnNSbTZua1pBYkU0SkJWUmRXL2Q5eXgyMlFsbHJQVjNKYThobDVkZVpxVWhEYkVwd3Z3dlpZYjBaQlZSZFcrbGEzckNWeVpvYUdRODltYmdHRTJsTE1iL0pBTnV5NXJjV1VIVXRqV3Q0K0svSzJpZVpoWEZMa28xcnNIUkxYc3M5NEhwSTE5QStsbmxVMTFLNUJ2eWpzbmJtWm8zQldtclgrRU5zcytDL3RZVndJKzFqT3JTNmxzNDEvRnhaKzFDN0JFeE41dW1hOG5STG85d1NraE9FVytoNkNnVlVYVXZuR242dXJMMVBUeFRDV3A2dXhSbGkweVE1SXlwbjZZSVNPcHByZGt2WDhITmw3ZjBqYUJCcnVicUdQc1lRMjVKK3JHdWlmYndkV2wxTDZ4citOZ2ozcWp6V2xQV0JyR1hyR2s0Umh0Z2NwWjQ1MExTaURpVlVYVXZxR3I3UC81eFFSZ3pWMXJDV3IydHFrUjlpNjVJcjQyaEZHaVZVWFV2ckdyNC9OR3ZLZWdwbkxWL1gwTWdQc1NsS1BOcWxhVGZEYTlXMTFLN2grK095cHEwbkRtc1p1eFpqaUczbW4zUWwvekE5b29pcWE2bGR3MThPeXBweDNOZU5jbmJ0MWlFMkpVU2xWeERLMEpwYUZGRjFMYmxyK082MzQ3R20rb1YvMEhmV3J0MDR4T2Frbm0xSENEV3ZZaFJsVkYwTGNJMFAyOEZZYTA5MFE3N0YvV1h0R2hwUEpHdjNPaWtOUk9xSmRyUEtvN3EyaVd2NDdqOER0K2ZGc05ZNkwzUWNjZDZ1b1FzNFRKN3h6NVhkeUVuN1BUMkdWdGUyMlh2bDd0OWMxbEJFcXZzWU5lNWxtcmxyK0c5Nzk2THJLcEtkQWJpNDJNYVl5K29oQ3NrSXFVVTZrbk9Sa2pCUkVpbXR4TUlZVEwzL0M4M1p1M2VmMldlUE1RVjFnY0wvOXdCMEgrUDl1NnJXcXFwRzhUODA1K1ptb2gzZlVEVVV1Zlk3TXV5bi85bCtySlYxeHlkcmFOamFjeTNyRlA5VFcyNXFFSFhsZkVQVlVPU2FSSzdKQnR1V1l5MDcxeTJmb2Evb2liWG5tdklsdGtwOFNpdS9NWFE3VGJuSXRlL0l2UC9ZWnF6bFpYMjc4M202Z3A1WmZhNHBYMkxyNWFlMDRubThqUnVSa1d1eXViYlVMdmgvb1ZYS3k2cSt0VnpDTmFPbjFwOXJxcGZZYXVFSHlkWU1ObFUxUUs1SjU1cjVZUHVGRnBXWGRWMVg1ZTh1OVRkdDIvSlI4dTBkRnVTYTRpVzJuQXU2U2Y0L2I2dHFzSlZjYyt6TU5mckZ1bGlyT2k1QjhvNTFDM0tOY3JWTGJBMFgxR1J5c2JhZG96dzJsR3ZNMGx5am4rMkt0YUViQ2F3WXJFbmxtcmFya2d0Nkt0ZmVIMVAwZkh2RE5lVGFCMXJJenpiRldzVnRIcXpKNUpxK3E1THZtYW9GdXk2bkdjcWViM0M0aGx6N1FFdjVlM3NPeDYyNEp2ZVNoTmlSYTlSTmkzUlZBemJlbDdOMlQyMXh1SVpjazg0MStjMmlsc1Jhd2ZYb2F4SmtTYTVOWEdLN3FLdXdYbW1hN01hNVJjTzF5Q2NoeUxYdmFEbC8rNnNWc1VZZDE2TEp5UXhEdWFaNmlTM3JkVFVBZnI1dDM0SnIzcE05WXlRRXVmWWRMZWdQL3l1VWF2KzNiS3hWWEllMkpGTk01WnJxSmJaYVJ3L2dsenZCMW45dGFMUm5ETGsycUZwZHJyM3ZxYkxnWEtLYjlhbG1MdGVvVmJuRWRwODRyYzlJUU43dzMxbHdRRkhvTVlaY2U2SmNZNjdSVDM5YWZhd1JWKzUrSnBOTTVscW1jb210NUZ4cHNzMUlOZDVudEpqVDNtRU11VFpzdGJsRzlPOXJqN1hDOXJFYW1jdzFLbFV1c1RWOHF1Wk13N0txNVZOZGFCbnBiNkdHWEh0bXhibEcvN1R5VXlSTCsxUE5aSzVSclhDSkxldjVaSDF6enVpQnZMcnh6MWE4NFQwT0R4NzdCcmsyWXMyNVJyK3Mrd0NQa3F2VE56bVpaekxYRkMreG5ma3NYVk9YQlgxWG51ZWV0TkxuTkVXNkQ4SW9pbEthSlk2aUtBaDJQbnVEWExNOTEram5OY2Vhd2x5N1h6SlNZZVc1bHZVS2J4UzljZ2w5K3cyWFVkRWtJVk1CdWJhTlhCdmNldkJ2cEkzNVhHdEtrbVJKcmszOHhPNzBUTmJ4QlRVMGpZdGNNNTVyNit6TytRaTIvemU2SmRSOHJyVlZSdklzeVRXNktCd1RGVDAzUkg1SGZjU1FhOGkxei83bTE3WEdHbFZjVm5mSlNRVnJjbzF1WEYwL2Y4VU5rVDlsZklkY1E2Nzk2QSsvcmpUV3FPWlNXb1doWmsydVpYZUZKeFpkK1VMT05FM0NrR3ZJdFM5KytrL2RXMExONTlxOVVUdjl0Q2JYcU9BS042M2YrQ0pxbW1pUFhGT1dhL0ZXY28zb1QxcGp6WFN1OWJkTFFhcFprMnQwa1p5SUxsODdhR2lpMUVHdUtjdTFhRHU1UnYvNmwwMEc2bVBOWks1MWpiWk1TeE1hWnp6WEpBZFpOQ0s3YytOdU5GWEFrR3ZJdFVmK1lYenZsSG50MUVnck05SWorYTBMM2QxSE5NSjRyc2xsVVVrRHpCVkY1UThYVHgza0duTHRzYi83NzdkWSs2L2xZbTErcnQzYmExMFdwRSs2WjkvNU1ZMHluMnV6czZpYzhyQ1Z4aG9GRExtR1hCdnl4My8reHovU3FuUjhXTmUyYlYzWFpabVJickhMUGp1U2tBVnpqU29sSFd4ZmcyMnRzWlk2eUxVbGNpMnpJOWZXWjdDSVoxVHNzQi90U2RoQ3VVYU5zbHd6SEd4dFJwTWRHSEp0aVZ3ajVObzhneWxnMHNsaFh4MUoxRUs1Smw3SExBV2Zaa2hEMHlYc1JYS3RSSzV0UXJtR1hBdWxXbndFYysxQ3FoVzlzbHd6R0d4WG1tRy9sbHlyK0tpYzVrS3ViY1o1QlovYm5qM2lwaVRzc3N3NS9oVVhrcEdZaGh0UTBRd1JVMFcrLzM0VXlTalZ2VTVLa0d1THFSZi8zRktQUFJhUXNKS1B5MG05UnUyRlR4ZXVXMS9RSFA1cWNpM1RmYjhXSDlPVHFFaGpydFVFejl5V1B0OHBkdGlRaElUeFVUM3AwS21kK0JWM2d4VURjU0hUallUZE5WOUUweW5xYUVhdUxhcGJPTmVPYk5pZWhOMld1SGRKOEtya2dzUmxONjdSaFdaSkhhWmJUS0t1Zk1TWnBOVHFKdkluNU5waWxqMzNQdDJ6Snh3U1Z2RXhaOUxpclBvS2dVdlBOZWtLbXVmQXRJdElWS0Y1WEo0clcxNmpnQTA2a1JEazJreWx4R0JiWHV5cCtiWUxURS91cE1sVmRiMGliN2tXTmMwVU1mMUNFdFpxYnVkcGxZMzdBellvSUFISXRkbnFKVCsybzZQdTIxNUp6QjdrZE1yYktzNDlWNjdOYVM2UEthUzdSdFJuSktsVVZuN3lrV3RMdVVuTTJpU2xPNVhmZG1xWHVrOHU3d1czTEluTDZoWGRWQjB3QTNZazdxYTVTL0dxYWpqb0lkZVcwa3Y4S3NtSkhEYktKM0ZadjlTdDVtZmgrMFBGNVExWHA2OXB2cGlaNEpHNDdENVNySlNVZFlxYVNKVDhZdCtSYTlNVkVvdXZVdElERStEU0JFVXYwYlVscGVaRHVwem1LbHRscVpiUmZLbkhqSkI0MDJLalkvUFBqNVRrV2p1MHpBZkRyZ3VWUXlPWENVbG9ncUtYaURVcHpYQzdtSVN5VVpScU1nN01qSWdrM3JSZzdNZy92NkFKampwenJTVVkxaTB5ZTA4UFROQ0pwaWc2aVcramxJdWVUekZ2ZWk2bHEwak9pUmtTMEJURmZlUm5SRkxlS1lqTnZjNWM2d2dHNVh5SnNrSGtNbEVIbWlTN1BrcVhqQ2FKYVlieXpyOXFDNUtYVlIyZnEyOUtraUxma1N0Zk9CQi8wLzJGMU1tdThqOVRycEpjYTFaODRmdGExWHhBUnRxa0IvWEx5Y01qblA2YTAwUk9USE5VZC83WnJTUkY4dXVkejNDck1wTG1NMU1jbWlodnBzMjNaWi9mNURSTm9xWWlWdlBIQ29JaGQyNThrQnM2YklxRXBzck8xNWEvNjl2cm1TYUxtWlBTTE1Ydi8rRlc5ZjJEUmQzeEtmcjNVSk4zWU9aRU5GVlczVHIrVHVoRnozaCs4L0g4YnM0TFBhckp0Y3RnUXlZTUtMbnB3M0pqWDZJUDNZeUFNWi9XNXVPUFRFaGJsNlRHaVJsMG9JM1pxY20xY3ZCdkZBWTAzT3doUmVsQll0bkZGRTkwOWNPOHJLeHZIUi9XdDllcUlHVmloeG5rMHJha2l2cGFjbzdDd1RRNU45dTlkblRZZENtWmxYeE1pdFlyTDZ2NjJyYnQvY2ZiZGM1bFJrcWxMak1xcGswSkZlVWE4UUU1d1VNTk43bnAvZVN5T1k1a1ZzRGVPQ205UEk5OWdvbm9WRHRWQzhjdEZ0Z215VTN1RVk5OE5vOUhacjJuN3pxWDJNemFNOE1jMnBKRVdabmt5dEdaTzBYRGpYVjVSTDR0MDVPSXZWbnZFcHN4QnladjlUVWlqUUpsLzlnS0U5RXBDbU1ueTBZK2s3QW5rM2FmdGpxOHNwQ1p0TUV4c3FOc2YwWE9jYVRIQksyaGsyVWpuOGxKeUp5RWZlY2s5TG9leFJvcUJ4T0VDZ3Y5OStGRGF1Q3JpNWtMVGtLWHlRckluUDBQSzNzdlN5TFc3Qm1hYStVcVhEZHVNR0FUbHZkY2YxTnVFamhNaXVuYVpMTGxBcDI0RTV2TG9xRzVWaUViUmNJcWpnR2JxRTcvUFp1bm5YVU5BSHYyNXRXWDJFNE9ld1FETm5HdXlrbDN4am5ISVd4Q0dzNzFOcThsZ1d2ZnozakMzcno2RWx2SUZySDZmdWdKUXJWSGNOMDR4NjN2SWlyT2RYNVVhZWl6SjFhN21Xckgzcno0RWx2SUJxRWtLaVoxMVM0YlYzeklIVFBSVHlxdEY1eWM5cGIrakVjYm5oaUpHWXMxOUxBSkNSUkhlTVk1UjNQdXFLTFhOMXc3N1IxYjkwU243bGIvemlZNE1nbDJGWW0waVpWdnIyZzRsdGhHblh0Tnc3VTAzQTJFbWhXOUhnRjd3TmxRVDVXQVBSdUJYYUxqZk9YZGVpVkhzSTJwT05jeFhJdVBudDBMeWhGN3lOdkFBRUtJMkkydUtCMk1PbW80MGVHT1lCdHgxWEI5Y0JMdUhhYVhtNUplcWJ2MTNvTlJpY2RHMlQ4VGpSTFNLdGJSMUZMeEp4b1VEN0tXUDFYUVZFbTRIMG9FcTJxaXUyMHZaUXVJSENiQTlwcG82bmlrVStwcFdUUys4eWU2VjcvcjROenpwNjQwUlJvRk80ZVpjaVNkanV6ZEN5K3hIZGxrTmk2bStwcVg4SFo2dHNOVy9KbitRaThzYi9rSEpmc3lFdllEcXhkZUl2YUUrd0pMYk9tT3JjZUp0RGxvSG9FZmRmMVMzL2xUM2N0MjZHWTFIM09tS1k1TUQvUGpwcThuK2I5ZWUyN3NNakdXditsUTg4RWhvYllKOTVtUHVMM2tjV3g1M2ZNeE41ckVZeit5ZDBVNWRWOWwzK0tBZ0MzTTBBYTJrK2JnakIxOWQzZTBmRXg3cGhkVE5ueGNuOUVVTWRQSWFNOUY2cjNPaHV4SEVwOU5ZUEdiamgyOUk4TFkwYmk1SXUvNXFQdjFoU29JaGVCOTRTVk5zbWMvc1Bmcm5ucXYwUzQ2WVBJMVlkYSs2Yyt4NDJwNXZ0WWEvNFdMdUYvUEw5RDJrWitiT3hkVDB5U3B3MzVrNjljOTlSYnFnNCtkUTByTFd1ZGdUY3ViL2hvN2JxeisrWm9YVmxvdTZINnJ6eVVaVnM1U2o3aTJEL1JjM0kybUNka2l2SmpVU2p6bGJaVGlINkFiMGNJQ3RsYXEzL1RKMFZ1Y2lCM2R1L3p6bnNORVhVYlR1T3doMjJwbHNTTno2S0Y4b093U1dsRGtzdlZTKzZaRDlwVVRrVUtobzcvWi9NeGhtcjZnYVNLMkZDY2tkVUpuaWFuUjUzWXhKNkNsSkR1MmFpcmY5RUh6VHBJam15V2xTV29PV21PTmZQYVVKVWMrSE5nb0xXc3lzZmY1cVNFdElWM3ZGRlQ1bTA1OXZVUHdkR2RvRTAzRFFXZXNKV3hKWGtJcUpKN1U5MURkajdzZmtXbHA0REFMK0FrcEVMbDZ2MG14Wit4Z3daYUR2bGlqUFZ1VWN5UkpjNjhuOFZPU01sQ0JOSjFzNFpvWDFqNXpUaVF0MFB4Tk9ocmNISmgxSElSanphN2htcElmOG1TMzBLTFBSN3VZZkxLOVFLcTkyYVVrSmZiMGZwTmkzOXd4TlFpMlNiRm0yM0JOd1hwNzRDd1RxWkhIM3NrbjI4Wm5vSXFHVk9sQjd6Y3BEVXpmdFpaaEtpcWlLOGpDNFpyTWVydjhnR1dmS3B5Q21xMGdKSHZMVW8xSnRma2RIYjNmcE5BeGZXVXFpZ2RDMm95c0hLN0pmQjhqWDM2d21NN0tsUEVISHhMUzZMVHl6ZzdGWTluUTFmNTg4NGM1b04xRHdKVm1pSm1RbFNhYjBKZFJJb0JrMDlRUFNZOGtzR2xaVGZwalNZK3UzbTlTNkM1Mml1WVpPdytlNlV0NlkxUHZtbVRBSkFlSHFiS1BOUDJST2Z1WVZFdkRsZTRERmVjR0NRbUw5NDdXNXljSFo4blR0M0pVRDRiZE1ucG56VmFEQWQ0eElSR0o2aXV6M0VNc2xpazdtU2ZMUzBOYjU1OWY3TUpVNjR2MkpaNnZkY0NHdWFpdy9rd2ZMTmtaK293WFJQUmNGSGhNQS9jUTBWUHhjVGZ6eWZzVHFaQWNOeEpxdjlrZFk2MHYyaDk3Zmh4NHF6Z3V0VUJkOUpGclJ2TWMyVXI1d1NtbVIrSlQ0R3YrRHlmMFFDSjlyNDEvakVsR2Vqcll2S1kyd05rRlVVb1BKS2ZBVi9UOFpPajV6bnAyaTEyd3l2WlZXOUJNNmJyN0JEei9FQVRSaDFNUUhIeVBHZUg3UVJCR0g0NUI0UHRNQ2NjUElwb2pPUjA4dG1IKzdzc0g3cWwvb1VlUkZ5b3ZvWGt5VEVaLzBKYjB3ZDRlajVmaTdRZEdLRFE0UUYzM3p3K291VEUxUnkvYjQxU3p2bWp3UXZ4OUVFWUpQZkUyc1BBM1BVcmJwb2hteTJyTVJ0ODBKVWxJTjdoY1l4M1A5L2ZCdXpDS3d1RGR6dmZ4YXF6bHBqUmZWcjE4MDhmOWtwR1VBd01BMVFLU2tsL3YvR1VOWGNLRldTakF3bUtTVk5Rdk9XcnI2b0tHWUJZS3NDeVA1R1hWOWFXeXJWVjFwZUNtR2p3QkJGa3dFLzJ1dkZ4YjZ5c0o3WkJyL2FFcWN4S3oycXYxQUY1QVRBb1ZaVm1yZENtVktHaUZZclJFQVdpc2ljSUNVdlJGQWVpeko5QUNpMnNBeXdrSmpMUGd0a2tBcThVRXlxRm1BUEFFbHRpMkJ6VURBQ3U2MkFDeEJqQUJhZ2ZiZ2xJb3dCdHIybk1Cc1FZZ0NrWFJ6VUNzQVh5RFlOc1N4QnJBT3dUYmRpRFdBRDRnMkxZQ3NRYndIWUp0R3hCckFKOGcyTFlnUWF3QmZJWmdzeC9hY1FIK0N2clk3SFpDckFFOGdKMEhGanN5QUZpSWgwM3dPcVM0MkIxZ1FTNk9MVkl2UnNVQVlGRU9xZ2RZV2dQWW5EM21vcGlEQW15Tmg3bW9Pakd1UHdaWWh5TUJiaklBMkJnL0laQVhvV0FBc0NJT2htelMwZ01EZ0ZYeElnSVpJY3FnQUZPaE1McHFtSUlDckpPRERhTXpKYmpRSFdDMVhIVHB6cENnWlExZzFaQnNTRFdBN1VHeVRSRWoxUUNzNEI1UlFSQno4aGtBV01JNW9GRjNWSHJFbmlrQXUvaVlqajUxd2dRVXdFTE9IaHZpQjhRSEROVUFiT1VlRUcwSU5ZRE5jZmNuZ3U5T2U0UWF3Q2I0Und6YnZva0NsRDhCdHNUeGcraUZ1eitTRXpJTllKdmNYWEI2c1pGYkZJWEJEcEVHc0hXZWZ3akNhQldqdDJpYU1Iakcvd29yYVFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUdEQW53RUhFVUdNSDV2d2N3QUFBQUJKUlU1RXJrSmdnZz09J1xyXG5cclxuICAgIGtvZmlCdXR0b24uYXBwZW5kQ2hpbGQoa29maUltYWdlKVxyXG4gICAgY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoa29maUJ1dHRvbilcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY3JlYXRlRmVhdHVyZUhlYWRpbmcoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBsYWJlbDogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBzZXR0aW5nc0tleToga2V5b2YgQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5ncyk6IFNldHRpbmcge1xyXG4gICAgcmV0dXJuIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0SGVhZGluZygpXHJcbiAgICAgIC5zZXRDbGFzcygnYWMtc2V0dGluZ3MtaGVhZGluZycpXHJcbiAgICAgIC5zZXROYW1lKGxhYmVsKVxyXG4gICAgICAuc2V0RGVzYyhkZXNjcmlwdGlvbilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgLnNldFRvb2x0aXAoXCJSZXF1aXJlcyBhIHJlbG9hZCB0byB0YWtlIGVmZmVjdC5cIilcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKHNldHRpbmdzS2V5KSBhcyBib29sZWFuKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHsgW3NldHRpbmdzS2V5XTogdmFsdWUgfSlcclxuICAgICAgICAgICAgbmV3IE5vdGljZShcIlJlbG9hZCBvYnNpZGlhbiB0byBhcHBseSB0aGUgY2hhbmdlcy5cIilcclxuICAgICAgICAgIH0pXHJcbiAgICAgIClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY3JlYXRlRGVmYXVsdFN0eWxlc1NlY3Rpb24oY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBsYWJlbDogc3RyaW5nLCBzZXR0aW5nc0tleToga2V5b2YgQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5ncywgYWxsU3R5bGFibGVBdHRyaWJ1dGVzOiBTdHlsZUF0dHJpYnV0ZVtdKSB7XHJcbiAgICBjb25zdCBkZWZhdWx0Tm9kZVN0eWxlc0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGV0YWlscycpXHJcbiAgICBkZWZhdWx0Tm9kZVN0eWxlc0VsLmNsYXNzTGlzdC5hZGQoJ3NldHRpbmctaXRlbScpXHJcblxyXG4gICAgY29uc3QgZGVmYXVsdE5vZGVTdHlsZXNTdW1tYXJ5RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdW1tYXJ5JylcclxuICAgIGRlZmF1bHROb2RlU3R5bGVzU3VtbWFyeUVsLnRleHRDb250ZW50ID0gbGFiZWxcclxuICAgIGRlZmF1bHROb2RlU3R5bGVzRWwuYXBwZW5kQ2hpbGQoZGVmYXVsdE5vZGVTdHlsZXNTdW1tYXJ5RWwpXHJcblxyXG4gICAgZm9yIChjb25zdCBzdHlsYWJsZUF0dHJpYnV0ZSBvZiBhbGxTdHlsYWJsZUF0dHJpYnV0ZXMpIHtcclxuICAgICAgbmV3IFNldHRpbmcoZGVmYXVsdE5vZGVTdHlsZXNFbClcclxuICAgICAgICAuc2V0TmFtZShzdHlsYWJsZUF0dHJpYnV0ZS5sYWJlbClcclxuICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxyXG4gICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgLmFkZE9wdGlvbnMoT2JqZWN0LmZyb21FbnRyaWVzKHN0eWxhYmxlQXR0cmlidXRlLm9wdGlvbnMubWFwKChvcHRpb24pID0+IFtvcHRpb24udmFsdWUsIG9wdGlvbi5sYWJlbF0pKSlcclxuICAgICAgICAgICAgLnNldFZhbHVlKCh0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5nKHNldHRpbmdzS2V5KSBhcyB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KVtzdHlsYWJsZUF0dHJpYnV0ZS5kYXRhc2V0S2V5XSA/PyAnbnVsbCcpXHJcbiAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmdldFNldHRpbmcoc2V0dGluZ3NLZXkpIGFzIHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH1cclxuXHJcbiAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSAnbnVsbCcpIGRlbGV0ZSBuZXdWYWx1ZVtzdHlsYWJsZUF0dHJpYnV0ZS5kYXRhc2V0S2V5XVxyXG4gICAgICAgICAgICAgIGVsc2UgbmV3VmFsdWVbc3R5bGFibGVBdHRyaWJ1dGUuZGF0YXNldEtleV0gPSB2YWx1ZVxyXG5cclxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXRTZXR0aW5nKHtcclxuICAgICAgICAgICAgICAgIFtzZXR0aW5nc0tleV06IG5ld1ZhbHVlXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoZGVmYXVsdE5vZGVTdHlsZXNFbClcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzTm9kZVR5cGUgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTdHlsZUF0dHJpYnV0ZU9wdGlvbiB7XHJcbiAgaWNvbjogc3RyaW5nXHJcbiAgbGFiZWw6IHN0cmluZ1xyXG4gIHZhbHVlOiBzdHJpbmcgfCBudWxsIC8vIFRoZSBlbGVtZW50IHdpdGggdGhlIG51bGwgdmFsdWUgaXMgdGhlIGRlZmF1bHRcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTdHlsZUF0dHJpYnV0ZSB7XHJcbiAgZGF0YXNldEtleTogc3RyaW5nXHJcbiAgbGFiZWw6IHN0cmluZ1xyXG4gIG5vZGVUeXBlcz86IENhbnZhc05vZGVUeXBlW11cclxuICBvcHRpb25zOiBTdHlsZUF0dHJpYnV0ZU9wdGlvbltdXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBCVUlMVElOX05PREVfU1RZTEVfQVRUUklCVVRFUyA9IFtcclxuICB7XHJcbiAgICBkYXRhc2V0S2V5OiAndGV4dEFsaWduJyxcclxuICAgIGxhYmVsOiAnVGV4dCBBbGlnbm1lbnQnLFxyXG4gICAgbm9kZVR5cGVzOiBbJ3RleHQnXSxcclxuICAgIG9wdGlvbnM6IFtcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdhbGlnbi1sZWZ0JyxcclxuICAgICAgICBsYWJlbDogJ0xlZnQgKGRlZmF1bHQpJyxcclxuICAgICAgICB2YWx1ZTogbnVsbFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2FsaWduLWNlbnRlcicsXHJcbiAgICAgICAgbGFiZWw6ICdDZW50ZXInLFxyXG4gICAgICAgIHZhbHVlOiAnY2VudGVyJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2FsaWduLXJpZ2h0JyxcclxuICAgICAgICBsYWJlbDogJ1JpZ2h0JyxcclxuICAgICAgICB2YWx1ZTogJ3JpZ2h0J1xyXG4gICAgICB9XHJcbiAgICBdXHJcbiAgfSxcclxuICB7XHJcbiAgICBkYXRhc2V0S2V5OiAnc2hhcGUnLFxyXG4gICAgbGFiZWw6ICdTaGFwZScsXHJcbiAgICBub2RlVHlwZXM6IFsndGV4dCddLFxyXG4gICAgb3B0aW9uczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ3JlY3RhbmdsZS1ob3Jpem9udGFsJyxcclxuICAgICAgICBsYWJlbDogJ1JvdW5kIFJlY3RhbmdsZSAoZGVmYXVsdCknLFxyXG4gICAgICAgIHZhbHVlOiBudWxsXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnc2hhcGUtcGlsbCcsXHJcbiAgICAgICAgbGFiZWw6ICdQaWxsJyxcclxuICAgICAgICB2YWx1ZTogJ3BpbGwnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnZGlhbW9uZCcsXHJcbiAgICAgICAgbGFiZWw6ICdEaWFtb25kJyxcclxuICAgICAgICB2YWx1ZTogJ2RpYW1vbmQnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnc2hhcGUtcGFyYWxsZWxvZ3JhbScsXHJcbiAgICAgICAgbGFiZWw6ICdQYXJhbGxlbG9ncmFtJyxcclxuICAgICAgICB2YWx1ZTogJ3BhcmFsbGVsb2dyYW0nXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnY2lyY2xlJyxcclxuICAgICAgICBsYWJlbDogJ0NpcmNsZScsXHJcbiAgICAgICAgdmFsdWU6ICdjaXJjbGUnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnc2hhcGUtcHJlZGVmaW5lZC1wcm9jZXNzJyxcclxuICAgICAgICBsYWJlbDogJ1ByZWRlZmluZWQgUHJvY2VzcycsXHJcbiAgICAgICAgdmFsdWU6ICdwcmVkZWZpbmVkLXByb2Nlc3MnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnc2hhcGUtZG9jdW1lbnQnLFxyXG4gICAgICAgIGxhYmVsOiAnRG9jdW1lbnQnLFxyXG4gICAgICAgIHZhbHVlOiAnZG9jdW1lbnQnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnc2hhcGUtZGF0YWJhc2UnLFxyXG4gICAgICAgIGxhYmVsOiAnRGF0YWJhc2UnLFxyXG4gICAgICAgIHZhbHVlOiAnZGF0YWJhc2UnXHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9LFxyXG4gIHtcclxuICAgIGRhdGFzZXRLZXk6ICdib3JkZXInLFxyXG4gICAgbGFiZWw6ICdCb3JkZXInLFxyXG4gICAgb3B0aW9uczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2JvcmRlci1zb2xpZCcsXHJcbiAgICAgICAgbGFiZWw6ICdTb2xpZCAoZGVmYXVsdCknLFxyXG4gICAgICAgIHZhbHVlOiBudWxsXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYm9yZGVyLWRhc2hlZCcsXHJcbiAgICAgICAgbGFiZWw6ICdEYXNoZWQnLFxyXG4gICAgICAgIHZhbHVlOiAnZGFzaGVkJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ2JvcmRlci1kb3R0ZWQnLFxyXG4gICAgICAgIGxhYmVsOiAnRG90dGVkJyxcclxuICAgICAgICB2YWx1ZTogJ2RvdHRlZCdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdleWUtb2ZmJyxcclxuICAgICAgICBsYWJlbDogJ0ludmlzaWJsZScsXHJcbiAgICAgICAgdmFsdWU6ICdpbnZpc2libGUnXHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9XHJcbl0gYXMgU3R5bGVBdHRyaWJ1dGVbXVxyXG5cclxuZXhwb3J0IGNvbnN0IEJVSUxUSU5fRURHRV9TVFlMRV9BVFRSSUJVVEVTID0gW1xyXG4gIHtcclxuICAgIGRhdGFzZXRLZXk6ICdwYXRoJyxcclxuICAgIGxhYmVsOiAnUGF0aCBTdHlsZScsXHJcbiAgICBvcHRpb25zOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAncGF0aC1zb2xpZCcsXHJcbiAgICAgICAgbGFiZWw6ICdTb2xpZCAoZGVmYXVsdCknLFxyXG4gICAgICAgIHZhbHVlOiBudWxsXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAncGF0aC1kb3R0ZWQnLFxyXG4gICAgICAgIGxhYmVsOiAnRG90dGVkJyxcclxuICAgICAgICB2YWx1ZTogJ2RvdHRlZCdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdwYXRoLXNob3J0LWRhc2hlZCcsXHJcbiAgICAgICAgbGFiZWw6ICdTaG9ydCBEYXNoZWQnLFxyXG4gICAgICAgIHZhbHVlOiAnc2hvcnQtZGFzaGVkJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ3BhdGgtbG9uZy1kYXNoZWQnLFxyXG4gICAgICAgIGxhYmVsOiAnTG9uZyBEYXNoZWQnLFxyXG4gICAgICAgIHZhbHVlOiAnbG9uZy1kYXNoZWQnXHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9LFxyXG4gIHtcclxuICAgIGRhdGFzZXRLZXk6ICdhcnJvdycsXHJcbiAgICBsYWJlbDogJ0Fycm93IFN0eWxlJyxcclxuICAgIG9wdGlvbnM6IFtcclxuICAgICAge1xyXG4gICAgICAgIGljb246ICdhcnJvdy10cmlhbmdsZScsXHJcbiAgICAgICAgbGFiZWw6ICdUcmlhbmdsZSAoZGVmYXVsdCknLFxyXG4gICAgICAgIHZhbHVlOiBudWxsXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYXJyb3ctdHJpYW5nbGUtb3V0bGluZScsXHJcbiAgICAgICAgbGFiZWw6ICdUcmlhbmdsZSBPdXRsaW5lJyxcclxuICAgICAgICB2YWx1ZTogJ3RyaWFuZ2xlLW91dGxpbmUnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYXJyb3ctdGhpbi10cmlhbmdsZScsXHJcbiAgICAgICAgbGFiZWw6ICdUaGluIFRyaWFuZ2xlJyxcclxuICAgICAgICB2YWx1ZTogJ3RoaW4tdHJpYW5nbGUnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYXJyb3ctaGFsdmVkLXRyaWFuZ2xlJyxcclxuICAgICAgICBsYWJlbDogJ0hhbHZlZCBUcmlhbmdsZScsXHJcbiAgICAgICAgdmFsdWU6ICdoYWx2ZWQtdHJpYW5nbGUnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYXJyb3ctZGlhbW9uZCcsXHJcbiAgICAgICAgbGFiZWw6ICdEaWFtb25kJyxcclxuICAgICAgICB2YWx1ZTogJ2RpYW1vbmQnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYXJyb3ctZGlhbW9uZC1vdXRsaW5lJyxcclxuICAgICAgICBsYWJlbDogJ0RpYW1vbmQgT3V0bGluZScsXHJcbiAgICAgICAgdmFsdWU6ICdkaWFtb25kLW91dGxpbmUnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYXJyb3ctY2lyY2xlJyxcclxuICAgICAgICBsYWJlbDogJ0NpcmNsZScsXHJcbiAgICAgICAgdmFsdWU6ICdjaXJjbGUnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAnYXJyb3ctY2lyY2xlLW91dGxpbmUnLFxyXG4gICAgICAgIGxhYmVsOiAnQ2lyY2xlIE91dGxpbmUnLFxyXG4gICAgICAgIHZhbHVlOiAnY2lyY2xlLW91dGxpbmUnXHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9LFxyXG4gIHtcclxuICAgIGRhdGFzZXRLZXk6ICdwYXRoZmluZGluZ01ldGhvZCcsXHJcbiAgICBsYWJlbDogJ1BhdGhmaW5kaW5nIE1ldGhvZCcsXHJcbiAgICBvcHRpb25zOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAncGF0aGZpbmRpbmctbWV0aG9kLWJlemllcicsXHJcbiAgICAgICAgbGFiZWw6ICdCZXppZXIgKGRlZmF1bHQpJyxcclxuICAgICAgICB2YWx1ZTogbnVsbFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ3NsYXNoJyxcclxuICAgICAgICBsYWJlbDogJ0RpcmVjdCcsXHJcbiAgICAgICAgdmFsdWU6ICdkaXJlY3QnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpY29uOiAncGF0aGZpbmRpbmctbWV0aG9kLXNxdWFyZScsXHJcbiAgICAgICAgbGFiZWw6ICdTcXVhcmUnLFxyXG4gICAgICAgIHZhbHVlOiAnc3F1YXJlJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWNvbjogJ21hcCcsXHJcbiAgICAgICAgbGFiZWw6ICdBKicsXHJcbiAgICAgICAgdmFsdWU6ICdhLXN0YXInXHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9XHJcbl0gYXMgU3R5bGVBdHRyaWJ1dGVbXSIsICJpbXBvcnQgeyBXb3Jrc3BhY2VXaW5kb3cgfSBmcm9tIFwib2JzaWRpYW5cIlxyXG5pbXBvcnQgQWR2YW5jZWRDYW52YXNQbHVnaW4gZnJvbSBcIi4vbWFpblwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXaW5kb3dzTWFuYWdlciB7XHJcbiAgcGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpblxyXG4gIHdpbmRvd3M6IFdpbmRvd1tdID0gW3dpbmRvd11cclxuXHJcbiAgY29uc3RydWN0b3IocGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpbikge1xyXG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW5cclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ3dpbmRvdy1vcGVuJywgXHJcbiAgICAgIChfd2luOiBXb3Jrc3BhY2VXaW5kb3csIHdpbmRvdzogV2luZG93KSA9PiB0aGlzLndpbmRvd3MucHVzaCh3aW5kb3cpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbignd2luZG93LWNsb3NlJywgXHJcbiAgICAgIChfd2luOiBXb3Jrc3BhY2VXaW5kb3csIHdpbmRvdzogV2luZG93KSA9PiB0aGlzLndpbmRvd3MgPSB0aGlzLndpbmRvd3MuZmlsdGVyKCh3KSA9PiB3ICE9PSB3aW5kb3cpXHJcbiAgICApKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBhZGRJY29uLCBzZXRJY29uLCBzZXRUb29sdGlwIH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuaW1wb3J0IHsgQkJveCwgQ2FudmFzLCBDYW52YXNOb2RlLCBDYW52YXNOb2RlRGF0YSwgUG9zaXRpb24sIFNpemUgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBTdHlsZUF0dHJpYnV0ZSB9IGZyb20gXCJzcmMvY2FudmFzLWV4dGVuc2lvbnMvYWR2YW5jZWQtc3R5bGVzL3N0eWxlLWNvbmZpZ1wiXHJcbmltcG9ydCBBZHZhbmNlZENhbnZhc1BsdWdpbiBmcm9tIFwic3JjL21haW5cIlxyXG5pbXBvcnQgKiBhcyBCQm94SGVscGVyIGZyb20gXCJzcmMvdXRpbHMvYmJveC1oZWxwZXJcIlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbnZhc0NvbW1hbmQocGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpbiwgY2hlY2s6IChjYW52YXM6IENhbnZhcykgPT4gYm9vbGVhbiwgcnVuOiAoY2FudmFzOiBDYW52YXMpID0+IHZvaWQpOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IGJvb2xlYW4ge1xyXG4gIHJldHVybiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcclxuICAgIGNvbnN0IGNhbnZhcyA9IHBsdWdpbi5nZXRDdXJyZW50Q2FudmFzKClcclxuICAgIGlmIChjaGVja2luZykgcmV0dXJuIGNhbnZhcyAhPT0gbnVsbCAmJiBjaGVjayhjYW52YXMpXHJcblxyXG4gICAgaWYgKGNhbnZhcykgcnVuKGNhbnZhcylcclxuXHJcbiAgICByZXR1cm4gdHJ1ZVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBNZW51T3B0aW9uIHtcclxuICBpZD86IHN0cmluZ1xyXG4gIGxhYmVsOiBzdHJpbmdcclxuICBpY29uOiBzdHJpbmdcclxuICBjYWxsYmFjaz86ICgpID0+IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVF1aWNrU2V0dGluZ3NCdXR0b24obWVudU9wdGlvbjogTWVudU9wdGlvbik6IEhUTUxFbGVtZW50IHtcclxuICBjb25zdCBxdWlja1NldHRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gIGlmIChtZW51T3B0aW9uLmlkKSBxdWlja1NldHRpbmcuaWQgPSBtZW51T3B0aW9uLmlkXHJcbiAgcXVpY2tTZXR0aW5nLmNsYXNzTGlzdC5hZGQoJ2NhbnZhcy1jb250cm9sLWl0ZW0nKVxyXG4gIHNldEljb24ocXVpY2tTZXR0aW5nLCBtZW51T3B0aW9uLmljb24pXHJcbiAgc2V0VG9vbHRpcChxdWlja1NldHRpbmcsIG1lbnVPcHRpb24ubGFiZWwsIHsgcGxhY2VtZW50OiAnbGVmdCcgfSlcclxuICBxdWlja1NldHRpbmcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBtZW51T3B0aW9uLmNhbGxiYWNrPy4oKSlcclxuXHJcbiAgcmV0dXJuIHF1aWNrU2V0dGluZ1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkUXVpY2tTZXR0aW5nc0J1dHRvbihjb250cm9sR3JvdXA6IEhUTUxFbGVtZW50LCBlbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG4gIGlmIChlbGVtZW50LmlkKSBjb250cm9sR3JvdXAucXVlcnlTZWxlY3RvcihgIyR7ZWxlbWVudC5pZH1gKT8ucmVtb3ZlKClcclxuICBjb250cm9sR3JvdXAuYXBwZW5kQ2hpbGQoZWxlbWVudClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhcmRNZW51T3B0aW9uKGNhbnZhczogQ2FudmFzLCBtZW51T3B0aW9uOiBNZW51T3B0aW9uLCBwcmV2aWV3Tm9kZVNpemU6ICgpID0+IFNpemUsIG9uUGxhY2VkOiAoY2FudmFzOiBDYW52YXMsIHBvczogUG9zaXRpb24pID0+IHZvaWQpOiBIVE1MRWxlbWVudCB7XHJcbiAgY29uc3QgbWVudU9wdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gIGlmIChtZW51T3B0aW9uLmlkKSBtZW51T3B0aW9uRWxlbWVudC5pZCA9IG1lbnVPcHRpb24uaWRcclxuICBtZW51T3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjYW52YXMtY2FyZC1tZW51LWJ1dHRvbicpXHJcbiAgbWVudU9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbW9kLWRyYWdnYWJsZScpXHJcbiAgc2V0SWNvbihtZW51T3B0aW9uRWxlbWVudCwgbWVudU9wdGlvbi5pY29uKVxyXG4gIHNldFRvb2x0aXAobWVudU9wdGlvbkVsZW1lbnQsIG1lbnVPcHRpb24ubGFiZWwsIHsgcGxhY2VtZW50OiAndG9wJyB9KVxyXG5cclxuICBtZW51T3B0aW9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChfZSkgPT4ge1xyXG4gICAgb25QbGFjZWQoY2FudmFzLCBnZXRDZW50ZXJDb29yZGluYXRlcyhjYW52YXMsIHByZXZpZXdOb2RlU2l6ZSgpKSlcclxuICB9KVxyXG5cclxuICBtZW51T3B0aW9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIChlKSA9PiB7XHJcbiAgICBjYW52YXMuZHJhZ1RlbXBOb2RlKGUsIHByZXZpZXdOb2RlU2l6ZSgpLCAocG9zOiBQb3NpdGlvbikgPT4ge1xyXG4gICAgICBjYW52YXMuZGVzZWxlY3RBbGwoKVxyXG4gICAgICBvblBsYWNlZChjYW52YXMsIHBvcylcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgcmV0dXJuIG1lbnVPcHRpb25FbGVtZW50XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRDYXJkTWVudU9wdGlvbihjYW52YXM6IENhbnZhcywgZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuICBpZiAoZWxlbWVudC5pZCkgY2FudmFzPy5jYXJkTWVudUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2VsZW1lbnQuaWR9YCk/LnJlbW92ZSgpXHJcbiAgY2FudmFzPy5jYXJkTWVudUVsLmFwcGVuZENoaWxkKGVsZW1lbnQpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQb3B1cE1lbnVPcHRpb24obWVudU9wdGlvbjogTWVudU9wdGlvbik6IEhUTUxFbGVtZW50IHtcclxuICBjb25zdCBtZW51T3B0aW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXHJcbiAgaWYgKG1lbnVPcHRpb24uaWQpIG1lbnVPcHRpb25FbGVtZW50LmlkID0gbWVudU9wdGlvbi5pZFxyXG4gIG1lbnVPcHRpb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NsaWNrYWJsZS1pY29uJylcclxuICBzZXRJY29uKG1lbnVPcHRpb25FbGVtZW50LCBtZW51T3B0aW9uLmljb24pXHJcbiAgc2V0VG9vbHRpcChtZW51T3B0aW9uRWxlbWVudCwgbWVudU9wdGlvbi5sYWJlbCwgeyBwbGFjZW1lbnQ6ICd0b3AnIH0pXHJcbiAgbWVudU9wdGlvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBtZW51T3B0aW9uLmNhbGxiYWNrPy4oKSlcclxuXHJcbiAgcmV0dXJuIG1lbnVPcHRpb25FbGVtZW50XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFeHBhbmRhYmxlUG9wdXBNZW51T3B0aW9uKG1lbnVPcHRpb246IE1lbnVPcHRpb24sIHN1Yk1lbnVPcHRpb25zOiBNZW51T3B0aW9uW10pOiBIVE1MRWxlbWVudCB7XHJcbiAgY29uc3QgbWVudU9wdGlvbkVsZW1lbnQgPSBjcmVhdGVQb3B1cE1lbnVPcHRpb24oe1xyXG4gICAgLi4ubWVudU9wdGlvbixcclxuICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN1Ym1lbnVJZCA9IGAke21lbnVPcHRpb24uaWR9LXN1Ym1lbnVgXHJcblxyXG4gICAgICBpZiAobWVudU9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1hY3RpdmUnKSkge1xyXG4gICAgICAgIG1lbnVPcHRpb25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpXHJcbiAgICAgICAgbWVudU9wdGlvbkVsZW1lbnQucGFyZW50RWxlbWVudD8ucXVlcnlTZWxlY3RvcihgIyR7c3VibWVudUlkfWApPy5yZW1vdmUoKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgICB9XHJcblxyXG4gICAgICBtZW51T3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKVxyXG5cclxuICAgICAgLy8gQWRkIHBvcHVwIG1lbnVcclxuICAgICAgY29uc3Qgc3VibWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgIHN1Ym1lbnUuaWQgPSBzdWJtZW51SWRcclxuICAgICAgc3VibWVudS5jbGFzc0xpc3QuYWRkKCdjYW52YXMtc3VibWVudScpXHJcbiAgICBcclxuICAgICAgLy8gQWRkIG5lc3RlZCBvcHRpb25zXHJcbiAgICAgIGZvciAoY29uc3Qgc3ViTWVudU9wdGlvbiBvZiBzdWJNZW51T3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IHN1Yk1lbnVPcHRpb25FbGVtZW50ID0gY3JlYXRlUG9wdXBNZW51T3B0aW9uKHN1Yk1lbnVPcHRpb24pXHJcbiAgICAgICAgc3VibWVudS5hcHBlbmRDaGlsZChzdWJNZW51T3B0aW9uRWxlbWVudClcclxuICAgICAgfVxyXG5cclxuICAgICAgbWVudU9wdGlvbkVsZW1lbnQucGFyZW50RWxlbWVudD8uYXBwZW5kQ2hpbGQoc3VibWVudSlcclxuICAgIH1cclxuICB9KVxyXG5cclxuICByZXR1cm4gbWVudU9wdGlvbkVsZW1lbnRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZFBvcHVwTWVudU9wdGlvbihjYW52YXM6IENhbnZhcywgZWxlbWVudDogSFRNTEVsZW1lbnQsIGluZGV4OiBudW1iZXIgPSAtMSkge1xyXG4gIGNvbnN0IHBvcHVwTWVudUVsID0gY2FudmFzPy5tZW51Py5tZW51RWxcclxuICBpZiAoIXBvcHVwTWVudUVsKSByZXR1cm5cclxuXHJcbiAgaWYgKGVsZW1lbnQuaWQpIHBvcHVwTWVudUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2VsZW1lbnQuaWR9YCk/LnJlbW92ZSgpXHJcblxyXG4gIGNvbnN0IHNpc3RlckVsZW1lbnQgPSBpbmRleCA+PSAwID8gcG9wdXBNZW51RWwuY2hpbGRyZW5baW5kZXhdIDogcG9wdXBNZW51RWwuY2hpbGRyZW5bcG9wdXBNZW51RWwuY2hpbGRyZW4ubGVuZ3RoICsgaW5kZXhdXHJcbiAgcG9wdXBNZW51RWwuaW5zZXJ0QWZ0ZXIoZWxlbWVudCwgc2lzdGVyRWxlbWVudClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENlbnRlckNvb3JkaW5hdGVzKGNhbnZhczogQ2FudmFzLCBub2RlU2l6ZTogU2l6ZSk6IFBvc2l0aW9uIHtcclxuICBjb25zdCB2aWV3Qm91bmRzID0gY2FudmFzLmdldFZpZXdwb3J0QkJveCgpXHJcblxyXG4gIHJldHVybiB7IFxyXG4gICAgeDogKHZpZXdCb3VuZHMubWluWCArIHZpZXdCb3VuZHMubWF4WCkgLyAyIC0gbm9kZVNpemUud2lkdGggLyAyLFxyXG4gICAgeTogKHZpZXdCb3VuZHMubWluWSArIHZpZXdCb3VuZHMubWF4WSkgLyAyIC0gbm9kZVNpemUuaGVpZ2h0IC8gMixcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRCQm94KGNhbnZhc05vZGVzOiAoQ2FudmFzTm9kZXxDYW52YXNOb2RlRGF0YSlbXSkge1xyXG4gIGxldCBtaW5YID0gSW5maW5pdHlcclxuICBsZXQgbWluWSA9IEluZmluaXR5XHJcbiAgbGV0IG1heFggPSAtSW5maW5pdHlcclxuICBsZXQgbWF4WSA9IC1JbmZpbml0eVxyXG5cclxuICBmb3IgKGNvbnN0IG5vZGUgb2YgY2FudmFzTm9kZXMpIHtcclxuICAgIGNvbnN0IG5vZGVEYXRhID0gbm9kZS5nZXREYXRhID8gbm9kZS5nZXREYXRhKCkgOiBub2RlXHJcblxyXG4gICAgbWluWCA9IE1hdGgubWluKG1pblgsIG5vZGVEYXRhLngpXHJcbiAgICBtaW5ZID0gTWF0aC5taW4obWluWSwgbm9kZURhdGEueSlcclxuICAgIG1heFggPSBNYXRoLm1heChtYXhYLCBub2RlRGF0YS54ICsgbm9kZURhdGEud2lkdGgpXHJcbiAgICBtYXhZID0gTWF0aC5tYXgobWF4WSwgbm9kZURhdGEueSArIG5vZGVEYXRhLmhlaWdodClcclxuICB9XHJcblxyXG4gIHJldHVybiB7IG1pblgsIG1pblksIG1heFgsIG1heFkgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gem9vbVRvQkJveChjYW52YXM6IENhbnZhcywgYmJveDogQkJveCkge1xyXG4gIGNvbnN0IFBBRERJTkdfQ09SUkVDVElPTl9GQUNUT1IgPSAxIC8gMS4xXHJcbiAgY29uc3Qgem9vbWVkQkJveCA9IEJCb3hIZWxwZXIuc2NhbGVCQm94KGJib3gsIFBBRERJTkdfQ09SUkVDVElPTl9GQUNUT1IpXHJcblxyXG4gIGNhbnZhcy56b29tVG9CYm94KHpvb21lZEJCb3gpXHJcbiAgXHJcbiAgLy8gQ2FsY3VsYXRlIHpvb20gZmFjdG9yIHdpdGhvdXQgY2xhbXBcclxuICBjb25zdCBzY2FsZUZhY3RvciA9IE1hdGgubWluKFxyXG4gICAgY2FudmFzLmNhbnZhc1JlY3Qud2lkdGggLyAoYmJveC5tYXhYIC0gYmJveC5taW5YKSxcclxuICAgIGNhbnZhcy5jYW52YXNSZWN0LmhlaWdodCAvIChiYm94Lm1heFkgLSBiYm94Lm1pblkpXHJcbiAgKVxyXG5cclxuICBjYW52YXMudFpvb20gPSBNYXRoLmxvZzIoc2NhbGVGYWN0b3IpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdHlsZURyb3Bkb3duTWVudShjYW52YXM6IENhbnZhcywgc3R5bGFibGVBdHRyaWJ1dGVzOiBTdHlsZUF0dHJpYnV0ZVtdLCBjdXJyZW50U3R5bGVBdHRyaWJ1dGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB8IG51bGwgfSwgc2V0U3R5bGVBdHRyaWJ1dGU6IChhdHRyaWJ1dGU6IFN0eWxlQXR0cmlidXRlLCB2YWx1ZTogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZCkge1xyXG4gIGNvbnN0IFNUWUxFX01FTlVfSUQgPSAnc3R5bGUtbWVudSdcclxuICBjb25zdCBTVFlMRV9NRU5VX0RST1BET1dOX0lEID0gJ3N0eWxlLW1lbnUtZHJvcGRvd24nXHJcbiAgY29uc3QgU1RZTEVfTUVOVV9EUk9QRE9XTl9TVUJNRU5VX0lEID0gJ3N0eWxlLW1lbnUtZHJvcGRvd24tc3VibWVudSdcclxuXHJcbiAgLy8gQ2hlY2sgaWYgcG9wdXAgbWVudSBleGlzdHNcclxuICBjb25zdCBwb3B1cE1lbnVFbGVtZW50ID0gY2FudmFzPy5tZW51Py5tZW51RWxcclxuICBpZiAoIXBvcHVwTWVudUVsZW1lbnQpIHJldHVyblxyXG4gIFxyXG4gIC8vIFJlbW92ZSBwcmV2aW91cyBzdHlsZSBtZW51XHJcbiAgcG9wdXBNZW51RWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtTVFlMRV9NRU5VX0lEfWApPy5yZW1vdmUoKVxyXG5cclxuICBjb25zdCBzdHlsZU1lbnVCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcclxuICBzdHlsZU1lbnVCdXR0b25FbGVtZW50LmlkID0gU1RZTEVfTUVOVV9JRFxyXG4gIHN0eWxlTWVudUJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2xpY2thYmxlLWljb24nKVxyXG5cclxuICBzZXRJY29uKHN0eWxlTWVudUJ1dHRvbkVsZW1lbnQsICdwYWludGJydXNoJylcclxuICBzZXRUb29sdGlwKHN0eWxlTWVudUJ1dHRvbkVsZW1lbnQsICdTdHlsZScsIHsgcGxhY2VtZW50OiAndG9wJyB9KVxyXG4gIFxyXG4gIC8vIEFkZCBzdHlsZSBtZW51IHRvIHBvcHVwIG1lbnVcclxuICBwb3B1cE1lbnVFbGVtZW50LmFwcGVuZENoaWxkKHN0eWxlTWVudUJ1dHRvbkVsZW1lbnQpXHJcblxyXG4gIC8vIEFkZCBjbGljayBldmVudFxyXG4gIHN0eWxlTWVudUJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBjb25zdCBpc09wZW4gPSBzdHlsZU1lbnVCdXR0b25FbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ2hhcy1hY3RpdmUtbWVudScpXHJcbiAgICBpZiAoIWlzT3Blbikge1xyXG4gICAgICBwb3B1cE1lbnVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke1NUWUxFX01FTlVfRFJPUERPV05fSUR9YCk/LnJlbW92ZSgpXHJcbiAgICAgIHBvcHVwTWVudUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7U1RZTEVfTUVOVV9EUk9QRE9XTl9TVUJNRU5VX0lEfWApPy5yZW1vdmUoKVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3R5bGVNZW51RHJvcGRvd25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5pZCA9IFNUWUxFX01FTlVfRFJPUERPV05fSURcclxuICAgIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtZW51JylcclxuXHJcbiAgICAvLyBQb3NpdGlvbiBjb3JyZWN0bHlcclxuICAgIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSdcclxuICAgIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSAnaW5pdGlhbCdcclxuXHJcbiAgICBzdHlsZU1lbnVEcm9wZG93bkVsZW1lbnQuc3R5bGUudG9wID0gYCR7cG9wdXBNZW51RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHR9cHhgXHJcblxyXG4gICAgY29uc3QgY2FudmFzV3JhcHBlckNlbnRlclggPSBjYW52YXMud3JhcHBlckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgKyBjYW52YXMud3JhcHBlckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIC8gMlxyXG5cclxuICAgIGNvbnN0IGxlZnRQb3NpdGlvbiA9IHN0eWxlTWVudUJ1dHRvbkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtIHBvcHVwTWVudUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdFxyXG4gICAgY29uc3QgcmlnaHRQb3NpdGlvbiA9IHBvcHVwTWVudUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQgLSBzdHlsZU1lbnVCdXR0b25FbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0XHJcblxyXG4gICAgLy8gU3dhcCBzaWRlcyBpZiBpdCBpcyB0b28gY2xvc2UgdG8gdGhlIGVkZ2VcclxuICAgIGlmIChwb3B1cE1lbnVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgKyBsZWZ0UG9zaXRpb24gPCBjYW52YXNXcmFwcGVyQ2VudGVyWClcclxuICAgICAgc3R5bGVNZW51RHJvcGRvd25FbGVtZW50LnN0eWxlLmxlZnQgPSBgJHtsZWZ0UG9zaXRpb259cHhgXHJcbiAgICBlbHNlIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5zdHlsZS5yaWdodCA9IGAke3JpZ2h0UG9zaXRpb259cHhgXHJcblxyXG4gICAgLy8gQWRkIHN0eWxlIG9wdGlvbnNcclxuICAgIGZvciAoY29uc3Qgc3R5bGFibGVBdHRyaWJ1dGUgb2Ygc3R5bGFibGVBdHRyaWJ1dGVzKSB7XHJcbiAgICAgIGNvbnN0IHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgIHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtZW51LWl0ZW0nKVxyXG4gICAgICBzdHlsYWJsZUF0dHJpYnV0ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndGFwcGFibGUnKVxyXG5cclxuICAgICAgLy8gQWRkIGljb25cclxuICAgICAgY29uc3QgaWNvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICBpY29uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtZW51LWl0ZW0taWNvbicpXHJcblxyXG4gICAgICBjb25zdCBzZWxlY3RlZFN0eWxlID0gc3R5bGFibGVBdHRyaWJ1dGUub3B0aW9uc1xyXG4gICAgICAgIC5maW5kKG9wdGlvbiA9PiBjdXJyZW50U3R5bGVBdHRyaWJ1dGVzW3N0eWxhYmxlQXR0cmlidXRlLmRhdGFzZXRLZXldID09PSBvcHRpb24udmFsdWUpID8/XHJcbiAgICAgICAgc3R5bGFibGVBdHRyaWJ1dGUub3B0aW9ucy5maW5kKHZhbHVlID0+IHZhbHVlLnZhbHVlID09PSBudWxsKSEhXHJcbiAgICAgIHNldEljb24oaWNvbkVsZW1lbnQsIHNlbGVjdGVkU3R5bGUuaWNvbilcclxuXHJcbiAgICAgIHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5hcHBlbmRDaGlsZChpY29uRWxlbWVudClcclxuXHJcbiAgICAgIC8vIEFkZCBsYWJlbFxyXG4gICAgICBjb25zdCBsYWJlbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICBsYWJlbEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbWVudS1pdGVtLXRpdGxlJylcclxuICAgICAgbGFiZWxFbGVtZW50LnRleHRDb250ZW50ID0gc3R5bGFibGVBdHRyaWJ1dGUubGFiZWxcclxuICAgICAgc3R5bGFibGVBdHRyaWJ1dGVFbGVtZW50LmFwcGVuZENoaWxkKGxhYmVsRWxlbWVudClcclxuXHJcbiAgICAgIC8vIEFkZCBleHBhbmQgaWNvblxyXG4gICAgICBjb25zdCBleHBhbmRJY29uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgIGV4cGFuZEljb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21lbnUtaXRlbS1pY29uJylcclxuICAgICAgc2V0SWNvbihleHBhbmRJY29uRWxlbWVudCwgJ2NoZXZyb24tcmlnaHQnKVxyXG4gICAgICBzdHlsYWJsZUF0dHJpYnV0ZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZXhwYW5kSWNvbkVsZW1lbnQpXHJcblxyXG4gICAgICAvLyBBcHBlbmQgdG8gZHJvcGRvd25cclxuICAgICAgc3R5bGVNZW51RHJvcGRvd25FbGVtZW50LmFwcGVuZENoaWxkKHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudClcclxuXHJcbiAgICAgIC8vIEFkZCBob3ZlciBlZmZlY3RcclxuICAgICAgc3R5bGFibGVBdHRyaWJ1dGVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJlbnRlcicsICgpID0+IHtcclxuICAgICAgICBzdHlsYWJsZUF0dHJpYnV0ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgc3R5bGFibGVBdHRyaWJ1dGVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJsZWF2ZScsICgpID0+IHtcclxuICAgICAgICBzdHlsYWJsZUF0dHJpYnV0ZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgLy8gQWRkIGNsaWNrIGV2ZW50XHJcbiAgICAgIHN0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAvLyBSZW1vdmUgcHJldmlvdXMgc3VibWVudVxyXG4gICAgICAgIHBvcHVwTWVudUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7U1RZTEVfTUVOVV9EUk9QRE9XTl9TVUJNRU5VX0lEfWApPy5yZW1vdmUoKVxyXG5cclxuICAgICAgICBjb25zdCBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVFbGVtZW50LmlkID0gU1RZTEVfTUVOVV9EUk9QRE9XTl9TVUJNRU5VX0lEXHJcbiAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtZW51JylcclxuICAgIFxyXG4gICAgICAgIC8vIFBvc2l0aW9uIGNvcnJlY3RseVxyXG4gICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnXHJcbiAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51RWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSAnaW5pdGlhbCdcclxuXHJcbiAgICAgICAgY29uc3QgdG9wT2Zmc2V0ID0gcGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShzdHlsZU1lbnVEcm9wZG93bkVsZW1lbnQpLmdldFByb3BlcnR5VmFsdWUoJ3BhZGRpbmctdG9wJykpICsgKHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5vZmZzZXRIZWlnaHQgLSBzdHlsZU1lbnVEcm9wZG93bkVsZW1lbnQuY2xpZW50SGVpZ2h0KSAvIDJcclxuICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVFbGVtZW50LnN0eWxlLnRvcCA9IGAke3N0eWxhYmxlQXR0cmlidXRlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSB0b3BPZmZzZXQgLSBwb3B1cE1lbnVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcH1weGBcclxuXHJcbiAgICAgICAgLy8gU3dhcCBzaWRlcyBpZiBpdCBpcyB0b28gY2xvc2UgdG8gdGhlIGVkZ2VcclxuICAgICAgICBjb25zdCBsZWZ0UG9zaXRpb24gPSBzdHlsZU1lbnVEcm9wZG93bkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQgLSBwb3B1cE1lbnVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnRcclxuICAgICAgICBjb25zdCByaWdodFBvc2l0aW9uID0gcG9wdXBNZW51RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCAtIHN0eWxlTWVudURyb3Bkb3duRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0XHJcblxyXG4gICAgICAgIC8vIFN3YXAgc2lkZXMgaWYgaXQgaXMgdG9vIGNsb3NlIHRvIHRoZSBlZGdlXHJcbiAgICAgICAgaWYgKHBvcHVwTWVudUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCArIGxlZnRQb3NpdGlvbiA8IGNhbnZhc1dyYXBwZXJDZW50ZXJYKVxyXG4gICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51RWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7bGVmdFBvc2l0aW9ufXB4YFxyXG4gICAgICAgIGVsc2Ugc3R5bGVNZW51RHJvcGRvd25TdWJtZW51RWxlbWVudC5zdHlsZS5yaWdodCA9IGAke3JpZ2h0UG9zaXRpb259cHhgXHJcblxyXG4gICAgICAgIC8vIEFkZCBzdHlsZSBvcHRpb25zXHJcbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBzdHlsYWJsZUF0dHJpYnV0ZS5vcHRpb25zKSB7XHJcbiAgICAgICAgICBjb25zdCBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudU9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbWVudS1pdGVtJylcclxuICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudU9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndGFwcGFibGUnKVxyXG5cclxuICAgICAgICAgIC8vIEFkZCBpY29uXHJcbiAgICAgICAgICBjb25zdCBzdWJtZW51SWNvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgICAgc3VibWVudUljb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21lbnUtaXRlbS1pY29uJylcclxuICAgICAgICAgIHNldEljb24oc3VibWVudUljb25FbGVtZW50LCB2YWx1ZS5pY29uKVxyXG4gICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51T3B0aW9uRWxlbWVudC5hcHBlbmRDaGlsZChzdWJtZW51SWNvbkVsZW1lbnQpXHJcblxyXG4gICAgICAgICAgLy8gQWRkIGxhYmVsXHJcbiAgICAgICAgICBjb25zdCBzdWJtZW51TGFiZWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICAgIHN1Ym1lbnVMYWJlbEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbWVudS1pdGVtLXRpdGxlJylcclxuICAgICAgICAgIHN1Ym1lbnVMYWJlbEVsZW1lbnQudGV4dENvbnRlbnQgPSB2YWx1ZS5sYWJlbFxyXG4gICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51T3B0aW9uRWxlbWVudC5hcHBlbmRDaGlsZChzdWJtZW51TGFiZWxFbGVtZW50KVxyXG5cclxuICAgICAgICAgIC8vIEFkZCBzZWxlY3RlZCBpY29uXHJcbiAgICAgICAgICBpZiAoc2VsZWN0ZWRTdHlsZSA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51T3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtb2Qtc2VsZWN0ZWQnKVxyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJY29uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgICAgIHNlbGVjdGVkSWNvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbWVudS1pdGVtLWljb24nKVxyXG4gICAgICAgICAgICBzZWxlY3RlZEljb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21vZC1zZWxlY3RlZCcpXHJcblxyXG4gICAgICAgICAgICBzZXRJY29uKHNlbGVjdGVkSWNvbkVsZW1lbnQsICdjaGVjaycpXHJcbiAgICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudU9wdGlvbkVsZW1lbnQuYXBwZW5kQ2hpbGQoc2VsZWN0ZWRJY29uRWxlbWVudClcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBBZGQgdG8gZHJvcGRvd24gc3VibWVudVxyXG4gICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51RWxlbWVudC5hcHBlbmRDaGlsZChzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50KVxyXG5cclxuICAgICAgICAgIC8vIEFkZCBob3ZlciBlZmZlY3RcclxuICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudU9wdGlvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmVudGVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBzdHlsZU1lbnVEcm9wZG93blN1Ym1lbnVPcHRpb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJylcclxuICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgc3R5bGVNZW51RHJvcGRvd25TdWJtZW51T3B0aW9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybGVhdmUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudU9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKVxyXG4gICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAvLyBBZGQgY2xpY2sgZXZlbnRcclxuICAgICAgICAgIHN0eWxlTWVudURyb3Bkb3duU3VibWVudU9wdGlvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFNldCBzdHlsZSBhdHRyaWJ1dGVcclxuICAgICAgICAgICAgc2V0U3R5bGVBdHRyaWJ1dGUoc3R5bGFibGVBdHRyaWJ1dGUsIHZhbHVlLnZhbHVlKVxyXG5cclxuICAgICAgICAgICAgLy8gS2VlcCBjb3JyZWN0IHJlZmVyZW5jZVxyXG4gICAgICAgICAgICBjdXJyZW50U3R5bGVBdHRyaWJ1dGVzW3N0eWxhYmxlQXR0cmlidXRlLmRhdGFzZXRLZXldID0gdmFsdWUudmFsdWVcclxuXHJcbiAgICAgICAgICAgIC8vIENsb3NlIG1lbnVcclxuICAgICAgICAgICAgc3R5bGVNZW51QnV0dG9uRWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnY2xpY2snKSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBcHBlbmQgdG8gYm9keVxyXG4gICAgICAgIHBvcHVwTWVudUVsZW1lbnQuYXBwZW5kQ2hpbGQoc3R5bGVNZW51RHJvcGRvd25TdWJtZW51RWxlbWVudClcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvLyBBcHBlbmQgdG8gYm9keVxyXG4gICAgcG9wdXBNZW51RWxlbWVudC5hcHBlbmRDaGlsZChzdHlsZU1lbnVEcm9wZG93bkVsZW1lbnQpXHJcbiAgfSlcclxufSIsICJpbXBvcnQgeyBCQm94LCBDYW52YXNOb2RlRGF0YSwgUG9zaXRpb24sIFNpZGUgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbWJpbmVCQm94ZXMoYmJveGVzOiBCQm94W10pOiBCQm94IHtcclxuICBsZXQgbWluWCA9IEluZmluaXR5XHJcbiAgbGV0IG1pblkgPSBJbmZpbml0eVxyXG4gIGxldCBtYXhYID0gLUluZmluaXR5XHJcbiAgbGV0IG1heFkgPSAtSW5maW5pdHlcclxuXHJcbiAgZm9yIChsZXQgYmJveCBvZiBiYm94ZXMpIHtcclxuICAgIG1pblggPSBNYXRoLm1pbihtaW5YLCBiYm94Lm1pblgpXHJcbiAgICBtaW5ZID0gTWF0aC5taW4obWluWSwgYmJveC5taW5ZKVxyXG4gICAgbWF4WCA9IE1hdGgubWF4KG1heFgsIGJib3gubWF4WClcclxuICAgIG1heFkgPSBNYXRoLm1heChtYXhZLCBiYm94Lm1heFkpXHJcbiAgfVxyXG5cclxuICByZXR1cm4geyBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlQkJveChiYm94OiBCQm94LCBzY2FsZTogbnVtYmVyKTogQkJveCB7XHJcbiAgbGV0IGRpZmZYID0gKHNjYWxlIC0gMSkgKiAoYmJveC5tYXhYIC0gYmJveC5taW5YKVxyXG4gIGxldCBkaWZmWSA9IChzY2FsZSAtIDEpICogKGJib3gubWF4WSAtIGJib3gubWluWSlcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIG1pblg6IGJib3gubWluWCAtIGRpZmZYIC8gMixcclxuICAgIG1heFg6IGJib3gubWF4WCArIGRpZmZYIC8gMixcclxuICAgIG1pblk6IGJib3gubWluWSAtIGRpZmZZIC8gMixcclxuICAgIG1heFk6IGJib3gubWF4WSArIGRpZmZZIC8gMlxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluc2lkZUJCb3gocG9zaXRpb246IFBvc2l0aW9ufEJCb3gsIGJib3g6IEJCb3gsIGNhblRvdWNoRWRnZTogQm9vbGVhbik6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHByb3ZpZGVkQkJveCA9IHtcclxuICAgIG1pblg6IChwb3NpdGlvbiBhcyBCQm94KS5taW5YID8/IChwb3NpdGlvbiBhcyBQb3NpdGlvbikueCxcclxuICAgIG1pblk6IChwb3NpdGlvbiBhcyBCQm94KS5taW5ZID8/IChwb3NpdGlvbiBhcyBQb3NpdGlvbikueSxcclxuICAgIG1heFg6IChwb3NpdGlvbiBhcyBCQm94KS5tYXhYID8/IChwb3NpdGlvbiBhcyBQb3NpdGlvbikueCxcclxuICAgIG1heFk6IChwb3NpdGlvbiBhcyBCQm94KS5tYXhZID8/IChwb3NpdGlvbiBhcyBQb3NpdGlvbikueVxyXG4gIH1cclxuICBcclxuICByZXR1cm4gY2FuVG91Y2hFZGdlID8gcHJvdmlkZWRCQm94Lm1pblggPj0gYmJveC5taW5YICYmIHByb3ZpZGVkQkJveC5tYXhYIDw9IGJib3gubWF4WCAmJiBwcm92aWRlZEJCb3gubWluWSA+PSBiYm94Lm1pblkgJiYgcHJvdmlkZWRCQm94Lm1heFkgPD0gYmJveC5tYXhZIDpcclxuICAgIHByb3ZpZGVkQkJveC5taW5YID4gYmJveC5taW5YICYmIHByb3ZpZGVkQkJveC5tYXhYIDwgYmJveC5tYXhYICYmIHByb3ZpZGVkQkJveC5taW5ZID4gYmJveC5taW5ZICYmIHByb3ZpZGVkQkJveC5tYXhZIDwgYmJveC5tYXhZXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlbmxhcmdlQkJveChiYm94OiBCQm94LCBwYWRkaW5nOiBudW1iZXIpOiBCQm94IHtcclxuICByZXR1cm4ge1xyXG4gICAgbWluWDogYmJveC5taW5YIC0gcGFkZGluZyxcclxuICAgIG1pblk6IGJib3gubWluWSAtIHBhZGRpbmcsXHJcbiAgICBtYXhYOiBiYm94Lm1heFggKyBwYWRkaW5nLFxyXG4gICAgbWF4WTogYmJveC5tYXhZICsgcGFkZGluZ1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1vdmVJbkRpcmVjdGlvbihwb3NpdGlvbjogUG9zaXRpb24sIHNpZGU6IFNpZGUsIGRpc3RhbmNlOiBudW1iZXIpOiBQb3NpdGlvbiB7XHJcbiAgc3dpdGNoIChzaWRlKSB7XHJcbiAgICBjYXNlICd0b3AnOlxyXG4gICAgICByZXR1cm4geyB4OiBwb3NpdGlvbi54LCB5OiBwb3NpdGlvbi55IC0gZGlzdGFuY2UgfVxyXG4gICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICByZXR1cm4geyB4OiBwb3NpdGlvbi54ICsgZGlzdGFuY2UsIHk6IHBvc2l0aW9uLnkgfVxyXG4gICAgY2FzZSAnYm90dG9tJzpcclxuICAgICAgcmV0dXJuIHsgeDogcG9zaXRpb24ueCwgeTogcG9zaXRpb24ueSArIGRpc3RhbmNlIH1cclxuICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICByZXR1cm4geyB4OiBwb3NpdGlvbi54IC0gZGlzdGFuY2UsIHk6IHBvc2l0aW9uLnkgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENlbnRlck9mQkJveFNpZGUoYmJveDogQkJveCwgc2lkZTogU2lkZSk6IFBvc2l0aW9uIHtcclxuICBzd2l0Y2ggKHNpZGUpIHtcclxuICAgIGNhc2UgJ3RvcCc6XHJcbiAgICAgIHJldHVybiB7IHg6IChiYm94Lm1pblggKyBiYm94Lm1heFgpIC8gMiwgeTogYmJveC5taW5ZIH1cclxuICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgcmV0dXJuIHsgeDogYmJveC5tYXhYLCB5OiAoYmJveC5taW5ZICsgYmJveC5tYXhZKSAvIDIgfVxyXG4gICAgY2FzZSAnYm90dG9tJzpcclxuICAgICAgcmV0dXJuIHsgeDogKGJib3gubWluWCArIGJib3gubWF4WCkgLyAyLCB5OiBiYm94Lm1heFkgfVxyXG4gICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgIHJldHVybiB7IHg6IGJib3gubWluWCwgeTogKGJib3gubWluWSArIGJib3gubWF4WSkgLyAyIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTaWRlVmVjdG9yKHNpZGU/OiBTaWRlKTogUG9zaXRpb24ge1xyXG4gIHN3aXRjaCAoc2lkZSkge1xyXG4gICAgY2FzZSAndG9wJzpcclxuICAgICAgcmV0dXJuIHsgeDogMCwgeTogMSB9XHJcbiAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgIHJldHVybiB7IHg6IDEsIHk6IDAgfVxyXG4gICAgY2FzZSAnYm90dG9tJzpcclxuICAgICAgcmV0dXJuIHsgeDogMCwgeTogLTEgfVxyXG4gICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgIHJldHVybiB7IHg6IC0xLCB5OiAwIH1cclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJldHVybiB7IHg6IDAsIHk6IDAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJib3hGcm9tTm9kZURhdGEobm9kZURhdGE6IENhbnZhc05vZGVEYXRhKTogQkJveCB7XHJcbiAgcmV0dXJuIHtcclxuICAgIG1pblg6IG5vZGVEYXRhLngsXHJcbiAgICBtaW5ZOiBub2RlRGF0YS55LFxyXG4gICAgbWF4WDogbm9kZURhdGEueCArIG5vZGVEYXRhLndpZHRoLFxyXG4gICAgbWF4WTogbm9kZURhdGEueSArIG5vZGVEYXRhLmhlaWdodFxyXG4gIH1cclxufSIsICJpbXBvcnQgQWR2YW5jZWRDYW52YXNQbHVnaW4gZnJvbSBcInNyYy9tYWluXCJcclxuaW1wb3J0IHsgQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5ncyB9IGZyb20gXCJzcmMvc2V0dGluZ3NcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luXHJcblxyXG4gIGFic3RyYWN0IGlzRW5hYmxlZCgpOiBib29sZWFuIHwga2V5b2YgQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5nc1xyXG4gIGFic3RyYWN0IGluaXQoKTogdm9pZFxyXG5cclxuICBjb25zdHJ1Y3RvcihwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luKSB7XHJcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxyXG5cclxuICAgIGNvbnN0IGlzRW5hYmxlZCA9IHRoaXMuaXNFbmFibGVkKClcclxuICAgIFxyXG4gICAgaWYgKCEoaXNFbmFibGVkID09PSB0cnVlIHx8IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoaXNFbmFibGVkIGFzIGFueSkpKSByZXR1cm5cclxuXHJcbiAgICB0aGlzLmluaXQoKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMsIFBvc2l0aW9uIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0ICogYXMgQ2FudmFzSGVscGVyIGZyb20gXCJzcmMvdXRpbHMvY2FudmFzLWhlbHBlclwiXHJcbmltcG9ydCBBZHZhbmNlZENhbnZhc1BsdWdpbiBmcm9tIFwic3JjL21haW5cIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuY29uc3QgR1JPVVBfTk9ERV9TSVpFID0geyB3aWR0aDogMzAwLCBoZWlnaHQ6IDMwMCB9XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHcm91cENhbnZhc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gdHJ1ZSB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkNhbnZhc0NoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcykgPT4ge1xyXG4gICAgICAgIENhbnZhc0hlbHBlci5hZGRDYXJkTWVudU9wdGlvbihcclxuICAgICAgICAgIGNhbnZhcyxcclxuICAgICAgICAgIENhbnZhc0hlbHBlci5jcmVhdGVDYXJkTWVudU9wdGlvbihcclxuICAgICAgICAgICAgY2FudmFzLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgaWQ6ICdjcmVhdGUtZ3JvdXAnLFxyXG4gICAgICAgICAgICAgIGxhYmVsOiAnRHJhZyB0byBhZGQgZ3JvdXAnLFxyXG4gICAgICAgICAgICAgIGljb246ICdncm91cCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKCkgPT4gR1JPVVBfTk9ERV9TSVpFLFxyXG4gICAgICAgICAgICAoY2FudmFzOiBDYW52YXMsIHBvczogUG9zaXRpb24pID0+IHtcclxuICAgICAgICAgICAgICBjYW52YXMuY3JlYXRlR3JvdXBOb2RlKHtcclxuICAgICAgICAgICAgICAgIHBvczogcG9zLFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogR1JPVVBfTk9ERV9TSVpFXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgKSlcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgTWVudSwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nXHJcbmltcG9ydCB7IEJCb3gsIENhbnZhcywgQ2FudmFzRWRnZSwgQ2FudmFzRWxlbWVudCwgQ2FudmFzTm9kZSwgUG9zaXRpb24sIFNpemUgfSBmcm9tICdzcmMvQHR5cGVzL0NhbnZhcydcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tICdzcmMvY29yZS9ldmVudHMnXHJcbmltcG9ydCAqIGFzIENhbnZhc0hlbHBlciBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5pbXBvcnQgKiBhcyBCQm94SGVscGVyIGZyb20gXCJzcmMvdXRpbHMvYmJveC1oZWxwZXJcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gJy4uL2NvcmUvY2FudmFzLWV4dGVuc2lvbidcclxuXHJcbmNvbnN0IFNUQVJUX1NMSURFX05BTUUgPSAnU3RhcnQgU2xpZGUnXHJcbmNvbnN0IERFRkFVTFRfU0xJREVfTkFNRSA9ICdOZXcgU2xpZGUnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcmVzZW50YXRpb25DYW52YXNFeHRlbnNpb24gZXh0ZW5kcyBDYW52YXNFeHRlbnNpb24ge1xyXG4gIHNhdmVkVmlld3BvcnQ6IGFueSA9IG51bGxcclxuICBpc1ByZXNlbnRhdGlvbk1vZGU6IGJvb2xlYW4gPSBmYWxzZVxyXG4gIHZpc2l0ZWROb2RlczogYW55W10gPSBbXVxyXG4gIGZ1bGxzY3JlZW5Nb2RhbE9ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGxcclxuXHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gJ3ByZXNlbnRhdGlvbkZlYXR1cmVFbmFibGVkJyBhcyBjb25zdCB9XHJcbiAgXHJcbiAgaW5pdCgpIHtcclxuICAgIC8qIEFkZCB3cmFwIGluIHNsaWRlIG9wdGlvbiB0byBjb250ZXh0IG1lbnUgKi9cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgJ2NhbnZhczpzZWxlY3Rpb24tbWVudScsXHJcbiAgICAgIChtZW51OiBNZW51LCBjYW52YXM6IENhbnZhcykgPT4ge1xyXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cclxuICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgLnNldFRpdGxlKCdXcmFwIGluIHNsaWRlJylcclxuICAgICAgICAgICAgLnNldEljb24oJ2dhbGxlcnktdmVydGljYWwnKVxyXG4gICAgICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLmFkZFNsaWRlKGNhbnZhcywgdW5kZWZpbmVkLCBcclxuICAgICAgICAgICAgICBCQm94SGVscGVyLmVubGFyZ2VCQm94KEJCb3hIZWxwZXIuY29tYmluZUJCb3hlcyhcclxuICAgICAgICAgICAgICAgIFsuLi5jYW52YXMuc2VsZWN0aW9uLnZhbHVlcygpXS5tYXAoKGVsZW1lbnQ6IENhbnZhc0VsZW1lbnQpID0+IGVsZW1lbnQuZ2V0QkJveCgpKVxyXG4gICAgICAgICAgICAgICksIHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ3dyYXBJblNsaWRlUGFkZGluZycpKVxyXG4gICAgICAgICAgICApKVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICdjcmVhdGUtbmV3LXNsaWRlJyxcclxuXHRcdFx0bmFtZTogJ0NyZWF0ZSBuZXcgc2xpZGUnLFxyXG5cdFx0XHRjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+ICFjYW52YXMucmVhZG9ubHkgJiYgIXRoaXMuaXNQcmVzZW50YXRpb25Nb2RlLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5hZGRTbGlkZShjYW52YXMpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnc2V0LXN0YXJ0LW5vZGUnLFxyXG5cdFx0XHRuYW1lOiAnU2V0IHN0YXJ0IG5vZGUnLFxyXG5cdFx0XHRjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+ICFjYW52YXMucmVhZG9ubHkgJiYgIXRoaXMuaXNQcmVzZW50YXRpb25Nb2RlICYmIGNhbnZhcy5nZXRTZWxlY3Rpb25EYXRhKCkubm9kZXMubGVuZ3RoID09PSAxLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5zZXRTdGFydE5vZGUoY2FudmFzLCBjYW52YXMubm9kZXMuZ2V0KGNhbnZhcy5nZXRTZWxlY3Rpb25EYXRhKCkubm9kZXNbMF0uaWQpKVxyXG4gICAgICApXHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ3N0YXJ0LXByZXNlbnRhdGlvbicsXHJcbiAgICAgIG5hbWU6ICdTdGFydCBwcmVzZW50YXRpb24nLFxyXG4gICAgICBjaGVja0NhbGxiYWNrOiBDYW52YXNIZWxwZXIuY2FudmFzQ29tbWFuZChcclxuICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAoX2NhbnZhczogQ2FudmFzKSA9PiAhdGhpcy5pc1ByZXNlbnRhdGlvbk1vZGUsXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLnN0YXJ0UHJlc2VudGF0aW9uKGNhbnZhcylcclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICdjb250aW51ZS1wcmVzZW50YXRpb24nLFxyXG4gICAgICBuYW1lOiAnQ29udGludWUgcHJlc2VudGF0aW9uJyxcclxuICAgICAgY2hlY2tDYWxsYmFjazogQ2FudmFzSGVscGVyLmNhbnZhc0NvbW1hbmQoXHJcbiAgICAgICAgdGhpcy5wbHVnaW4sXHJcbiAgICAgICAgKF9jYW52YXM6IENhbnZhcykgPT4gIXRoaXMuaXNQcmVzZW50YXRpb25Nb2RlLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5zdGFydFByZXNlbnRhdGlvbihjYW52YXMsIHRydWUpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcbiAgICAgIGlkOiAnZW5kLXByZXNlbnRhdGlvbicsXHJcbiAgICAgIG5hbWU6ICdFbmQgcHJlc2VudGF0aW9uJyxcclxuICAgICAgY2hlY2tDYWxsYmFjazogQ2FudmFzSGVscGVyLmNhbnZhc0NvbW1hbmQoXHJcbiAgICAgICAgdGhpcy5wbHVnaW4sXHJcbiAgICAgICAgKF9jYW52YXM6IENhbnZhcykgPT4gdGhpcy5pc1ByZXNlbnRhdGlvbk1vZGUsXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLmVuZFByZXNlbnRhdGlvbihjYW52YXMpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcbiAgICAgIGlkOiAncHJldmlvdXMtbm9kZScsXHJcbiAgICAgIG5hbWU6ICdQcmV2aW91cyBub2RlJyxcclxuICAgICAgY2hlY2tDYWxsYmFjazogQ2FudmFzSGVscGVyLmNhbnZhc0NvbW1hbmQoXHJcbiAgICAgICAgdGhpcy5wbHVnaW4sXHJcbiAgICAgICAgKF9jYW52YXM6IENhbnZhcykgPT4gdGhpcy5pc1ByZXNlbnRhdGlvbk1vZGUsXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLnByZXZpb3VzTm9kZShjYW52YXMpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnbmV4dC1ub2RlJyxcclxuICAgICAgbmFtZTogJ05leHQgbm9kZScsXHJcbiAgICAgIGNoZWNrQ2FsbGJhY2s6IENhbnZhc0hlbHBlci5jYW52YXNDb21tYW5kKFxyXG4gICAgICAgIHRoaXMucGx1Z2luLFxyXG4gICAgICAgIChfY2FudmFzOiBDYW52YXMpID0+IHRoaXMuaXNQcmVzZW50YXRpb25Nb2RlLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5uZXh0Tm9kZShjYW52YXMpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgLy8gUmVnaXN0ZXIgZXZlbnRzXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkNhbnZhc0NoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5vbkNhbnZhc0NoYW5nZWQoY2FudmFzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LlBvcHVwTWVudUNyZWF0ZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5vblBvcHVwTWVudUNyZWF0ZWQoY2FudmFzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Lk5vZGVNb3ZlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSA9PiB0aGlzLm9uTm9kZU1vdmVkKGNhbnZhcywgbm9kZSlcclxuICAgICkpXHJcbiAgfVxyXG5cclxuICBvbkNhbnZhc0NoYW5nZWQoY2FudmFzOiBDYW52YXMpOiB2b2lkIHtcclxuICAgIENhbnZhc0hlbHBlci5hZGRDYXJkTWVudU9wdGlvbihcclxuICAgICAgY2FudmFzLFxyXG4gICAgICBDYW52YXNIZWxwZXIuY3JlYXRlQ2FyZE1lbnVPcHRpb24oXHJcbiAgICAgICAgY2FudmFzLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiAnbmV3LXNsaWRlJyxcclxuICAgICAgICAgIGxhYmVsOiAnRHJhZyB0byBhZGQgc2xpZGUnLFxyXG4gICAgICAgICAgaWNvbjogJ2dhbGxlcnktdmVydGljYWwnXHJcbiAgICAgICAgfSxcclxuICAgICAgICAoKSA9PiB0aGlzLmdldERlZmF1bHRTbGlkZVNpemUoKSxcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMsIHBvczogUG9zaXRpb24pID0+IHRoaXMuYWRkU2xpZGUoY2FudmFzLCBwb3MpXHJcbiAgICAgIClcclxuICAgIClcclxuICB9XHJcblxyXG4gIG9uUG9wdXBNZW51Q3JlYXRlZChjYW52YXM6IENhbnZhcyk6IHZvaWQge1xyXG4gICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdzaG93U2V0U3RhcnROb2RlSW5Qb3B1cCcpKSByZXR1cm5cclxuXHJcbiAgICAvLyBJZiB0aGUgY2FudmFzIGlzIHJlYWRvbmx5IG9yIHRoZXJlIGFyZSBtdWx0aXBsZS9ubyBub2RlcyBzZWxlY3RlZCwgcmV0dXJuXHJcbiAgICBjb25zdCBzZWxlY3RlZE5vZGVzRGF0YSA9IGNhbnZhcy5nZXRTZWxlY3Rpb25EYXRhKCkubm9kZXNcclxuICAgIGlmIChjYW52YXMucmVhZG9ubHkgfHwgc2VsZWN0ZWROb2Rlc0RhdGEubGVuZ3RoICE9PSAxIHx8IGNhbnZhcy5zZWxlY3Rpb24uc2l6ZSA+IDEpIHJldHVyblxyXG4gICAgXHJcbiAgICBjb25zdCBzZWxlY3RlZE5vZGUgPSBjYW52YXMubm9kZXMuZ2V0KHNlbGVjdGVkTm9kZXNEYXRhWzBdLmlkKVxyXG4gICAgaWYgKCFzZWxlY3RlZE5vZGUpIHJldHVyblxyXG4gICAgXHJcbiAgICBDYW52YXNIZWxwZXIuYWRkUG9wdXBNZW51T3B0aW9uKFxyXG4gICAgICBjYW52YXMsXHJcbiAgICAgIENhbnZhc0hlbHBlci5jcmVhdGVQb3B1cE1lbnVPcHRpb24oe1xyXG4gICAgICAgIGlkOiAnc3RhcnQtbm9kZScsIFxyXG4gICAgICAgIGxhYmVsOiAnU2V0IGFzIHN0YXJ0IHNsaWRlJywgXHJcbiAgICAgICAgaWNvbjogJ3BsYXknLCBcclxuICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5zZXRTdGFydE5vZGUoY2FudmFzLCBzZWxlY3RlZE5vZGUpXHJcbiAgICAgIH0pXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uTm9kZU1vdmVkKF9jYW52YXM6IENhbnZhcywgbm9kZTogQ2FudmFzTm9kZSkge1xyXG4gICAgY29uc3Qgbm9kZURhdGEgPSBub2RlLmdldERhdGEoKVxyXG4gICAgaWYgKCFub2RlRGF0YS5zaWRlUmF0aW8pIHJldHVyblxyXG5cclxuICAgIGNvbnN0IG5vZGVCQm94ID0gbm9kZS5nZXRCQm94KClcclxuICAgIGNvbnN0IG5vZGVTaXplID0ge1xyXG4gICAgICB3aWR0aDogbm9kZUJCb3gubWF4WCAtIG5vZGVCQm94Lm1pblgsXHJcbiAgICAgIGhlaWdodDogbm9kZUJCb3gubWF4WSAtIG5vZGVCQm94Lm1pbllcclxuICAgIH1cclxuICAgIGNvbnN0IG5vZGVBc3BlY3RSYXRpbyA9IG5vZGVTaXplLndpZHRoIC8gbm9kZVNpemUuaGVpZ2h0XHJcblxyXG4gICAgaWYgKG5vZGVBc3BlY3RSYXRpbyA8IG5vZGVEYXRhLnNpZGVSYXRpbylcclxuICAgICAgbm9kZVNpemUud2lkdGggPSBub2RlU2l6ZS5oZWlnaHQgKiBub2RlRGF0YS5zaWRlUmF0aW9cclxuICAgIGVsc2Ugbm9kZVNpemUuaGVpZ2h0ID0gbm9kZVNpemUud2lkdGggLyBub2RlRGF0YS5zaWRlUmF0aW9cclxuXHJcbiAgICBub2RlLnNldERhdGEoe1xyXG4gICAgICAuLi5ub2RlRGF0YSxcclxuICAgICAgd2lkdGg6IG5vZGVTaXplLndpZHRoLFxyXG4gICAgICBoZWlnaHQ6IG5vZGVTaXplLmhlaWdodFxyXG4gICAgfSlcclxuICB9XHJcbiAgXHJcbiAgcHJpdmF0ZSBnZXRTdGFydE5vZGUoY2FudmFzOiBDYW52YXMpOiBDYW52YXNOb2RlfHVuZGVmaW5lZCB7XHJcbiAgICBmb3IgKGNvbnN0IFtfLCBub2RlXSBvZiBjYW52YXMubm9kZXMpIHtcclxuICAgICAgaWYgKG5vZGUuZ2V0RGF0YSgpLmlzU3RhcnROb2RlKSByZXR1cm4gbm9kZVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB1bmRlZmluZWRcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0U3RhcnROb2RlKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlfHVuZGVmaW5lZCkge1xyXG4gICAgaWYgKCFub2RlKSByZXR1cm5cclxuXHJcbiAgICBjb25zdCBzdGFydE5vZGUgPSB0aGlzLmdldFN0YXJ0Tm9kZShjYW52YXMpXHJcbiAgICBpZiAoc3RhcnROb2RlKSBzdGFydE5vZGUuc2V0RGF0YSh7IC4uLnN0YXJ0Tm9kZS5nZXREYXRhKCksIGlzU3RhcnROb2RlOiBmYWxzZSB9KVxyXG5cclxuICAgIGlmIChub2RlICE9PSBzdGFydE5vZGUpIG5vZGUuc2V0RGF0YSh7IC4uLm5vZGUuZ2V0RGF0YSgpLCBpc1N0YXJ0Tm9kZTogdHJ1ZSB9LCB0cnVlKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXREZWZhdWx0U2xpZGVTaXplKCk6IFNpemUge1xyXG4gICAgY29uc3Qgc2xpZGVTaXplU3RyaW5nID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZGVmYXVsdFNsaWRlU2l6ZScpXHJcbiAgICBjb25zdCBzbGlkZVNpemVBcnJheSA9IHNsaWRlU2l6ZVN0cmluZy5zcGxpdCgneCcpLm1hcCgodmFsdWU6IHN0cmluZykgPT4gcGFyc2VJbnQodmFsdWUpKVxyXG4gICAgcmV0dXJuIHsgd2lkdGg6IHNsaWRlU2l6ZUFycmF5WzBdLCBoZWlnaHQ6IHNsaWRlU2l6ZUFycmF5WzFdIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0U2xpZGVBc3BlY3RSYXRpbygpOiBudW1iZXIge1xyXG4gICAgY29uc3Qgc2xpZGVTaXplID0gdGhpcy5nZXREZWZhdWx0U2xpZGVTaXplKClcclxuICAgIHJldHVybiBzbGlkZVNpemUud2lkdGggLyBzbGlkZVNpemUuaGVpZ2h0XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFkZFNsaWRlKGNhbnZhczogQ2FudmFzLCBwb3M/OiBQb3NpdGlvbiwgYmJveD86IEJCb3gpIHtcclxuICAgIGNvbnN0IGlzU3RhcnROb2RlID0gdGhpcy5nZXRTdGFydE5vZGUoY2FudmFzKSA9PSBudWxsXHJcbiAgICBjb25zdCBzbGlkZVNpemUgPSB0aGlzLmdldERlZmF1bHRTbGlkZVNpemUoKVxyXG4gICAgY29uc3Qgc2xpZGVBc3BlY3RSYXRpbyA9IHRoaXMuZ2V0U2xpZGVBc3BlY3RSYXRpbygpXHJcblxyXG4gICAgaWYgKGJib3gpIHtcclxuICAgICAgY29uc3QgYmJveFdpZHRoID0gYmJveC5tYXhYIC0gYmJveC5taW5YXHJcbiAgICAgIGNvbnN0IGJib3hIZWlnaHQgPSBiYm94Lm1heFkgLSBiYm94Lm1pbllcclxuXHJcbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgbm9kZXMgZml0IGluc2lkZSB0aGUgYm91bmRpbmcgYm94IHdoaWxlIGtlZXBpbmcgdGhlIGFzcGVjdCByYXRpb1xyXG4gICAgICBpZiAoYmJveFdpZHRoIC8gYmJveEhlaWdodCA+IHNsaWRlQXNwZWN0UmF0aW8pIHtcclxuICAgICAgICBzbGlkZVNpemUud2lkdGggPSBiYm94V2lkdGhcclxuICAgICAgICBzbGlkZVNpemUuaGVpZ2h0ID0gYmJveFdpZHRoIC8gc2xpZGVBc3BlY3RSYXRpb1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNsaWRlU2l6ZS5oZWlnaHQgPSBiYm94SGVpZ2h0XHJcbiAgICAgICAgc2xpZGVTaXplLndpZHRoID0gYmJveEhlaWdodCAqIHNsaWRlQXNwZWN0UmF0aW9cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcG9zID0geyBcclxuICAgICAgICB4OiBiYm94Lm1pblgsXHJcbiAgICAgICAgeTogYmJveC5taW5ZXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBubyBwb3NpdGlvbiBpcyBwcm92aWRlZCwgdXNlIHRoZSBjZW50ZXIgb2YgdGhlIGNhbnZhc1xyXG4gICAgaWYgKCFwb3MpIHBvcyA9IENhbnZhc0hlbHBlci5nZXRDZW50ZXJDb29yZGluYXRlcyhjYW52YXMsIHRoaXMuZ2V0RGVmYXVsdFNsaWRlU2l6ZSgpKVxyXG5cclxuICAgIGNvbnN0IGdyb3VwTm9kZSA9IGNhbnZhcy5jcmVhdGVHcm91cE5vZGUoe1xyXG4gICAgICBwb3M6IHBvcyxcclxuICAgICAgc2l6ZTogc2xpZGVTaXplLFxyXG4gICAgICBsYWJlbDogaXNTdGFydE5vZGUgPyBTVEFSVF9TTElERV9OQU1FIDogREVGQVVMVF9TTElERV9OQU1FLFxyXG4gICAgICBmb2N1czogZmFsc2UsXHJcbiAgICB9KVxyXG5cclxuICAgIGdyb3VwTm9kZS5zZXREYXRhKHsgXHJcbiAgICAgIC4uLmdyb3VwTm9kZS5nZXREYXRhKCksIFxyXG4gICAgICBzaWRlUmF0aW86IHNsaWRlQXNwZWN0UmF0aW8sXHJcbiAgICAgIGlzU3RhcnROb2RlOiBpc1N0YXJ0Tm9kZSA/IHRydWUgOiB1bmRlZmluZWQsXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBhbmltYXRlTm9kZVRyYW5zaXRpb24oY2FudmFzOiBDYW52YXMsIGZyb21Ob2RlOiBDYW52YXNOb2RlfHVuZGVmaW5lZCwgdG9Ob2RlOiBDYW52YXNOb2RlKSB7XHJcbiAgICBjb25zdCB1c2VDdXN0b21ab29tRnVuY3Rpb24gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCd6b29tVG9TbGlkZVdpdGhvdXRQYWRkaW5nJylcclxuICAgIGNvbnN0IGFuaW1hdGlvbkR1cmF0aW9uTXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdzbGlkZVRyYW5zaXRpb25BbmltYXRpb25EdXJhdGlvbicpICogMTAwMFxyXG4gICAgXHJcbiAgICBpZiAoYW5pbWF0aW9uRHVyYXRpb25NcyA+IDAgJiYgZnJvbU5vZGUpIHtcclxuICAgICAgY29uc3QgYW5pbWF0aW9uSW50ZW5zaXR5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnc2xpZGVUcmFuc2l0aW9uQW5pbWF0aW9uSW50ZW5zaXR5JylcclxuXHJcbiAgICAgIGNvbnN0IGN1cnJlbnROb2RlQkJveEVubGFyZ2VkID0gQkJveEhlbHBlci5zY2FsZUJCb3goZnJvbU5vZGUuZ2V0QkJveCgpLCBhbmltYXRpb25JbnRlbnNpdHkpXHJcbiAgICAgIGlmICh1c2VDdXN0b21ab29tRnVuY3Rpb24pIENhbnZhc0hlbHBlci56b29tVG9CQm94KGNhbnZhcywgY3VycmVudE5vZGVCQm94RW5sYXJnZWQpXHJcbiAgICAgIGVsc2UgY2FudmFzLnpvb21Ub0Jib3goY3VycmVudE5vZGVCQm94RW5sYXJnZWQpXHJcblxyXG4gICAgICBhd2FpdCBzbGVlcChhbmltYXRpb25EdXJhdGlvbk1zIC8gMilcclxuXHJcbiAgICAgIGNvbnN0IG5leHROb2RlQkJveEVubGFyZ2VkID0gQkJveEhlbHBlci5zY2FsZUJCb3godG9Ob2RlLmdldEJCb3goKSwgYW5pbWF0aW9uSW50ZW5zaXR5KVxyXG4gICAgICBpZiAodXNlQ3VzdG9tWm9vbUZ1bmN0aW9uKSBDYW52YXNIZWxwZXIuem9vbVRvQkJveChjYW52YXMsIG5leHROb2RlQkJveEVubGFyZ2VkKVxyXG4gICAgICBlbHNlIGNhbnZhcy56b29tVG9CYm94KG5leHROb2RlQkJveEVubGFyZ2VkKVxyXG5cclxuICAgICAgYXdhaXQgc2xlZXAoYW5pbWF0aW9uRHVyYXRpb25NcyAvIDIpXHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG5vZGVCQm94ID0gdG9Ob2RlLmdldEJCb3goKVxyXG4gICAgaWYgKHVzZUN1c3RvbVpvb21GdW5jdGlvbikgQ2FudmFzSGVscGVyLnpvb21Ub0JCb3goY2FudmFzLCBub2RlQkJveClcclxuICAgIGVsc2UgY2FudmFzLnpvb21Ub0Jib3gobm9kZUJCb3gpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHN0YXJ0UHJlc2VudGF0aW9uKGNhbnZhczogQ2FudmFzLCB0cnlDb250aW51ZTogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICAvLyBPbmx5IHJlc2V0IHZpc2l0ZWQgbm9kZXMgaWYgd2UgYXJlIG5vdCB0cnlpbmcgdG8gY29udGludWVcclxuICAgIGlmICghdHJ5Q29udGludWUgfHwgdGhpcy52aXNpdGVkTm9kZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnN0IHN0YXJ0Tm9kZSA9IHRoaXMuZ2V0U3RhcnROb2RlKGNhbnZhcylcclxuICAgICAgaWYgKCFzdGFydE5vZGUpIHtcclxuICAgICAgICBuZXcgTm90aWNlKCdObyBzdGFydCBub2RlIGZvdW5kLiBQbGVhc2UgbWFyayBhIG5vZGUgYXMgYSBzdGFydCBub2RlIHRyb3VnaCB0aGUgcG9wdXAgbWVudS4nKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICB0aGlzLnZpc2l0ZWROb2RlcyA9IFtzdGFydE5vZGVdXHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2F2ZSBjdXJyZW50IHZpZXdwb3J0XHJcbiAgICB0aGlzLnNhdmVkVmlld3BvcnQgPSB7XHJcbiAgICAgIHg6IGNhbnZhcy50eCxcclxuICAgICAgeTogY2FudmFzLnR5LFxyXG4gICAgICB6b29tOiBjYW52YXMudFpvb20sXHJcbiAgICB9XHJcblxyXG4gICAgLy8gRW50ZXIgZnVsbHNjcmVlbiBtb2RlXHJcbiAgICBjYW52YXMud3JhcHBlckVsLmZvY3VzKClcclxuICAgIGNhbnZhcy53cmFwcGVyRWwucmVxdWVzdEZ1bGxzY3JlZW4oKVxyXG4gICAgY2FudmFzLndyYXBwZXJFbC5jbGFzc0xpc3QuYWRkKCdwcmVzZW50YXRpb24tbW9kZScpXHJcblxyXG4gICAgLy8gTG9jayBjYW52YXNcclxuICAgIGNhbnZhcy5zZXRSZWFkb25seSh0cnVlKVxyXG5cclxuICAgIC8vIFJlZ2lzdGVyIGV2ZW50IGhhbmRsZXIgZm9yIGtleWJvYXJkIG5hdmlnYXRpb25cclxuICAgIGNhbnZhcy53cmFwcGVyRWwub25rZXlkb3duID0gKGU6IGFueSkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygndXNlQXJyb3dLZXlzVG9DaGFuZ2VTbGlkZXMnKSkge1xyXG4gICAgICAgIGlmIChlLmtleSA9PT0gJ0Fycm93UmlnaHQnKSB0aGlzLm5leHROb2RlKGNhbnZhcylcclxuICAgICAgICBlbHNlIGlmIChlLmtleSA9PT0gJ0Fycm93TGVmdCcpIHRoaXMucHJldmlvdXNOb2RlKGNhbnZhcylcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ3VzZVBnVXBQZ0Rvd25LZXlzVG9DaGFuZ2VTbGlkZXMnKSkge1xyXG4gICAgICAgIGlmIChlLmtleSA9PT0gJ1BhZ2VEb3duJykgdGhpcy5uZXh0Tm9kZShjYW52YXMpXHJcbiAgICAgICAgZWxzZSBpZiAoZS5rZXkgPT09ICdQYWdlVXAnKSB0aGlzLnByZXZpb3VzTm9kZShjYW52YXMpXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBLZWVwIG1vZGFscyB3aGlsZSBpbiBmdWxsc2NyZWVuIG1vZGVcclxuICAgIHRoaXMuZnVsbHNjcmVlbk1vZGFsT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25SZWNvcmRzKSA9PiB7XHJcbiAgICAgIG11dGF0aW9uUmVjb3Jkcy5mb3JFYWNoKChtdXRhdGlvblJlY29yZCkgPT4ge1xyXG4gICAgICAgIG11dGF0aW9uUmVjb3JkLmFkZGVkTm9kZXMuZm9yRWFjaCgobm9kZSkgPT4ge1xyXG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChub2RlKVxyXG4gICAgICAgICAgZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQ/LmFwcGVuZENoaWxkKG5vZGUpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGNvbnN0IGlucHV0RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb21wdC1pbnB1dFwiKSBhcyBIVE1MSW5wdXRFbGVtZW50fG51bGxcclxuICAgICAgaWYgKGlucHV0RmllbGQpIGlucHV0RmllbGQuZm9jdXMoKVxyXG4gICAgfSlcclxuICAgIHRoaXMuZnVsbHNjcmVlbk1vZGFsT2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7IGNoaWxkTGlzdDogdHJ1ZSB9KVxyXG5cclxuICAgIC8vIFJlZ2lzdGVyIGV2ZW50IGhhbmRsZXIgZm9yIGV4aXRpbmcgcHJlc2VudGF0aW9uIG1vZGVcclxuICAgIGNhbnZhcy53cmFwcGVyRWwub25mdWxsc2NyZWVuY2hhbmdlID0gKF9lOiBhbnkpID0+IHtcclxuICAgICAgaWYgKGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50KSByZXR1cm5cclxuICAgICAgdGhpcy5lbmRQcmVzZW50YXRpb24oY2FudmFzKVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaXNQcmVzZW50YXRpb25Nb2RlID0gdHJ1ZVxyXG5cclxuICAgIC8vIFdhaXQgZm9yIGZ1bGxzY3JlZW4gdG8gYmUgZW5hYmxlZFxyXG4gICAgYXdhaXQgc2xlZXAoNTAwKVxyXG5cclxuICAgIC8vIFpvb20gdG8gZmlyc3Qgbm9kZVxyXG4gICAgdGhpcy5hbmltYXRlTm9kZVRyYW5zaXRpb24oY2FudmFzLCB1bmRlZmluZWQsIHRoaXMudmlzaXRlZE5vZGVzLmxhc3QoKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZW5kUHJlc2VudGF0aW9uKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICAvLyBVbnJlZ2lzdGVyIGV2ZW50IGhhbmRsZXJzXHJcbiAgICB0aGlzLmZ1bGxzY3JlZW5Nb2RhbE9ic2VydmVyPy5kaXNjb25uZWN0KClcclxuICAgIHRoaXMuZnVsbHNjcmVlbk1vZGFsT2JzZXJ2ZXIgPSBudWxsXHJcbiAgICBjYW52YXMud3JhcHBlckVsLm9ua2V5ZG93biA9IG51bGxcclxuICAgIGNhbnZhcy53cmFwcGVyRWwub25mdWxsc2NyZWVuY2hhbmdlID0gbnVsbFxyXG5cclxuICAgIC8vIFVubG9jayBjYW52YXNcclxuICAgIGNhbnZhcy5zZXRSZWFkb25seShmYWxzZSlcclxuXHJcbiAgICAvLyBFeGl0IGZ1bGxzY3JlZW4gbW9kZVxyXG4gICAgY2FudmFzLndyYXBwZXJFbC5jbGFzc0xpc3QucmVtb3ZlKCdwcmVzZW50YXRpb24tbW9kZScpXHJcbiAgICBpZiAoZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQpIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKClcclxuXHJcbiAgICAvLyBSZXNldCB2aWV3cG9ydFxyXG4gICAgY2FudmFzLnNldFZpZXdwb3J0KHRoaXMuc2F2ZWRWaWV3cG9ydC54LCB0aGlzLnNhdmVkVmlld3BvcnQueSwgdGhpcy5zYXZlZFZpZXdwb3J0Lnpvb20pXHJcbiAgICB0aGlzLmlzUHJlc2VudGF0aW9uTW9kZSA9IGZhbHNlXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG5leHROb2RlKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBjb25zdCBmcm9tTm9kZSA9IHRoaXMudmlzaXRlZE5vZGVzLmxhc3QoKVxyXG4gICAgaWYgKCFmcm9tTm9kZSkgcmV0dXJuXHJcblxyXG4gICAgY29uc3Qgb3V0Z29pbmdFZGdlcyA9IGNhbnZhcy5nZXRFZGdlc0Zvck5vZGUoZnJvbU5vZGUpLmZpbHRlcigoZWRnZTogQ2FudmFzRWRnZSkgPT4gZWRnZS5mcm9tLm5vZGUgPT09IGZyb21Ob2RlKVxyXG4gICAgbGV0IHRvTm9kZSA9IG91dGdvaW5nRWRnZXMuZmlyc3QoKT8udG8ubm9kZVxyXG5cclxuICAgIC8vIElmIHRoZXJlIGFyZSBtdWx0aXBsZSBvdXRnb2luZyBlZGdlcywgd2UgbmVlZCB0byBsb29rIGF0IHRoZSBlZGdlIGxhYmVsXHJcbiAgICBpZiAob3V0Z29pbmdFZGdlcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIC8vIENyZWF0ZSBtYXAgb2YgZWRnZSBsYWJlbHMgdG8gbm9kZXNcclxuICAgICAgY29uc3Qgc29ydGVkRWRnZXMgPSBvdXRnb2luZ0VkZ2VzXHJcbiAgICAgICAgLnNvcnQoKGE6IENhbnZhc0VkZ2UsIGI6IENhbnZhc0VkZ2UpID0+IHtcclxuICAgICAgICAgIGlmICghYS5sYWJlbCkgcmV0dXJuIDFcclxuICAgICAgICAgIGlmICghYi5sYWJlbCkgcmV0dXJuIC0xXHJcblxyXG4gICAgICAgICAgcmV0dXJuIGEubGFiZWwubG9jYWxlQ29tcGFyZShiLmxhYmVsKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAvLyBGaW5kIHdoaWNoIGVkZ2VzIGFscmVhZHkgaGF2ZSBiZWVuIHRyYXZlcnNlZFxyXG4gICAgICBjb25zdCB0cmF2ZXJzZWRFZGdlc0NvdW50ID0gdGhpcy52aXNpdGVkTm9kZXNcclxuICAgICAgICAuZmlsdGVyKCh2aXNpdGVkTm9kZTogQ2FudmFzTm9kZSkgPT4gdmlzaXRlZE5vZGUgPT0gZnJvbU5vZGUpLmxlbmd0aCAtIDFcclxuXHJcbiAgICAgIC8vIFNlbGVjdCBuZXh0IGVkZ2VcclxuICAgICAgY29uc3QgbmV4dEVkZ2UgPSBzb3J0ZWRFZGdlc1t0cmF2ZXJzZWRFZGdlc0NvdW50XVxyXG4gICAgICB0b05vZGUgPSBuZXh0RWRnZS50by5ub2RlXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRvTm9kZSkge1xyXG4gICAgICB0aGlzLnZpc2l0ZWROb2Rlcy5wdXNoKHRvTm9kZSlcclxuICAgICAgdGhpcy5hbmltYXRlTm9kZVRyYW5zaXRpb24oY2FudmFzLCBmcm9tTm9kZSwgdG9Ob2RlKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gTm8gbW9yZSBub2RlcyBsZWZ0LCBhbmltYXRlIHRvIHNhbWUgbm9kZVxyXG4gICAgICB0aGlzLmFuaW1hdGVOb2RlVHJhbnNpdGlvbihjYW52YXMsIGZyb21Ob2RlLCBmcm9tTm9kZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgcHJldmlvdXNOb2RlKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBjb25zdCBmcm9tTm9kZSA9IHRoaXMudmlzaXRlZE5vZGVzLnBvcCgpXHJcbiAgICBpZiAoIWZyb21Ob2RlKSByZXR1cm5cclxuXHJcbiAgICBsZXQgdG9Ob2RlID0gdGhpcy52aXNpdGVkTm9kZXMubGFzdCgpXHJcblxyXG4gICAgLy8gRmFsbCBiYWNrIHRvIHNhbWUgbm9kZSBpZiB0aGVyZSBhcmUgbm8gbW9yZSBub2RlcyBiZWZvcmVcclxuICAgIGlmICghdG9Ob2RlKSB7XHJcbiAgICAgIHRvTm9kZSA9IGZyb21Ob2RlXHJcbiAgICAgIHRoaXMudmlzaXRlZE5vZGVzLnB1c2goZnJvbU5vZGUpXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5hbmltYXRlTm9kZVRyYW5zaXRpb24oY2FudmFzLCBmcm9tTm9kZSwgdG9Ob2RlKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgKiBhcyBDYW52YXNIZWxwZXIgZnJvbSBcInNyYy91dGlscy9jYW52YXMtaGVscGVyXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IHsgQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5ncyB9IGZyb20gXCJzcmMvc2V0dGluZ3NcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmV0dGVyUmVhZG9ubHlDYW52YXNFeHRlbnNpb24gZXh0ZW5kcyBDYW52YXNFeHRlbnNpb24ge1xyXG4gIGlzRW5hYmxlZCgpIHsgcmV0dXJuICdiZXR0ZXJSZWFkb25seUVuYWJsZWQnIGFzIGNvbnN0IH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIC8qIFBvcHVwIGxpc3RlbmVyICovXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LlBvcHVwTWVudUNyZWF0ZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgX25vZGU6IGFueSkgPT4gdGhpcy51cGRhdGVQb3B1cE1lbnUoY2FudmFzKVxyXG4gICAgKSlcclxuXHJcbiAgICAvKiBab29tIGFuZCBQYW4gbGlzdGVuZXIgKi9cclxuICAgIGxldCBtb3ZpbmdUb0JCb3ggPSBmYWxzZVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuVmlld3BvcnRDaGFuZ2VkLkJlZm9yZSxcclxuICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB7XHJcbiAgICAgICAgLy8gT25seSBhbGxvdyB2aWV3cG9ydCBjaGFuZ2Ugb25jZSB3aGVuIHVzaW5nIHpvb20gdG8gYmJveFxyXG4gICAgICAgIGlmIChtb3ZpbmdUb0JCb3gpIHtcclxuICAgICAgICAgIG1vdmluZ1RvQkJveCA9IGZhbHNlXHJcblxyXG4gICAgICAgICAgdGhpcy51cGRhdGVMb2NrZWRab29tKGNhbnZhcylcclxuICAgICAgICAgIHRoaXMudXBkYXRlTG9ja2VkUGFuKGNhbnZhcylcclxuXHJcbiAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghY2FudmFzLnJlYWRvbmx5KSByZXR1cm5cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2Rpc2FibGVab29tJykpIHtcclxuICAgICAgICAgIGNhbnZhcy56b29tID0gY2FudmFzLmxvY2tlZFpvb20gPz8gY2FudmFzLnpvb21cclxuICAgICAgICAgIGNhbnZhcy50Wm9vbSA9IGNhbnZhcy5sb2NrZWRab29tID8/IGNhbnZhcy50Wm9vbVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2Rpc2FibGVQYW4nKSkge1xyXG4gICAgICAgICAgY2FudmFzLnggPSBjYW52YXMubG9ja2VkWCA/PyBjYW52YXMueFxyXG4gICAgICAgICAgY2FudmFzLnR4ID0gY2FudmFzLmxvY2tlZFggPz8gY2FudmFzLnR4XHJcbiAgICAgICAgICBjYW52YXMueSA9IGNhbnZhcy5sb2NrZWRZID8/IGNhbnZhcy55XHJcbiAgICAgICAgICBjYW52YXMudHkgPSBjYW52YXMubG9ja2VkWSA/PyBjYW52YXMudHlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICkpXHJcblxyXG4gICAgLy8gQWxsb3cgdmlld3BvcnQgY2hhbmdlIHdoZW4gdXNpbmcgem9vbSB0byBiYm94XHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Llpvb21Ub0Jib3guQmVmb3JlLFxyXG4gICAgICAoKSA9PiBtb3ZpbmdUb0JCb3ggPSB0cnVlXHJcbiAgICApKVxyXG5cclxuICAgIC8qIFJlYWRvbmx5IGxpc3RlbmVyICovXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LlJlYWRvbmx5Q2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBfcmVhZG9ubHk6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZVBvcHVwTWVudShjYW52YXMpXHJcbiAgICAgICAgdGhpcy51cGRhdGVMb2NrZWRab29tKGNhbnZhcylcclxuICAgICAgICB0aGlzLnVwZGF0ZUxvY2tlZFBhbihjYW52YXMpXHJcbiAgICAgIH1cclxuICAgICkpXHJcblxyXG4gICAgLyogQWRkIHNldHRpbmdzICovXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkNhbnZhc0NoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5hZGRRdWlja1NldHRpbmdzKGNhbnZhcylcclxuICAgICkpXHJcbiAgfVxyXG5cclxuICBhZGRRdWlja1NldHRpbmdzKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBjb25zdCBzZXR0aW5nc0NvbnRhaW5lciA9IGNhbnZhcy5xdWlja1NldHRpbmdzQnV0dG9uPy5wYXJlbnRFbGVtZW50XHJcbiAgICBpZiAoIXNldHRpbmdzQ29udGFpbmVyKSByZXR1cm5cclxuXHJcbiAgICBDYW52YXNIZWxwZXIuYWRkUXVpY2tTZXR0aW5nc0J1dHRvbihcclxuICAgICAgc2V0dGluZ3NDb250YWluZXIsXHJcbiAgICAgIHRoaXMuY3JlYXRlVG9nZ2xlKHtcclxuICAgICAgICBpZDogJ2Rpc2FibGUtbm9kZS1wb3B1cCcsXHJcbiAgICAgICAgbGFiZWw6ICdEaXNhYmxlIG5vZGUgcG9wdXAnLFxyXG4gICAgICAgIGljb246ICdhcnJvdy11cC1yaWdodC1mcm9tLWNpcmNsZScsXHJcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMudXBkYXRlUG9wdXBNZW51KGNhbnZhcylcclxuICAgICAgfSwgJ2Rpc2FibGVOb2RlUG9wdXAnKVxyXG4gICAgKVxyXG5cclxuICAgIENhbnZhc0hlbHBlci5hZGRRdWlja1NldHRpbmdzQnV0dG9uKFxyXG4gICAgICBzZXR0aW5nc0NvbnRhaW5lcixcclxuICAgICAgdGhpcy5jcmVhdGVUb2dnbGUoe1xyXG4gICAgICAgIGlkOiAnZGlzYWJsZS16b29tJyxcclxuICAgICAgICBsYWJlbDogJ0Rpc2FibGUgem9vbScsXHJcbiAgICAgICAgaWNvbjogJ3pvb20taW4nLFxyXG4gICAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnVwZGF0ZUxvY2tlZFpvb20oY2FudmFzKVxyXG4gICAgICB9LCAnZGlzYWJsZVpvb20nKVxyXG4gICAgKVxyXG5cclxuICAgIENhbnZhc0hlbHBlci5hZGRRdWlja1NldHRpbmdzQnV0dG9uKFxyXG4gICAgICBzZXR0aW5nc0NvbnRhaW5lcixcclxuICAgICAgdGhpcy5jcmVhdGVUb2dnbGUoe1xyXG4gICAgICAgIGlkOiAnZGlzYWJsZS1wYW4nLFxyXG4gICAgICAgIGxhYmVsOiAnRGlzYWJsZSBwYW4nLFxyXG4gICAgICAgIGljb246ICdtb3ZlJyxcclxuICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy51cGRhdGVMb2NrZWRQYW4oY2FudmFzKVxyXG4gICAgICB9LCAnZGlzYWJsZVBhbicpXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZVRvZ2dsZShtZW51T3B0aW9uOiBDYW52YXNIZWxwZXIuTWVudU9wdGlvbiwgc2V0dGluZ0tleToga2V5b2YgQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5ncyk6IEhUTUxFbGVtZW50IHtcclxuICAgIGNvbnN0IHRvZ2dsZSA9IENhbnZhc0hlbHBlci5jcmVhdGVRdWlja1NldHRpbmdzQnV0dG9uKHtcclxuICAgICAgLi4ubWVudU9wdGlvbixcclxuICAgICAgY2FsbGJhY2s6ICgpID0+IChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSAhdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZyhzZXR0aW5nS2V5KVxyXG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNldHRpbmdzLnNldFNldHRpbmcoeyBbc2V0dGluZ0tleV06IG5ld1ZhbHVlIH0pXHJcblxyXG4gICAgICAgIHRvZ2dsZS5kYXRhc2V0LnRvZ2dsZWQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKHNldHRpbmdLZXkpLnRvU3RyaW5nKClcclxuICAgICAgICBtZW51T3B0aW9uLmNhbGxiYWNrPy5jYWxsKHRoaXMpXHJcbiAgICAgIH0pKClcclxuICAgIH0pXHJcbiAgICB0b2dnbGUuY2xhc3NMaXN0LmFkZCgnc2hvdy13aGlsZS1yZWFkb25seScpXHJcblxyXG4gICAgdG9nZ2xlLmRhdGFzZXQudG9nZ2xlZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoc2V0dGluZ0tleSkudG9TdHJpbmcoKVxyXG5cclxuICAgIHJldHVybiB0b2dnbGVcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlUG9wdXBNZW51KGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBjb25zdCBoaWRkZW4gPSBjYW52YXMucmVhZG9ubHkgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZGlzYWJsZU5vZGVQb3B1cCcpXHJcbiAgICBjYW52YXMubWVudS5tZW51RWwuc3R5bGUudmlzaWJpbGl0eSA9IGhpZGRlbiA/ICdoaWRkZW4nIDogJ3Zpc2libGUnXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZUxvY2tlZFpvb20oY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGNhbnZhcy5sb2NrZWRab29tID0gY2FudmFzLnRab29tXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZUxvY2tlZFBhbihjYW52YXM6IENhbnZhcykge1xyXG4gICAgY2FudmFzLmxvY2tlZFggPSBjYW52YXMudHhcclxuICAgIGNhbnZhcy5sb2NrZWRZID0gY2FudmFzLnR5XHJcbiAgfVxyXG59IiwgImltcG9ydCBBcHAsIHsgU3VnZ2VzdE1vZGFsLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJ1xyXG5pbXBvcnQgKiBhcyBQYXRoSGVscGVyIGZyb20gJ3NyYy91dGlscy9wYXRoLWhlbHBlcidcclxuXHJcbmV4cG9ydCBjbGFzcyBGaWxlTmFtZU1vZGFsIGV4dGVuZHMgU3VnZ2VzdE1vZGFsPHN0cmluZz4ge1xyXG4gIHBhcmVudFBhdGg6IHN0cmluZ1xyXG4gIGZpbGVFeHRlbnNpb246IHN0cmluZ1xyXG5cclxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGFyZW50UGF0aDogc3RyaW5nLCBmaWxlRXh0ZW5zaW9uOiBzdHJpbmcpIHtcclxuICAgIHN1cGVyKGFwcClcclxuXHJcbiAgICB0aGlzLnBhcmVudFBhdGggPSBwYXJlbnRQYXRoXHJcbiAgICB0aGlzLmZpbGVFeHRlbnNpb24gPSBmaWxlRXh0ZW5zaW9uXHJcbiAgfVxyXG5cclxuICBnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3QgcXVlcnlXaXRob3V0RXh0ZW5zaW9uID0gcXVlcnkucmVwbGFjZShuZXcgUmVnRXhwKGBcXFxcLiR7dGhpcy5maWxlRXh0ZW5zaW9ufSRgKSwgJycpXHJcbiAgICBpZiAocXVlcnlXaXRob3V0RXh0ZW5zaW9uID09PSAnJykgcmV0dXJuIFtdXHJcblxyXG4gICAgY29uc3QgcXVlcnlXaXRoRXh0ZW5zaW9uID0gcXVlcnlXaXRob3V0RXh0ZW5zaW9uICsgJy4nICsgdGhpcy5maWxlRXh0ZW5zaW9uXHJcbiAgICBjb25zdCBzdWdnZXN0aW9ucyA9IFtgJHt0aGlzLnBhcmVudFBhdGh9LyR7cXVlcnlXaXRoRXh0ZW5zaW9ufWAsIHF1ZXJ5V2l0aEV4dGVuc2lvbl1cclxuICAgICAgLy8gRmlsdGVyIG91dCBzdWdnZXN0aW9ucyBmb3IgZmlsZXMgdGhhdCBhbHJlYWR5IGV4aXN0XHJcbiAgICAgIC5maWx0ZXIocyA9PiB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocykgPT09IG51bGwpXHJcblxyXG4gICAgcmV0dXJuIHN1Z2dlc3Rpb25zXHJcbiAgfVxyXG5cclxuICByZW5kZXJTdWdnZXN0aW9uKHRleHQ6IHN0cmluZywgZWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICBlbC5zZXRUZXh0KHRleHQpXHJcbiAgfVxyXG5cclxuICBvbkNob29zZVN1Z2dlc3Rpb24oX3RleHQ6IHN0cmluZywgX2V2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpIHt9XHJcblxyXG4gIGF3YWl0SW5wdXQoKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgX3JlamVjdCkgPT4ge1xyXG4gICAgICB0aGlzLm9uQ2hvb3NlU3VnZ2VzdGlvbiA9ICh0ZXh0OiBzdHJpbmcpID0+IHsgcmVzb2x2ZSh0ZXh0KSB9XHJcbiAgICAgIHRoaXMub3BlbigpXHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEZpbGVTZWxlY3RNb2RhbCBleHRlbmRzIFN1Z2dlc3RNb2RhbDxzdHJpbmc+IHtcclxuICBmaWxlczogc3RyaW5nW11cclxuICBzdWdnZXN0TmV3RmlsZTogYm9vbGVhblxyXG5cclxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZXh0ZW5zaW9uc1JlZ2V4PzogUmVnRXhwLCBzdWdnZXN0TmV3RmlsZTogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICBzdXBlcihhcHApXHJcblxyXG4gICAgdGhpcy5maWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKClcclxuICAgICAgLm1hcChmaWxlID0+IGZpbGUucGF0aClcclxuICAgICAgLmZpbHRlcihwYXRoID0+IFBhdGhIZWxwZXIuZXh0ZW5zaW9uKHBhdGgpPy5tYXRjaChleHRlbnNpb25zUmVnZXggPz8gLy4qLykpXHJcbiAgICB0aGlzLnN1Z2dlc3ROZXdGaWxlID0gc3VnZ2VzdE5ld0ZpbGVcclxuXHJcbiAgICB0aGlzLnNldFBsYWNlaG9sZGVyKCdUeXBlIHRvIHNlYXJjaC4uLicpXHJcbiAgICB0aGlzLnNldEluc3RydWN0aW9ucyhbe1xyXG4gICAgICAgIGNvbW1hbmQ6ICdcdTIxOTFcdTIxOTMnLFxyXG4gICAgICAgIHB1cnBvc2U6ICd0byBuYXZpZ2F0ZSdcclxuICAgIH0sIHtcclxuICAgICAgICBjb21tYW5kOiAnXHUyMUI1JyxcclxuICAgICAgICBwdXJwb3NlOiAndG8gb3BlbidcclxuICAgIH0sIHtcclxuICAgICAgICBjb21tYW5kOiAnc2hpZnQgXHUyMUI1JyxcclxuICAgICAgICBwdXJwb3NlOiAndG8gY3JlYXRlJ1xyXG4gICAgfSwge1xyXG4gICAgICAgIGNvbW1hbmQ6ICdlc2MnLFxyXG4gICAgICAgIHB1cnBvc2U6ICd0byBkaXNtaXNzJ1xyXG4gICAgfV0pXHJcblxyXG4gICAgdGhpcy5zY29wZS5yZWdpc3RlcihbJ1NoaWZ0J10sICdFbnRlcicsICgoZSkgPT4ge1xyXG4gICAgICB0aGlzLm9uQ2hvb3NlU3VnZ2VzdGlvbih0aGlzLmlucHV0RWwudmFsdWUsIGUpXHJcbiAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgfSkpXHJcbiAgfVxyXG5cclxuICBnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSB0aGlzLmZpbGVzLmZpbHRlcihwYXRoID0+IHBhdGgudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeS50b0xvd2VyQ2FzZSgpKSlcclxuICAgIGlmIChzdWdnZXN0aW9ucy5sZW5ndGggPT09IDAgJiYgdGhpcy5zdWdnZXN0TmV3RmlsZSkgc3VnZ2VzdGlvbnMucHVzaChxdWVyeSlcclxuXHJcbiAgICByZXR1cm4gc3VnZ2VzdGlvbnNcclxuICB9XHJcblxyXG4gIHJlbmRlclN1Z2dlc3Rpb24ocGF0aDogc3RyaW5nLCBlbDogSFRNTEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IHNpbXBsaWZpZWRQYXRoID0gcGF0aC5yZXBsYWNlKC9cXC5tZCQvLCAnJylcclxuICAgIGVsLnNldFRleHQoc2ltcGxpZmllZFBhdGgpXHJcbiAgfVxyXG5cclxuICBvbkNob29zZVN1Z2dlc3Rpb24oX3BhdGg6IHN0cmluZywgX2V2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpIHt9XHJcblxyXG4gIGF3YWl0SW5wdXQoKTogUHJvbWlzZTxURmlsZT4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCBfcmVqZWN0KSA9PiB7XHJcbiAgICAgIHRoaXMub25DaG9vc2VTdWdnZXN0aW9uID0gKHBhdGg6IHN0cmluZywgX2V2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpXHJcblxyXG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpXHJcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmaWxlKVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuc3VnZ2VzdE5ld0ZpbGUpIHJldHVyblxyXG5cclxuICAgICAgICBpZiAoUGF0aEhlbHBlci5leHRlbnNpb24ocGF0aCkgPT09IHVuZGVmaW5lZCkgcGF0aCArPSAnLm1kJ1xyXG4gICAgICAgIGNvbnN0IG5ld0ZpbGUgPSB0aGlzLmFwcC52YXVsdC5jcmVhdGUocGF0aCwgJycpXHJcbiAgICAgICAgcmVzb2x2ZShuZXdGaWxlKVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLm9wZW4oKVxyXG4gICAgfSlcclxuICB9XHJcbn0iLCAiZXhwb3J0IGZ1bmN0aW9uIGV4dGVuc2lvbihwYXRoOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gIHJldHVybiBwYXRoLmluY2x1ZGVzKCcuJykgPyBwYXRoLnNwbGl0KCcuJykucG9wKCkgOiB1bmRlZmluZWRcclxufSIsICJpbXBvcnQgeyBNZW51IH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuaW1wb3J0IHsgQ2FudmFzIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IHsgRmlsZU5hbWVNb2RhbCB9IGZyb20gXCJzcmMvdXRpbHMvbW9kYWwtaGVscGVyXCJcclxuaW1wb3J0ICogYXMgQ2FudmFzSGVscGVyIGZyb20gXCJzcmMvdXRpbHMvY2FudmFzLWhlbHBlclwiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcblxyXG5jb25zdCBFTkNBUFNVTEFURURfRklMRV9OT0RFX1NJWkUgPSB7IHdpZHRoOiAzMDAsIGhlaWdodDogMzAwIH1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVuY2Fwc3VsYXRlQ2FudmFzRXh0ZW5zaW9uIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiAnY2FudmFzRW5jYXBzdWxhdGlvbkVuYWJsZWQnIGFzIGNvbnN0IH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIC8qIEFkZCBjb21tYW5kIHRvIGVuY2Fwc3VsYXRlIHNlbGVjdGlvbiAqL1xyXG4gICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcbiAgICAgIGlkOiAnZW5jYXBzdWxhdGUtc2VsZWN0aW9uJyxcclxuICAgICAgbmFtZTogJ0VuY2Fwc3VsYXRlIHNlbGVjdGlvbicsXHJcbiAgICAgIGNoZWNrQ2FsbGJhY2s6IENhbnZhc0hlbHBlci5jYW52YXNDb21tYW5kKFxyXG4gICAgICAgIHRoaXMucGx1Z2luLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gIWNhbnZhcy5yZWFkb25seSAmJiBjYW52YXMuc2VsZWN0aW9uLnNpemUgPiAwLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5lbmNhcHN1bGF0ZVNlbGVjdGlvbihjYW52YXMpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgLyogQWRkIGVuY2Fwc3VsYXRlIG9wdGlvbiB0byBjb250ZXh0IG1lbnUgKi9cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgJ2NhbnZhczpzZWxlY3Rpb24tbWVudScsXHJcbiAgICAgIChtZW51OiBNZW51LCBjYW52YXM6IENhbnZhcykgPT4ge1xyXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cclxuICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgLnNldFRpdGxlKCdFbmNhcHN1bGF0ZScpXHJcbiAgICAgICAgICAgIC5zZXRJY29uKCdmaWxlLXBsdXMnKVxyXG4gICAgICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLmVuY2Fwc3VsYXRlU2VsZWN0aW9uKGNhbnZhcykpXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICApKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZW5jYXBzdWxhdGVTZWxlY3Rpb24oY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGNvbnN0IHNlbGVjdGlvbiA9IGNhbnZhcy5nZXRTZWxlY3Rpb25EYXRhKClcclxuXHJcbiAgICAvLyBDcmVhdGUgbmV3IGZpbGVcclxuICAgIGNvbnN0IHNvdXJjZUZpbGVGb2xkZXIgPSBjYW52YXMudmlldy5maWxlLnBhcmVudD8ucGF0aFxyXG4gICAgaWYgKCFzb3VyY2VGaWxlRm9sZGVyKSByZXR1cm4gLy8gU2hvdWxkIG5ldmVyIGhhcHBlblxyXG5cclxuICAgIGNvbnN0IHRhcmdldEZpbGVQYXRoID0gYXdhaXQgbmV3IEZpbGVOYW1lTW9kYWwoXHJcbiAgICAgIHRoaXMucGx1Z2luLmFwcCxcclxuICAgICAgc291cmNlRmlsZUZvbGRlcixcclxuICAgICAgJ2NhbnZhcydcclxuICAgICkuYXdhaXRJbnB1dCgpXHJcblxyXG4gICAgY29uc3QgbmV3RmlsZURhdGEgPSB7IG5vZGVzOiBzZWxlY3Rpb24ubm9kZXMsIGVkZ2VzOiBzZWxlY3Rpb24uZWRnZXMgfVxyXG4gICAgY29uc3QgZmlsZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5jcmVhdGUodGFyZ2V0RmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KG5ld0ZpbGVEYXRhLCBudWxsLCAyKSlcclxuXHJcbiAgICAvLyBSZW1vdmUgZnJvbSBjdXJyZW50IGNhbnZhc1xyXG4gICAgZm9yIChjb25zdCBub2RlRGF0YSBvZiBzZWxlY3Rpb24ubm9kZXMpIHtcclxuICAgICAgY29uc3Qgbm9kZSA9IGNhbnZhcy5ub2Rlcy5nZXQobm9kZURhdGEuaWQpXHJcbiAgICAgIGlmIChub2RlKSBjYW52YXMucmVtb3ZlTm9kZShub2RlKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkZCBsaW5rIHRvIG5ldyBmaWxlIGluIGN1cnJlbnQgY2FudmFzXHJcbiAgICBjYW52YXMuY3JlYXRlRmlsZU5vZGUoe1xyXG4gICAgICBwb3M6IHtcclxuICAgICAgICB4OiBzZWxlY3Rpb24uY2VudGVyLnggLSBFTkNBUFNVTEFURURfRklMRV9OT0RFX1NJWkUud2lkdGggLyAyLFxyXG4gICAgICAgIHk6IHNlbGVjdGlvbi5jZW50ZXIueSAtIEVOQ0FQU1VMQVRFRF9GSUxFX05PREVfU0laRS5oZWlnaHQgLyAyXHJcbiAgICAgIH0sXHJcbiAgICAgIHNpemU6IEVOQ0FQU1VMQVRFRF9GSUxFX05PREVfU0laRSxcclxuICAgICAgZmlsZTogZmlsZVxyXG4gICAgfSlcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0ICogYXMgQ2FudmFzSGVscGVyIGZyb20gXCJzcmMvdXRpbHMvY2FudmFzLWhlbHBlclwiXHJcbmltcG9ydCB7IEZpbGVTZWxlY3RNb2RhbCB9IGZyb20gXCJzcmMvdXRpbHMvbW9kYWwtaGVscGVyXCJcclxuaW1wb3J0IENhbnZhc0V4dGVuc2lvbiBmcm9tIFwiLi4vY29yZS9jYW52YXMtZXh0ZW5zaW9uXCJcclxuXHJcbnR5cGUgRGlyZWN0aW9uID0gJ3VwJyB8ICdkb3duJyB8ICdsZWZ0JyB8ICdyaWdodCdcclxuY29uc3QgRElSRUNUSU9OUyA9IFsndXAnLCAnZG93bicsICdsZWZ0JywgJ3JpZ2h0J10gYXMgRGlyZWN0aW9uW11cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbW1hbmRzQ2FudmFzRXh0ZW5zaW9uIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiAnY29tbWFuZHNGZWF0dXJlRW5hYmxlZCcgYXMgY29uc3QgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcbiAgICAgIGlkOiAnY3JlYXRlLXRleHQtbm9kZScsXHJcbiAgICAgIG5hbWU6ICdDcmVhdGUgdGV4dCBub2RlJyxcclxuICAgICAgY2hlY2tDYWxsYmFjazogQ2FudmFzSGVscGVyLmNhbnZhc0NvbW1hbmQoXHJcbiAgICAgICAgdGhpcy5wbHVnaW4sXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiAhY2FudmFzLnJlYWRvbmx5LFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5jcmVhdGVUZXh0Tm9kZShjYW52YXMpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcbiAgICAgIGlkOiAnY3JlYXRlLWZpbGUtbm9kZScsXHJcbiAgICAgIG5hbWU6ICdDcmVhdGUgZmlsZSBub2RlJyxcclxuICAgICAgY2hlY2tDYWxsYmFjazogQ2FudmFzSGVscGVyLmNhbnZhc0NvbW1hbmQoXHJcbiAgICAgICAgdGhpcy5wbHVnaW4sXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiAhY2FudmFzLnJlYWRvbmx5LFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5jcmVhdGVGaWxlTm9kZShjYW52YXMpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XHJcbiAgICAgIGlkOiAnc2VsZWN0LWFsbC1lZGdlcycsXHJcbiAgICAgIG5hbWU6ICdTZWxlY3QgYWxsIGVkZ2VzJyxcclxuICAgICAgY2hlY2tDYWxsYmFjazogQ2FudmFzSGVscGVyLmNhbnZhc0NvbW1hbmQoXHJcbiAgICAgICAgdGhpcy5wbHVnaW4sXHJcbiAgICAgICAgKF9jYW52YXM6IENhbnZhcykgPT4gdHJ1ZSxcclxuICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+IGNhbnZhcy51cGRhdGVTZWxlY3Rpb24oKCkgPT4gXHJcbiAgICAgICAgICBjYW52YXMuc2VsZWN0aW9uID0gbmV3IFNldChjYW52YXMuZWRnZXMudmFsdWVzKCkpXHJcbiAgICAgICAgKVxyXG4gICAgICApXHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogJ3pvb20tdG8tc2VsZWN0aW9uJyxcclxuICAgICAgbmFtZTogJ1pvb20gdG8gc2VsZWN0aW9uJyxcclxuICAgICAgY2hlY2tDYWxsYmFjazogQ2FudmFzSGVscGVyLmNhbnZhc0NvbW1hbmQoXHJcbiAgICAgICAgdGhpcy5wbHVnaW4sXHJcbiAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiBjYW52YXMuc2VsZWN0aW9uLnNpemUgPiAwLFxyXG4gICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gY2FudmFzLnpvb21Ub1NlbGVjdGlvbigpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgZm9yIChjb25zdCBkaXJlY3Rpb24gb2YgRElSRUNUSU9OUykge1xyXG4gICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuICAgICAgICBpZDogYGNsb25lLW5vZGUtJHtkaXJlY3Rpb259YCxcclxuICAgICAgICBuYW1lOiBgQ2xvbmUgbm9kZSAke2RpcmVjdGlvbn1gLFxyXG4gICAgICAgIGNoZWNrQ2FsbGJhY2s6IENhbnZhc0hlbHBlci5jYW52YXNDb21tYW5kKFxyXG4gICAgICAgICAgdGhpcy5wbHVnaW4sXHJcbiAgICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+ICFjYW52YXMucmVhZG9ubHkgJiYgY2FudmFzLnNlbGVjdGlvbi5zaXplID09PSAxICYmIGNhbnZhcy5zZWxlY3Rpb24udmFsdWVzKCkubmV4dCgpLnZhbHVlPy5nZXREYXRhKCkudHlwZSA9PT0gJ3RleHQnLFxyXG4gICAgICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLmNsb25lTm9kZShjYW52YXMsIGRpcmVjdGlvbilcclxuICAgICAgICApXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcclxuICAgICAgICBpZDogYGV4cGFuZC1ub2RlLSR7ZGlyZWN0aW9ufWAsXHJcbiAgICAgICAgbmFtZTogYEV4cGFuZCBub2RlICR7ZGlyZWN0aW9ufWAsXHJcbiAgICAgICAgY2hlY2tDYWxsYmFjazogQ2FudmFzSGVscGVyLmNhbnZhc0NvbW1hbmQoXHJcbiAgICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAgIChjYW52YXM6IENhbnZhcykgPT4gIWNhbnZhcy5yZWFkb25seSAmJiBjYW52YXMuc2VsZWN0aW9uLnNpemUgPT09IDEsXHJcbiAgICAgICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMuZXhwYW5kTm9kZShjYW52YXMsIGRpcmVjdGlvbilcclxuICAgICAgICApXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZVRleHROb2RlKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBjb25zdCBzaXplID0gY2FudmFzLmNvbmZpZy5kZWZhdWx0VGV4dE5vZGVEaW1lbnNpb25zXHJcbiAgICBjb25zdCBwb3MgPSBDYW52YXNIZWxwZXIuZ2V0Q2VudGVyQ29vcmRpbmF0ZXMoY2FudmFzLCBzaXplKVxyXG5cclxuICAgIGNhbnZhcy5jcmVhdGVUZXh0Tm9kZSh7IHBvczogcG9zLCBzaXplOiBzaXplIH0pXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGNyZWF0ZUZpbGVOb2RlKGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBjb25zdCBzaXplID0gY2FudmFzLmNvbmZpZy5kZWZhdWx0RmlsZU5vZGVEaW1lbnNpb25zXHJcbiAgICBjb25zdCBwb3MgPSBDYW52YXNIZWxwZXIuZ2V0Q2VudGVyQ29vcmRpbmF0ZXMoY2FudmFzLCBzaXplKVxyXG4gICAgY29uc3QgZmlsZSA9IGF3YWl0IG5ldyBGaWxlU2VsZWN0TW9kYWwodGhpcy5wbHVnaW4uYXBwLCB1bmRlZmluZWQsIHRydWUpLmF3YWl0SW5wdXQoKVxyXG5cclxuICAgIGNhbnZhcy5jcmVhdGVGaWxlTm9kZSh7IHBvczogcG9zLCBzaXplOiBzaXplLCBmaWxlOiBmaWxlIH0pXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNsb25lTm9kZShjYW52YXM6IENhbnZhcywgY2xvbmVEaXJlY3Rpb246IERpcmVjdGlvbikge1xyXG4gICAgY29uc3Qgc291cmNlTm9kZSA9IGNhbnZhcy5zZWxlY3Rpb24udmFsdWVzKCkubmV4dCgpLnZhbHVlXHJcbiAgICBpZiAoIXNvdXJjZU5vZGUpIHJldHVyblxyXG4gICAgY29uc3Qgc291cmNlTm9kZURhdGEgPSBzb3VyY2VOb2RlLmdldERhdGEoKVxyXG5cclxuICAgIGNvbnN0IG5vZGVNYXJnaW4gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdjbG9uZU5vZGVNYXJnaW4nKVxyXG4gICAgY29uc3Qgb2Zmc2V0ID0geyBcclxuICAgICAgeDogKHNvdXJjZU5vZGUud2lkdGggKyBub2RlTWFyZ2luKSAqIChjbG9uZURpcmVjdGlvbiA9PT0gJ2xlZnQnID8gLTEgOiAoY2xvbmVEaXJlY3Rpb24gPT09ICdyaWdodCcgPyAxIDogMCkpLFxyXG4gICAgICB5OiAoc291cmNlTm9kZS5oZWlnaHQgKyBub2RlTWFyZ2luKSAqIChjbG9uZURpcmVjdGlvbiA9PT0gJ3VwJyA/IC0xIDogKGNsb25lRGlyZWN0aW9uID09PSAnZG93bicgPyAxIDogMCkpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY2xvbmVkTm9kZSA9IGNhbnZhcy5jcmVhdGVUZXh0Tm9kZSh7XHJcbiAgICAgIHBvczoge1xyXG4gICAgICAgIHg6IHNvdXJjZU5vZGUueCArIG9mZnNldC54LFxyXG4gICAgICAgIHk6IHNvdXJjZU5vZGUueSArIG9mZnNldC55XHJcbiAgICAgIH0sXHJcbiAgICAgIHNpemU6IHtcclxuICAgICAgICB3aWR0aDogc291cmNlTm9kZS53aWR0aCxcclxuICAgICAgICBoZWlnaHQ6IHNvdXJjZU5vZGUuaGVpZ2h0XHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgY2xvbmVkTm9kZS5zZXREYXRhKHsgXHJcbiAgICAgIC4uLmNsb25lZE5vZGUuZ2V0RGF0YSgpLCBcclxuICAgICAgY29sb3I6IHNvdXJjZU5vZGVEYXRhLmNvbG9yLFxyXG4gICAgICBzaGFwZTogc291cmNlTm9kZURhdGEuc2hhcGUgXHJcbiAgICB9KVxyXG5cclxuICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCd6b29tVG9DbG9uZWROb2RlJykpXHJcbiAgICAgIGNhbnZhcy56b29tVG9CYm94KGNsb25lZE5vZGUuZ2V0QkJveCgpKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBleHBhbmROb2RlKGNhbnZhczogQ2FudmFzLCBleHBhbmREaXJlY3Rpb246IERpcmVjdGlvbikge1xyXG4gICAgY29uc3Qgbm9kZSA9IGNhbnZhcy5zZWxlY3Rpb24udmFsdWVzKCkubmV4dCgpLnZhbHVlXHJcbiAgICBpZiAoIW5vZGUpIHJldHVyblxyXG5cclxuICAgIGNvbnN0IGV4cGFuZE5vZGVTdGVwU2l6ZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2V4cGFuZE5vZGVTdGVwU2l6ZScpXHJcbiAgICBjb25zdCBleHBhbmQgPSB7XHJcbiAgICAgIHg6IGV4cGFuZERpcmVjdGlvbiA9PT0gJ2xlZnQnID8gLTEgOiAoZXhwYW5kRGlyZWN0aW9uID09PSAncmlnaHQnID8gMSA6IDApLFxyXG4gICAgICB5OiBleHBhbmREaXJlY3Rpb24gPT09ICd1cCcgPyAtMSA6IChleHBhbmREaXJlY3Rpb24gPT09ICdkb3duJyA/IDEgOiAwKVxyXG4gICAgfVxyXG5cclxuICAgIG5vZGUuc2V0RGF0YSh7XHJcbiAgICAgIC4uLm5vZGUuZ2V0RGF0YSgpLFxyXG4gICAgICB3aWR0aDogbm9kZS53aWR0aCArIGV4cGFuZC54ICogZXhwYW5kTm9kZVN0ZXBTaXplLFxyXG4gICAgICBoZWlnaHQ6IG5vZGUuaGVpZ2h0ICsgZXhwYW5kLnkgKiBleHBhbmROb2RlU3RlcFNpemVcclxuICAgIH0pXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuaW1wb3J0IHsgQkJveCwgQ2FudmFzLCBDYW52YXNEYXRhLCBDYW52YXNFZGdlLCBDYW52YXNFbGVtZW50LCBDYW52YXNOb2RlLCBDYW52YXNOb2RlRGF0YSB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCB7IENhbnZhc0V2ZW50IH0gZnJvbSBcInNyYy9jb3JlL2V2ZW50c1wiXHJcbmltcG9ydCAqIGFzIENhbnZhc0hlbHBlciBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuY29uc3QgUE9SVEFMX1BBRERJTkcgPSA1MFxyXG5jb25zdCBNSU5fT1BFTl9QT1JUQUxfU0laRSA9IHsgd2lkdGg6IDIwMCwgaGVpZ2h0OiAyMDAgfVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9ydGFsc0NhbnZhc0V4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gJ3BvcnRhbHNGZWF0dXJlRW5hYmxlZCcgYXMgY29uc3QgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Qb3B1cE1lbnVDcmVhdGVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMudXBkYXRlUG9wdXBNZW51KGNhbnZhcylcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Ob2RlUmVtb3ZlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSA9PiB0aGlzLm9uTm9kZVJlbW92ZWQoY2FudmFzLCBub2RlKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Lk5vZGVNb3ZlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSA9PiB0aGlzLm9uTm9kZU1vdmVkKGNhbnZhcywgbm9kZSlcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5EcmFnZ2luZ1N0YXRlQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBzdGFydGVkRHJhZ2dpbmc6IGJvb2xlYW4pID0+IHRoaXMub25EcmFnZ2luZ1N0YXRlQ2hhbmdlZChjYW52YXMsIHN0YXJ0ZWREcmFnZ2luZylcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Db250YWluaW5nTm9kZXNSZXF1ZXN0ZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgYmJveDogQkJveCwgbm9kZXM6IENhbnZhc05vZGVbXSkgPT4gdGhpcy5vbkNvbnRhaW5pbmdOb2Rlc1JlcXVlc3RlZChjYW52YXMsIGJib3gsIG5vZGVzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LlNlbGVjdGlvbkNoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgb2xkU2VsZWN0aW9uOiBTZXQ8Q2FudmFzRWxlbWVudD4sIHVwZGF0ZVNlbGVjdGlvbjogKHVwZGF0ZTogKCkgPT4gdm9pZCkgPT4gdm9pZCkgPT4gdGhpcy5vblNlbGVjdGlvbkNoYW5nZWQoY2FudmFzLCBvbGRTZWxlY3Rpb24sIHVwZGF0ZVNlbGVjdGlvbilcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5FZGdlQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBlZGdlOiBDYW52YXNFZGdlKSA9PiB0aGlzLm9uRWRnZUNoYW5nZWQoY2FudmFzLCBlZGdlKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkRhdGFSZXF1ZXN0ZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgZGF0YTogQ2FudmFzRGF0YSkgPT4gdGhpcy5yZW1vdmVQb3J0YWxDYW52YXNEYXRhKGNhbnZhcywgZGF0YSlcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Mb2FkRGF0YSxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBkYXRhOiBDYW52YXNEYXRhLCBzZXREYXRhOiAoZGF0YTogQ2FudmFzRGF0YSkgPT4gdm9pZCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZ2V0Q2FudmFzRGF0YVdpdGhQb3J0YWxzKGNhbnZhcywgZGF0YSlcclxuICAgICAgICAgIC50aGVuKChuZXdEYXRhOiBDYW52YXNEYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFNraXAgaWYgdGhlIGRhdGEgZGlkbid0IGNoYW5nZVxyXG4gICAgICAgICAgICBpZiAobmV3RGF0YS5ub2Rlcy5sZW5ndGggPT09IGRhdGEubm9kZXMubGVuZ3RoICYmIG5ld0RhdGEuZWRnZXMubGVuZ3RoID09PSBkYXRhLmVkZ2VzLmxlbmd0aCkgcmV0dXJuXHJcbiAgICAgICAgICAgIHNldERhdGEobmV3RGF0YSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgICkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZVBvcHVwTWVudShjYW52YXM6IENhbnZhcykge1xyXG4gICAgaWYgKGNhbnZhcy5yZWFkb25seSkgcmV0dXJuXHJcblxyXG4gICAgLy8gT25seSBzZWFyY2ggZm9yIHZhbGlkIG5vZGVzXHJcbiAgICBjb25zdCBzZWxlY3RlZEZpbGVOb2RlcyA9IGNhbnZhcy5nZXRTZWxlY3Rpb25EYXRhKCkubm9kZXMubWFwKG5vZGVEYXRhID0+IHtcclxuICAgICAgY29uc3Qgbm9kZSA9IGNhbnZhcy5ub2Rlcy5nZXQobm9kZURhdGEuaWQpXHJcbiAgICAgIGlmICghbm9kZSkgcmV0dXJuIG51bGxcclxuXHJcbiAgICAgIGlmIChub2RlRGF0YS50eXBlICE9PSAnZmlsZScpIHJldHVybiBudWxsXHJcbiAgICAgIGlmIChub2RlLmZpbGU/LmV4dGVuc2lvbiA9PT0gJ2NhbnZhcycpIHJldHVybiBub2RlXHJcbiAgICAgIFxyXG4gICAgICAvLyBDbG9zZSBwb3J0YWwgb2Ygbm9uLWNhbnZhcyBmaWxlXHJcbiAgICAgIGlmIChub2RlRGF0YS5wb3J0YWxUb0ZpbGUpIHRoaXMuc2V0UG9ydGFsT3BlbihjYW52YXMsIG5vZGUsIGZhbHNlKVxyXG5cclxuICAgICAgcmV0dXJuIG51bGxcclxuICAgIH0pLmZpbHRlcihub2RlID0+IG5vZGUgIT09IG51bGwpIGFzIENhbnZhc05vZGVbXVxyXG4gICAgXHJcbiAgICBpZiAoc2VsZWN0ZWRGaWxlTm9kZXMubGVuZ3RoICE9PSAxKSByZXR1cm5cclxuXHJcbiAgICBjb25zdCBwb3J0YWxOb2RlID0gc2VsZWN0ZWRGaWxlTm9kZXNbMF1cclxuICAgIGNvbnN0IHBvcnRhbE5vZGVEYXRhID0gcG9ydGFsTm9kZS5nZXREYXRhKClcclxuXHJcbiAgICAvLyBJZiBmaWxlIGNoYW5nZWRcclxuICAgIGlmIChwb3J0YWxOb2RlRGF0YS5wb3J0YWxUb0ZpbGUgJiYgcG9ydGFsTm9kZURhdGEuZmlsZSAhPT0gcG9ydGFsTm9kZURhdGEucG9ydGFsVG9GaWxlKSB7XHJcbiAgICAgIHRoaXMuc2V0UG9ydGFsT3BlbihjYW52YXMsIHBvcnRhbE5vZGUsIHRydWUpXHJcbiAgICB9XHJcblxyXG4gICAgQ2FudmFzSGVscGVyLmFkZFBvcHVwTWVudU9wdGlvbihcclxuICAgICAgY2FudmFzLFxyXG4gICAgICBDYW52YXNIZWxwZXIuY3JlYXRlUG9wdXBNZW51T3B0aW9uKHtcclxuICAgICAgICBpZDogJ3RvZ2dsZS1wb3J0YWwnLFxyXG4gICAgICAgIGxhYmVsOiBwb3J0YWxOb2RlRGF0YS5wb3J0YWxUb0ZpbGUgPyAnQ2xvc2UgcG9ydGFsJyA6ICdPcGVuIHBvcnRhbCcsXHJcbiAgICAgICAgaWNvbjogcG9ydGFsTm9kZURhdGEucG9ydGFsVG9GaWxlID8gJ2Rvb3Itb3BlbicgOiAnZG9vci1jbG9zZWQnLFxyXG4gICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnNldFBvcnRhbE9wZW4oY2FudmFzLCBwb3J0YWxOb2RlLCBwb3J0YWxOb2RlRGF0YS5wb3J0YWxUb0ZpbGUgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgIHRoaXMudXBkYXRlUG9wdXBNZW51KGNhbnZhcylcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldFBvcnRhbE9wZW4oY2FudmFzOiBDYW52YXMsIHBvcnRhbE5vZGU6IENhbnZhc05vZGUsIG9wZW46IGJvb2xlYW4pIHtcclxuICAgIGNvbnN0IHBvcnRhbE5vZGVEYXRhID0gcG9ydGFsTm9kZS5nZXREYXRhKClcclxuICAgIHBvcnRhbE5vZGUuc2V0RGF0YSh7XHJcbiAgICAgIC4uLnBvcnRhbE5vZGVEYXRhLFxyXG4gICAgICBwb3J0YWxUb0ZpbGU6IG9wZW4gPyBwb3J0YWxOb2RlRGF0YS5maWxlIDogdW5kZWZpbmVkXHJcbiAgICB9KVxyXG5cclxuICAgIC8vIFVwZGF0ZSB3aG9sZSBjYW52YXMgZGF0YVxyXG4gICAgY2FudmFzLnNldERhdGEoY2FudmFzLmdldERhdGEoKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25Ob2RlUmVtb3ZlZChjYW52YXM6IENhbnZhcywgbm9kZTogQ2FudmFzTm9kZSkge1xyXG4gICAgY29uc3Qgbm9kZURhdGEgPSBub2RlLmdldERhdGEoKVxyXG4gICAgaWYgKG5vZGVEYXRhLnR5cGUgIT09ICdmaWxlJyB8fCAhbm9kZURhdGEucG9ydGFsVG9GaWxlKSByZXR1cm5cclxuXHJcbiAgICAvLyBSZW1vdmUgbmVzdGVkIG5vZGVzIGFuZCBlZGdlc1xyXG4gICAgT2JqZWN0LmtleXMobm9kZURhdGEucG9ydGFsSWRNYXBzPy5ub2RlSWRNYXAgPz8ge30pLm1hcChyZWZOb2RlSWQgPT4gY2FudmFzLm5vZGVzLmdldChyZWZOb2RlSWQpKVxyXG4gICAgICAuZmlsdGVyKG5vZGUgPT4gbm9kZSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAuZm9yRWFjaChub2RlID0+IGNhbnZhcy5yZW1vdmVOb2RlKG5vZGUhKSlcclxuXHJcbiAgICBPYmplY3Qua2V5cyhub2RlRGF0YS5wb3J0YWxJZE1hcHM/LmVkZ2VJZE1hcCA/PyB7fSkubWFwKHJlZkVkZ2VJZCA9PiBjYW52YXMuZWRnZXMuZ2V0KHJlZkVkZ2VJZCkpXHJcbiAgICAgIC5maWx0ZXIoZWRnZSA9PiBlZGdlICE9PSB1bmRlZmluZWQpXHJcbiAgICAgIC5mb3JFYWNoKGVkZ2UgPT4gY2FudmFzLnJlbW92ZUVkZ2UoZWRnZSEpKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvbkVkZ2VDaGFuZ2VkKF9jYW52YXM6IENhbnZhcywgZWRnZTogQ2FudmFzRWRnZSkge1xyXG4gICAgY29uc3QgaXNVbnNhdmVkID0gKGVkZ2UuZnJvbS5ub2RlICE9PSB1bmRlZmluZWQgJiYgZWRnZS50by5ub2RlICE9PSB1bmRlZmluZWQpICYmIC8vIEVkZ2Ugbm90IGZ1bGx5IGNvbm5lY3RlZFxyXG4gICAgICAoZWRnZS5mcm9tLm5vZGUuZ2V0RGF0YSgpLnBvcnRhbElkICE9PSB1bmRlZmluZWQgJiYgZWRnZS50by5ub2RlLmdldERhdGEoKS5wb3J0YWxJZCAhPT0gdW5kZWZpbmVkKSAmJiAvLyBCb3RoIG5vZGVzIGFyZSBmcm9tIHBvcnRhbFxyXG4gICAgICBlZGdlLmdldERhdGEoKS5wb3J0YWxJZCA9PT0gdW5kZWZpbmVkIC8vIEVkZ2UgaXMgbm90IGZyb20gcG9ydGFsXHJcblxyXG4gICAgZWRnZS5zZXREYXRhKHtcclxuICAgICAgLi4uZWRnZS5nZXREYXRhKCksIFxyXG4gICAgICBpc1Vuc2F2ZWQ6IGlzVW5zYXZlZCA/IHRydWUgOiB1bmRlZmluZWRcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uQ29udGFpbmluZ05vZGVzUmVxdWVzdGVkKF9jYW52YXM6IENhbnZhcywgX2Jib3g6IEJCb3gsIG5vZGVzOiBDYW52YXNOb2RlW10pIHtcclxuICAgIC8vIFJlbW92ZSBub2RlcyBmcm9tIHBvcnRhbHMgZnJvbSB0aGUgbGlzdFxyXG4gICAgbm9kZXMuc3BsaWNlKDAsIG5vZGVzLmxlbmd0aCwgLi4ubm9kZXMuZmlsdGVyKG5vZGUgPT4gbm9kZS5nZXREYXRhKCkucG9ydGFsSWQgPT09IHVuZGVmaW5lZCkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uU2VsZWN0aW9uQ2hhbmdlZChjYW52YXM6IENhbnZhcywgb2xkU2VsZWN0aW9uOiBTZXQ8Q2FudmFzRWxlbWVudD4sIHVwZGF0ZVNlbGVjdGlvbjogKHVwZGF0ZTogKCkgPT4gdm9pZCkgPT4gdm9pZCkge1xyXG4gICAgLy8gVW5zZWxlY3Qgbm9kZXMgZnJvbSBwb3J0YWxzXHJcbiAgICB1cGRhdGVTZWxlY3Rpb24oKCkgPT4ge1xyXG4gICAgICBjb25zdCB1cGRhdGVkU2VsZWN0aW9uID0gQXJyYXkuZnJvbShjYW52YXMuc2VsZWN0aW9uKVxyXG4gICAgICAgIC5maWx0ZXIobm9kZSA9PiBub2RlLmdldERhdGEoKS5wb3J0YWxJZCA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICBjYW52YXMuc2VsZWN0aW9uID0gbmV3IFNldCh1cGRhdGVkU2VsZWN0aW9uKVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBNb3ZlIHByZXZpb3VzbHkgc2VsZWN0ZWQgcG9ydGFscyB0byB0aGUgYmFja1xyXG4gICAgY29uc3QgcHJldmlvdXNseVNlbGVjdGVkUG9ydGFsTm9kZXNJZHMgPSBBcnJheS5mcm9tKG9sZFNlbGVjdGlvbilcclxuICAgICAgLmZpbHRlcihub2RlID0+IChub2RlLmdldERhdGEoKSBhcyBhbnkpLnBvcnRhbFRvRmlsZSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAuZmxhdE1hcChub2RlID0+IHtcclxuICAgICAgICBjb25zdCBwb3J0YWxOb2RlRGF0YSA9IG5vZGUuZ2V0RGF0YSgpXHJcbiAgICAgICAgY29uc3QgbmVzdGVkUG9ydGFsc0lkcyA9IHRoaXMuZ2V0TmVzdGVkUG9ydGFsc0lkcyhjYW52YXMsIHBvcnRhbE5vZGVEYXRhLmlkKVxyXG5cclxuICAgICAgICByZXR1cm4gW3BvcnRhbE5vZGVEYXRhLmlkLCAuLi5uZXN0ZWRQb3J0YWxzSWRzXVxyXG4gICAgICB9KVxyXG5cclxuICAgIGZvciAoY29uc3Qgbm9kZSBvZiBjYW52YXMubm9kZXMudmFsdWVzKCkpIHtcclxuICAgICAgY29uc3Qgbm9kZURhdGEgPSBub2RlLmdldERhdGEoKVxyXG5cclxuICAgICAgLy8gTm90IGZyb20gdW5zZWxlY3RlZCBwb3J0YWxcclxuICAgICAgaWYgKG5vZGVEYXRhLnBvcnRhbElkID09PSB1bmRlZmluZWQgfHwgIXByZXZpb3VzbHlTZWxlY3RlZFBvcnRhbE5vZGVzSWRzLmluY2x1ZGVzKG5vZGVEYXRhLnBvcnRhbElkKSkgY29udGludWVcclxuXHJcbiAgICAgIC8vIE1vdmUgdG8gZnJvbnRcclxuICAgICAgbm9kZS51cGRhdGVaSW5kZXgoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXROZXN0ZWRQb3J0YWxzSWRzKGNhbnZhczogQ2FudmFzLCBwb3J0YWxJZDogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3QgbmVzdGVkUG9ydGFsc0lkczogc3RyaW5nW10gPSBbXVxyXG5cclxuICAgIGZvciAoY29uc3Qgbm9kZSBvZiBjYW52YXMubm9kZXMudmFsdWVzKCkpIHtcclxuICAgICAgY29uc3Qgbm9kZURhdGEgPSBub2RlLmdldERhdGEoKVxyXG5cclxuICAgICAgaWYgKG5vZGVEYXRhLnBvcnRhbElkID09PSBwb3J0YWxJZCkge1xyXG4gICAgICAgIG5lc3RlZFBvcnRhbHNJZHMucHVzaChub2RlRGF0YS5pZClcclxuICAgICAgICBuZXN0ZWRQb3J0YWxzSWRzLnB1c2goLi4udGhpcy5nZXROZXN0ZWRQb3J0YWxzSWRzKGNhbnZhcywgbm9kZURhdGEuaWQpKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5lc3RlZFBvcnRhbHNJZHNcclxuICB9XHJcblxyXG4gIHJlc3RvcmVPYmplY3RTbmFwcGluZ1N0YXRlOiAoKSA9PiB2b2lkXHJcbiAgcHJpdmF0ZSBvbkRyYWdnaW5nU3RhdGVDaGFuZ2VkKGNhbnZhczogQ2FudmFzLCBzdGFydGVkRHJhZ2dpbmc6IGJvb2xlYW4pIHtcclxuICAgIC8vIElmIG5vIG9wZW4gcG9ydGFsIGdldHMgZHJhZ2dlZCwgcmV0dXJuXHJcbiAgICBpZiAoIWNhbnZhcy5nZXRTZWxlY3Rpb25EYXRhKCkubm9kZXMuc29tZShub2RlID0+IG5vZGUudHlwZSA9PT0gJ2ZpbGUnICYmIG5vZGUucG9ydGFsVG9GaWxlKSkgcmV0dXJuXHJcblxyXG4gICAgLy8gRGlzYWJsZSBvYmplY3Qgc25hcHBpbmcgdG8gZml4IHNlbGYtYWxpZ25pbmdcclxuICAgIGlmIChzdGFydGVkRHJhZ2dpbmcpIHtcclxuICAgICAgY29uc3Qgb2JqZWN0U25hcHBpbmdFbmFibGVkID0gY2FudmFzLm9wdGlvbnMuc25hcFRvT2JqZWN0c1xyXG4gICAgICB0aGlzLnJlc3RvcmVPYmplY3RTbmFwcGluZ1N0YXRlID0gKCkgPT4gY2FudmFzLnRvZ2dsZU9iamVjdFNuYXBwaW5nKG9iamVjdFNuYXBwaW5nRW5hYmxlZClcclxuXHJcbiAgICAgIGlmIChvYmplY3RTbmFwcGluZ0VuYWJsZWQpIGNhbnZhcy50b2dnbGVPYmplY3RTbmFwcGluZyhmYWxzZSlcclxuICAgIH0gZWxzZSB0aGlzLnJlc3RvcmVPYmplY3RTbmFwcGluZ1N0YXRlPy4oKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvbk5vZGVNb3ZlZChjYW52YXM6IENhbnZhcywgbm9kZTogQ2FudmFzTm9kZSkge1xyXG4gICAgY29uc3Qgbm9kZURhdGEgPSBub2RlLmdldERhdGEoKVxyXG4gICAgaWYgKG5vZGVEYXRhLnR5cGUgIT09ICdmaWxlJyB8fCAhbm9kZURhdGEucG9ydGFsVG9GaWxlKSByZXR1cm5cclxuXHJcbiAgICB0aGlzLm9uT3BlblBvcnRhbE1vdmVkKGNhbnZhcywgbm9kZSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25PcGVuUG9ydGFsTW92ZWQoY2FudmFzOiBDYW52YXMsIHBvcnRhbE5vZGU6IENhbnZhc05vZGUpIHtcclxuICAgIGxldCBwb3J0YWxOb2RlRGF0YSA9IHBvcnRhbE5vZGUuZ2V0RGF0YSgpXHJcblxyXG4gICAgLy8gVXBkYXRlIG5lc3RlZCBub2RlcyBwb3NpdGlvbnNcclxuICAgIGNvbnN0IG5lc3RlZE5vZGVzSWRNYXAgPSBwb3J0YWxOb2RlLmdldERhdGEoKS5wb3J0YWxJZE1hcHM/Lm5vZGVJZE1hcFxyXG4gICAgaWYgKCFuZXN0ZWROb2Rlc0lkTWFwKSByZXR1cm5cclxuXHJcbiAgICBjb25zdCBuZXN0ZWROb2RlcyA9IE9iamVjdC5rZXlzKG5lc3RlZE5vZGVzSWRNYXApLm1hcChyZWZOb2RlSWQgPT4gY2FudmFzLm5vZGVzLmdldChyZWZOb2RlSWQpKVxyXG4gICAgICAuZmlsdGVyKG5vZGUgPT4gbm9kZSAhPT0gdW5kZWZpbmVkKSBhcyBDYW52YXNOb2RlW11cclxuICAgIGNvbnN0IHNvdXJjZUJCb3ggPSBDYW52YXNIZWxwZXIuZ2V0QkJveChuZXN0ZWROb2RlcylcclxuXHJcbiAgICAvLyBSZXNpemUgcG9ydGFsXHJcbiAgICBjb25zdCB0YXJnZXRTaXplID0gdGhpcy5nZXRQb3J0YWxTaXplKHNvdXJjZUJCb3gpXHJcbiAgICBpZiAocG9ydGFsTm9kZURhdGEud2lkdGggIT09IHRhcmdldFNpemUud2lkdGggfHwgcG9ydGFsTm9kZURhdGEuaGVpZ2h0ICE9PSB0YXJnZXRTaXplLmhlaWdodCkge1xyXG4gICAgICBwb3J0YWxOb2RlLnNldERhdGEoe1xyXG4gICAgICAgIC4uLnBvcnRhbE5vZGVEYXRhLFxyXG4gICAgICAgIHdpZHRoOiB0YXJnZXRTaXplLndpZHRoLFxyXG4gICAgICAgIGhlaWdodDogdGFyZ2V0U2l6ZS5oZWlnaHRcclxuICAgICAgfSlcclxuXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIC8vIE1vdmUgbmVzdGVkIG5vZGVzXHJcbiAgICBjb25zdCBwb3J0YWxPZmZzZXQgPSB7XHJcbiAgICAgIHg6IHBvcnRhbE5vZGVEYXRhLnggLSBzb3VyY2VCQm94Lm1pblggKyBQT1JUQUxfUEFERElORyxcclxuICAgICAgeTogcG9ydGFsTm9kZURhdGEueSAtIHNvdXJjZUJCb3gubWluWSArIFBPUlRBTF9QQURESU5HXHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChjb25zdCBuZXN0ZWROb2RlIG9mIG5lc3RlZE5vZGVzKSB7XHJcbiAgICAgIGNvbnN0IG5lc3RlZE5vZGVEYXRhID0gbmVzdGVkTm9kZS5nZXREYXRhKClcclxuXHJcbiAgICAgIG5lc3RlZE5vZGUuc2V0RGF0YSh7XHJcbiAgICAgICAgLi4ubmVzdGVkTm9kZURhdGEsXHJcbiAgICAgICAgeDogbmVzdGVkTm9kZURhdGEueCArIHBvcnRhbE9mZnNldC54LFxyXG4gICAgICAgIHk6IG5lc3RlZE5vZGVEYXRhLnkgKyBwb3J0YWxPZmZzZXQueVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZW1vdmVQb3J0YWxDYW52YXNEYXRhKF9jYW52YXM6IENhbnZhcywgZGF0YTogQ2FudmFzRGF0YSkge1xyXG4gICAgZGF0YS5lZGdlcyA9IGRhdGEuZWRnZXMuZmlsdGVyKGVkZ2VEYXRhID0+IHtcclxuICAgICAgaWYgKGVkZ2VEYXRhLnBvcnRhbElkICE9PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZVxyXG5cclxuICAgICAgY29uc3QgZnJvbU5vZGVEYXRhID0gZGF0YS5ub2Rlcy5maW5kKG5vZGVEYXRhID0+IG5vZGVEYXRhLmlkID09PSBlZGdlRGF0YS5mcm9tTm9kZSlcclxuICAgICAgY29uc3QgdG9Ob2RlRGF0YSA9IGRhdGEubm9kZXMuZmluZChub2RlRGF0YSA9PiBub2RlRGF0YS5pZCA9PT0gZWRnZURhdGEudG9Ob2RlKVxyXG4gICAgICBpZiAoIWZyb21Ob2RlRGF0YSB8fCAhdG9Ob2RlRGF0YSkgcmV0dXJuIHRydWVcclxuXHJcbiAgICAgIGlmIChmcm9tTm9kZURhdGEucG9ydGFsSWQgPT09IHVuZGVmaW5lZCAmJiB0b05vZGVEYXRhLnBvcnRhbElkID09PSB1bmRlZmluZWQpIHsgLy8gTm9ybWFsIGVkZ2VcclxuICAgICAgICByZXR1cm4gdHJ1ZSBcclxuICAgICAgfSBlbHNlIGlmIChmcm9tTm9kZURhdGEucG9ydGFsSWQgIT09IHVuZGVmaW5lZCAmJiB0b05vZGVEYXRhLnBvcnRhbElkICE9PSB1bmRlZmluZWQpIHsgLy8gQ29tcGxldGVseSBmcm9tIHBvcnRhbFxyXG4gICAgICAgIC8vIFNhdmUgdG8gcG9ydGFsIGZpbGU/IE9SIGRlbGV0ZSFcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfSBlbHNlIHsgLy8gUGFydGlhbGx5IGZyb20gcG9ydGFsXHJcbiAgICAgICAgY29uc3QgZnJvbVBvcnRhbE5vZGVEYXRhID0gZnJvbU5vZGVEYXRhLnBvcnRhbElkICE9PSB1bmRlZmluZWQgPyBmcm9tTm9kZURhdGEgOiB0b05vZGVEYXRhXHJcbiAgICAgICAgY29uc3Qgbm90RnJvbVBvcnRhbE5vZGVEYXRhID0gZnJvbU5vZGVEYXRhLnBvcnRhbElkICE9PSB1bmRlZmluZWQgPyB0b05vZGVEYXRhIDogZnJvbU5vZGVEYXRhXHJcblxyXG4gICAgICAgIG5vdEZyb21Qb3J0YWxOb2RlRGF0YS5lZGdlc1RvTm9kZUZyb21Qb3J0YWwgPSBub3RGcm9tUG9ydGFsTm9kZURhdGEuZWRnZXNUb05vZGVGcm9tUG9ydGFsID8/IHt9XHJcbiAgICAgICAgbm90RnJvbVBvcnRhbE5vZGVEYXRhLmVkZ2VzVG9Ob2RlRnJvbVBvcnRhbFtmcm9tUG9ydGFsTm9kZURhdGEucG9ydGFsSWQhXSA9IG5vdEZyb21Qb3J0YWxOb2RlRGF0YS5lZGdlc1RvTm9kZUZyb21Qb3J0YWxbZnJvbVBvcnRhbE5vZGVEYXRhLnBvcnRhbElkIV0gPz8gW11cclxuICAgICAgICBub3RGcm9tUG9ydGFsTm9kZURhdGEuZWRnZXNUb05vZGVGcm9tUG9ydGFsW2Zyb21Qb3J0YWxOb2RlRGF0YS5wb3J0YWxJZCFdLnB1c2goZWRnZURhdGEpXHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGRhdGEubm9kZXMgPSBkYXRhLm5vZGVzLmZpbHRlcihub2RlRGF0YSA9PiBub2RlRGF0YS5wb3J0YWxJZCA9PT0gdW5kZWZpbmVkKVxyXG5cclxuICAgIGZvciAoY29uc3QgcG9ydGFsTm9kZURhdGEgb2YgZGF0YS5ub2Rlcykge1xyXG4gICAgICBpZiAocG9ydGFsTm9kZURhdGEudHlwZSAhPT0gJ2ZpbGUnKSBjb250aW51ZVxyXG5cclxuICAgICAgLy8gUmVzZXQgcG9ydGFsIHNpemVcclxuICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ21haW50YWluQ2xvc2VkUG9ydGFsU2l6ZScpKSB7XHJcbiAgICAgICAgcG9ydGFsTm9kZURhdGEud2lkdGggPSBwb3J0YWxOb2RlRGF0YS5jbG9zZWRQb3J0YWxXaWR0aCA/PyBwb3J0YWxOb2RlRGF0YS53aWR0aFxyXG4gICAgICAgIHBvcnRhbE5vZGVEYXRhLmhlaWdodCA9IHBvcnRhbE5vZGVEYXRhLmNsb3NlZFBvcnRhbEhlaWdodCA/PyBwb3J0YWxOb2RlRGF0YS5oZWlnaHRcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gUmVtb3ZlIHJlZmVyZW5jZXMgdG8gcG9ydGFsIG5vZGVzIGFuZCBlZGdlc1xyXG4gICAgICBkZWxldGUgcG9ydGFsTm9kZURhdGEuY2xvc2VkUG9ydGFsV2lkdGhcclxuICAgICAgZGVsZXRlIHBvcnRhbE5vZGVEYXRhLmNsb3NlZFBvcnRhbEhlaWdodFxyXG4gICAgICBkZWxldGUgcG9ydGFsTm9kZURhdGEucG9ydGFsSWRNYXBzXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGdldENhbnZhc0RhdGFXaXRoUG9ydGFscyhjYW52YXM6IENhbnZhcywgZGF0YVJlZjogQ2FudmFzRGF0YSk6IFByb21pc2U8Q2FudmFzRGF0YT4ge1xyXG4gICAgLy8gRGVlcCBjb3B5IGRhdGEgLSBJZiBhbm90aGVyIGZpbGUgZ2V0cyBvcGVuZWQgaW4gdGhlIHNhbWUgdmlldywgdGhlIGRhdGEgd291bGQgZ2V0IG92ZXJ3cml0dGVuXHJcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkYXRhUmVmKSkgYXMgQ2FudmFzRGF0YVxyXG5cclxuICAgIC8vIE9wZW4gcG9ydGFsc1xyXG4gICAgY29uc3QgYWRkZWREYXRhID0gYXdhaXQgUHJvbWlzZS5hbGwoZGF0YS5ub2Rlcy5tYXAobm9kZURhdGEgPT4gdGhpcy50cnlPcGVuUG9ydGFsKGNhbnZhcywgbm9kZURhdGEpKSlcclxuICAgIGZvciAoY29uc3QgbmV3RGF0YSBvZiBhZGRlZERhdGEpIHtcclxuICAgICAgZGF0YS5ub2Rlcy5wdXNoKC4uLm5ld0RhdGEubm9kZXMpXHJcbiAgICAgIGRhdGEuZWRnZXMucHVzaCguLi5uZXdEYXRhLmVkZ2VzKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkZCBjcm9zcy1wb3J0YWwgZWRnZXNcclxuICAgIGZvciAoY29uc3Qgb3JpZ2luTm9kZURhdGEgb2YgZGF0YS5ub2Rlcykge1xyXG4gICAgICBpZiAob3JpZ2luTm9kZURhdGEuZWRnZXNUb05vZGVGcm9tUG9ydGFsID09PSB1bmRlZmluZWQpIGNvbnRpbnVlXHJcblxyXG4gICAgICBmb3IgKGNvbnN0IFtyZWxhdGl2ZVBvcnRhbElkLCBlZGdlc10gb2YgT2JqZWN0LmVudHJpZXMob3JpZ2luTm9kZURhdGEuZWRnZXNUb05vZGVGcm9tUG9ydGFsKSkge1xyXG4gICAgICAgIGNvbnN0IGlkUHJlZml4ID0gb3JpZ2luTm9kZURhdGEucG9ydGFsSWQgPyBgJHtvcmlnaW5Ob2RlRGF0YS5wb3J0YWxJZH0tYCA6ICcnXHJcblxyXG4gICAgICAgIGNvbnN0IHBvcnRhbElkID0gYCR7aWRQcmVmaXh9JHtyZWxhdGl2ZVBvcnRhbElkfWBcclxuICAgICAgICBjb25zdCB0YXJnZXRQb3J0YWxEYXRhID0gZGF0YS5ub2Rlcy5maW5kKG5vZGVEYXRhID0+IG5vZGVEYXRhLmlkID09PSBwb3J0YWxJZClcclxuXHJcbiAgICAgICAgLy8gSWYgdGFyZ2V0IHBvcnRhbCBpcyBkZWxldGVkLCByZW1vdmUgZWRnZXNcclxuICAgICAgICBpZiAoIXRhcmdldFBvcnRhbERhdGEpIHtcclxuICAgICAgICAgIGRlbGV0ZSBvcmlnaW5Ob2RlRGF0YS5lZGdlc1RvTm9kZUZyb21Qb3J0YWwhW3BvcnRhbElkXVxyXG4gICAgICAgICAgY29udGludWVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElmIHBvcnRhbCBpcyBvcGVuLCBhZGQgZWRnZXNcclxuICAgICAgICBpZiAodGFyZ2V0UG9ydGFsRGF0YS5wb3J0YWxUb0ZpbGUpIHtcclxuICAgICAgICAgIC8vIFB1c2ggZWRnZXMgd2l0aCB1cGRhdGVkIGZyb20gYW5kIHRvIGlkc1xyXG4gICAgICAgICAgZGF0YS5lZGdlcy5wdXNoKC4uLmVkZ2VzLm1hcChlZGdlID0+ICh7XHJcbiAgICAgICAgICAgIC4uLmVkZ2UsXHJcbiAgICAgICAgICAgIHBvcnRhbElkOiBvcmlnaW5Ob2RlRGF0YS5wb3J0YWxJZCxcclxuICAgICAgICAgICAgZnJvbU5vZGU6IGAke2lkUHJlZml4fSR7ZWRnZS5mcm9tTm9kZX1gLFxyXG4gICAgICAgICAgICB0b05vZGU6IGAke2lkUHJlZml4fSR7ZWRnZS50b05vZGV9YFxyXG4gICAgICAgICAgfSkpKVxyXG5cclxuICAgICAgICAgIGRlbGV0ZSBvcmlnaW5Ob2RlRGF0YS5lZGdlc1RvTm9kZUZyb21Qb3J0YWwhW3BvcnRhbElkXVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnc2hvd0VkZ2VzSW50b0Rpc2FibGVkUG9ydGFscycpKSB7XHJcbiAgICAgICAgICAvLyBJZiBwb3J0YWwgaXMgY2xvc2VkLCBhZGQgYWx0ZXJuYXRpdmUgZWRnZXMgZGlyZWN0bHkgdG8gcG9ydGFsXHJcbiAgICAgICAgICAvLyBCdXQgZG9uJ3QgZGVsZXRlIHRoZSBlZGdlc1xyXG5cclxuICAgICAgICAgIGRhdGEuZWRnZXMucHVzaCguLi5lZGdlcy5tYXAoZWRnZSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFdoaWNoIGVuZCBpcyBmcm9tIHBvcnRhbD9cclxuICAgICAgICAgICAgY29uc3QgZnJvbU5vZGVJZCA9IGAke2lkUHJlZml4fSR7ZWRnZS5mcm9tTm9kZX1gXHJcbiAgICAgICAgICAgIGNvbnN0IGZyb21Ob2RlID0gZGF0YS5ub2Rlcy5maW5kKG5vZGVEYXRhID0+IG5vZGVEYXRhLmlkID09PSBmcm9tTm9kZUlkKVxyXG4gICAgICAgICAgICBjb25zdCB0b05vZGVJZCA9IGAke2lkUHJlZml4fSR7ZWRnZS50b05vZGV9YFxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAuLi5lZGdlLFxyXG4gICAgICAgICAgICAgIGZyb21Ob2RlOiBmcm9tTm9kZSA/IGZyb21Ob2RlSWQgOiBwb3J0YWxJZCxcclxuICAgICAgICAgICAgICB0b05vZGU6IGZyb21Ob2RlID8gcG9ydGFsSWQgOiB0b05vZGVJZCxcclxuICAgICAgICAgICAgICBwb3J0YWxJZDogcG9ydGFsSWQgLy8gTWFyayBpdCBhcyB0ZW1wb3JhcnlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSkpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJZiBubyBtb3JlIGVkZ2VzLCBkZWxldGUgdGhlIHByb3BlcnR5XHJcbiAgICAgIGlmIChPYmplY3Qua2V5cyhvcmlnaW5Ob2RlRGF0YS5lZGdlc1RvTm9kZUZyb21Qb3J0YWwhKS5sZW5ndGggPT09IDApXHJcbiAgICAgICAgZGVsZXRlIG9yaWdpbk5vZGVEYXRhLmVkZ2VzVG9Ob2RlRnJvbVBvcnRhbFxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHRyeU9wZW5Qb3J0YWwoY2FudmFzOiBDYW52YXMsIHBvcnRhbE5vZGVEYXRhOiBDYW52YXNOb2RlRGF0YSk6IFByb21pc2U8Q2FudmFzRGF0YT4ge1xyXG4gICAgY29uc3QgYWRkZWREYXRhOiBDYW52YXNEYXRhID0geyBub2RlczogW10sIGVkZ2VzOiBbXSB9XHJcbiAgICBpZiAocG9ydGFsTm9kZURhdGEudHlwZSAhPT0gJ2ZpbGUnIHx8ICFwb3J0YWxOb2RlRGF0YS5wb3J0YWxUb0ZpbGUpIHJldHVybiBhZGRlZERhdGFcclxuXHJcbiAgICAvLyBVcGRhdGUgcG9ydGFsIGZpbGVcclxuICAgIHBvcnRhbE5vZGVEYXRhLnBvcnRhbFRvRmlsZSA9IHBvcnRhbE5vZGVEYXRhLmZpbGVcclxuXHJcbiAgICAvLyBGaXggcmVjdXJzaXZlIHBvcnRhbHNcclxuICAgIGlmIChwb3J0YWxOb2RlRGF0YS5wb3J0YWxUb0ZpbGUgPT09IGNhbnZhcy52aWV3LmZpbGUucGF0aCkge1xyXG4gICAgICBwb3J0YWxOb2RlRGF0YS5wb3J0YWxUb0ZpbGUgPSB1bmRlZmluZWRcclxuICAgICAgcmV0dXJuIGFkZGVkRGF0YVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHBvcnRhbEZpbGUgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBvcnRhbE5vZGVEYXRhLmZpbGUhKVxyXG4gICAgaWYgKCEocG9ydGFsRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB8fCBwb3J0YWxGaWxlLmV4dGVuc2lvbiAhPT0gJ2NhbnZhcycpIHtcclxuICAgICAgcG9ydGFsTm9kZURhdGEucG9ydGFsVG9GaWxlID0gdW5kZWZpbmVkXHJcbiAgICAgIHJldHVybiBhZGRlZERhdGFcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwb3J0YWxGaWxlRGF0YSA9IEpTT04ucGFyc2UoYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmNhY2hlZFJlYWQocG9ydGFsRmlsZSkpXHJcbiAgICBpZiAoIXBvcnRhbEZpbGVEYXRhKSB7XHJcbiAgICAgIHBvcnRhbE5vZGVEYXRhLnBvcnRhbFRvRmlsZSA9IHVuZGVmaW5lZFxyXG4gICAgICByZXR1cm4gYWRkZWREYXRhXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWRkIHBvcnRhbCBub2RlcyBhbmQgZWRnZXMgaWQgbWFwXHJcbiAgICBwb3J0YWxOb2RlRGF0YS5wb3J0YWxJZE1hcHMgPSB7XHJcbiAgICAgIG5vZGVJZE1hcDoge30sXHJcbiAgICAgIGVkZ2VJZE1hcDoge31cclxuICAgIH1cclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgbmVzdGVkIG5vZGUgb2Zmc2V0XHJcbiAgICBjb25zdCBzb3VyY2VNaW5Db29yZGluYXRlcyA9IENhbnZhc0hlbHBlci5nZXRCQm94KHBvcnRhbEZpbGVEYXRhLm5vZGVzKVxyXG4gICAgY29uc3QgcG9ydGFsT2Zmc2V0ID0ge1xyXG4gICAgICB4OiBwb3J0YWxOb2RlRGF0YS54IC0gc291cmNlTWluQ29vcmRpbmF0ZXMubWluWCArIFBPUlRBTF9QQURESU5HLFxyXG4gICAgICB5OiBwb3J0YWxOb2RlRGF0YS55IC0gc291cmNlTWluQ29vcmRpbmF0ZXMubWluWSArIFBPUlRBTF9QQURESU5HXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWRkIG5vZGVzIGZyb20gcG9ydGFsXHJcbiAgICBmb3IgKGNvbnN0IG5vZGVEYXRhRnJvbVBvcnRhbCBvZiBwb3J0YWxGaWxlRGF0YS5ub2Rlcykge1xyXG4gICAgICBjb25zdCByZWZOb2RlSWQgPSBgJHtwb3J0YWxOb2RlRGF0YS5pZH0tJHtub2RlRGF0YUZyb21Qb3J0YWwuaWR9YFxyXG4gICAgICBwb3J0YWxOb2RlRGF0YS5wb3J0YWxJZE1hcHMubm9kZUlkTWFwW3JlZk5vZGVJZF0gPSBub2RlRGF0YUZyb21Qb3J0YWwuaWRcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGFkZGVkTm9kZSA9IHtcclxuICAgICAgICAuLi5ub2RlRGF0YUZyb21Qb3J0YWwsXHJcbiAgICAgICAgaWQ6IHJlZk5vZGVJZCxcclxuICAgICAgICB4OiBub2RlRGF0YUZyb21Qb3J0YWwueCArIHBvcnRhbE9mZnNldC54LFxyXG4gICAgICAgIHk6IG5vZGVEYXRhRnJvbVBvcnRhbC55ICsgcG9ydGFsT2Zmc2V0LnksXHJcbiAgICAgICAgcG9ydGFsSWQ6IHBvcnRhbE5vZGVEYXRhLmlkXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGFkZGVkRGF0YS5ub2Rlcy5wdXNoKGFkZGVkTm9kZSlcclxuXHJcbiAgICAgIGNvbnN0IG5lc3RlZE5vZGVzID0gYXdhaXQgdGhpcy50cnlPcGVuUG9ydGFsKGNhbnZhcywgYWRkZWROb2RlKVxyXG4gICAgICBhZGRlZERhdGEubm9kZXMucHVzaCguLi5uZXN0ZWROb2Rlcy5ub2RlcylcclxuICAgICAgYWRkZWREYXRhLmVkZ2VzLnB1c2goLi4ubmVzdGVkTm9kZXMuZWRnZXMpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWRkIGVkZ2VzIGZyb20gcG9ydGFsXHJcbiAgICBmb3IgKGNvbnN0IGVkZ2VEYXRhRnJvbVBvcnRhbCBvZiBwb3J0YWxGaWxlRGF0YS5lZGdlcykge1xyXG4gICAgICBjb25zdCByZWZFZGdlSWQgPSBgJHtwb3J0YWxOb2RlRGF0YS5pZH0tJHtlZGdlRGF0YUZyb21Qb3J0YWwuaWR9YFxyXG4gICAgICBwb3J0YWxOb2RlRGF0YS5wb3J0YWxJZE1hcHMuZWRnZUlkTWFwW3JlZkVkZ2VJZF0gPSBlZGdlRGF0YUZyb21Qb3J0YWwuaWRcclxuXHJcbiAgICAgIGNvbnN0IGZyb21SZWZOb2RlID0gT2JqZWN0LmVudHJpZXMocG9ydGFsTm9kZURhdGEucG9ydGFsSWRNYXBzLm5vZGVJZE1hcClcclxuICAgICAgICAuZmluZCgoW19yZWZOb2RlSWQsIG5vZGVJZF0pID0+IG5vZGVJZCA9PT0gZWRnZURhdGFGcm9tUG9ydGFsLmZyb21Ob2RlKT8uWzBdXHJcbiAgICAgIGNvbnN0IHRvUmVmTm9kZSA9IE9iamVjdC5lbnRyaWVzKHBvcnRhbE5vZGVEYXRhLnBvcnRhbElkTWFwcy5ub2RlSWRNYXApXHJcbiAgICAgICAgLmZpbmQoKFtfcmVmTm9kZUlkLCBub2RlSWRdKSA9PiBub2RlSWQgPT09IGVkZ2VEYXRhRnJvbVBvcnRhbC50b05vZGUpPy5bMF1cclxuXHJcbiAgICAgIGFkZGVkRGF0YS5lZGdlcy5wdXNoKHtcclxuICAgICAgICAuLi5lZGdlRGF0YUZyb21Qb3J0YWwsXHJcbiAgICAgICAgaWQ6IHJlZkVkZ2VJZCxcclxuICAgICAgICBmcm9tTm9kZTogZnJvbVJlZk5vZGUsXHJcbiAgICAgICAgdG9Ob2RlOiB0b1JlZk5vZGUsXHJcbiAgICAgICAgcG9ydGFsSWQ6IHBvcnRhbE5vZGVEYXRhLmlkXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVzaXplIHBvcnRhbFxyXG4gICAgY29uc3QgbmVzdGVkTm9kZXNCQm94ID0gQ2FudmFzSGVscGVyLmdldEJCb3goYWRkZWREYXRhLm5vZGVzKVxyXG4gICAgY29uc3QgdGFyZ2V0U2l6ZSA9IHRoaXMuZ2V0UG9ydGFsU2l6ZShuZXN0ZWROb2Rlc0JCb3gpXHJcblxyXG4gICAgLy8gU2F2ZSBjbG9zZWQgcG9ydGFsIHNpemVcclxuICAgIHBvcnRhbE5vZGVEYXRhLmNsb3NlZFBvcnRhbFdpZHRoID0gcG9ydGFsTm9kZURhdGEud2lkdGhcclxuICAgIHBvcnRhbE5vZGVEYXRhLmNsb3NlZFBvcnRhbEhlaWdodCA9IHBvcnRhbE5vZGVEYXRhLmhlaWdodFxyXG5cclxuICAgIC8vIFNldCBvcGVuIHBvcnRhbCBzaXplXHJcbiAgICBwb3J0YWxOb2RlRGF0YS53aWR0aCA9IHRhcmdldFNpemUud2lkdGhcclxuICAgIHBvcnRhbE5vZGVEYXRhLmhlaWdodCA9IHRhcmdldFNpemUuaGVpZ2h0XHJcblxyXG4gICAgcmV0dXJuIGFkZGVkRGF0YVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRQb3J0YWxTaXplKHNvdXJjZUJCb3g6IEJCb3gpIHtcclxuICAgIGNvbnN0IHNvdXJjZVNpemUgPSB7XHJcbiAgICAgIHdpZHRoOiBzb3VyY2VCQm94Lm1heFggLSBzb3VyY2VCQm94Lm1pblgsXHJcbiAgICAgIGhlaWdodDogc291cmNlQkJveC5tYXhZIC0gc291cmNlQkJveC5taW5ZXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdGFyZ2V0U2l6ZSA9IHtcclxuICAgICAgd2lkdGg6IE1hdGgubWF4KHNvdXJjZVNpemUud2lkdGggKyBQT1JUQUxfUEFERElORyAqIDIsIE1JTl9PUEVOX1BPUlRBTF9TSVpFLndpZHRoKSxcclxuICAgICAgaGVpZ2h0OiBNYXRoLm1heChzb3VyY2VTaXplLmhlaWdodCArIFBPUlRBTF9QQURESU5HICogMiwgTUlOX09QRU5fUE9SVEFMX1NJWkUuaGVpZ2h0KVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHRhcmdldFNpemUud2lkdGgpKSB0YXJnZXRTaXplLndpZHRoID0gTUlOX09QRU5fUE9SVEFMX1NJWkUud2lkdGhcclxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHRhcmdldFNpemUuaGVpZ2h0KSkgdGFyZ2V0U2l6ZS5oZWlnaHQgPSBNSU5fT1BFTl9QT1JUQUxfU0laRS5oZWlnaHRcclxuXHJcbiAgICByZXR1cm4gdGFyZ2V0U2l6ZVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMsIENhbnZhc0VkZ2UsIENhbnZhc05vZGUgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgU2V0dGluZ3NNYW5hZ2VyIGZyb20gXCJzcmMvc2V0dGluZ3NcIlxyXG5pbXBvcnQgeyBGaWxlU2VsZWN0TW9kYWwgfSBmcm9tIFwic3JjL3V0aWxzL21vZGFsLWhlbHBlclwiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCZXR0ZXJEZWZhdWx0U2V0dGluZ3NDYW52YXNFeHRlbnNpb24gIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiB0cnVlIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMubW9kaWZ5Q2FudmFzU2V0dGluZ3ModGhpcy5wbHVnaW4uZ2V0Q3VycmVudENhbnZhcygpKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgU2V0dGluZ3NNYW5hZ2VyLlNFVFRJTkdTX0NIQU5HRURfRVZFTlQsXHJcbiAgICAgICgpID0+IHRoaXMubW9kaWZ5Q2FudmFzU2V0dGluZ3ModGhpcy5wbHVnaW4uZ2V0Q3VycmVudENhbnZhcygpKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkNhbnZhc0NoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5tb2RpZnlDYW52YXNTZXR0aW5ncyhjYW52YXMpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuRG91YmxlQ2xpY2ssXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgZXZlbnQ6IE1vdXNlRXZlbnQsIHByZXZlbnREZWZhdWx0OiB7IHZhbHVlOiBib29sZWFuIH0pID0+IHRoaXMub25Eb3VibGVDbGljayhjYW52YXMsIGV2ZW50LCBwcmV2ZW50RGVmYXVsdClcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Ob2RlQ3JlYXRlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSA9PiB0aGlzLmFwcGx5RGVmYXVsdE5vZGVTdHlsZXMoY2FudmFzLCBub2RlKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkVkZ2VDcmVhdGVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIGVkZ2U6IENhbnZhc0VkZ2UpID0+IHRoaXMuYXBwbHlEZWZhdWx0RWRnZVN0eWxlcyhjYW52YXMsIGVkZ2UpXHJcbiAgICApKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBtb2RpZnlDYW52YXNTZXR0aW5ncyhjYW52YXM6IENhbnZhcyB8IG51bGwpIHtcclxuICAgIGlmICghY2FudmFzKSByZXR1cm5cclxuXHJcbiAgICBjYW52YXMuY29uZmlnLmRlZmF1bHRUZXh0Tm9kZURpbWVuc2lvbnMgPSB7XHJcbiAgICAgIHdpZHRoOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdkZWZhdWx0VGV4dE5vZGVXaWR0aCcpLFxyXG4gICAgICBoZWlnaHQ6IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2RlZmF1bHRUZXh0Tm9kZUhlaWdodCcpXHJcbiAgICB9XHJcblxyXG4gICAgY2FudmFzLmNvbmZpZy5kZWZhdWx0RmlsZU5vZGVEaW1lbnNpb25zID0ge1xyXG4gICAgICB3aWR0aDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZGVmYXVsdEZpbGVOb2RlV2lkdGgnKSxcclxuICAgICAgaGVpZ2h0OiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdkZWZhdWx0RmlsZU5vZGVIZWlnaHQnKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBvbkRvdWJsZUNsaWNrKGNhbnZhczogQ2FudmFzLCBldmVudDogTW91c2VFdmVudCwgcHJldmVudERlZmF1bHQ6IHsgdmFsdWU6IGJvb2xlYW4gfSkge1xyXG4gICAgaWYgKGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgfHwgZXZlbnQudGFyZ2V0ICE9PSBjYW52YXMud3JhcHBlckVsIHx8IGNhbnZhcy5pc0RyYWdnaW5nIHx8IGNhbnZhcy5yZWFkb25seSkgcmV0dXJuXHJcbiAgICBwcmV2ZW50RGVmYXVsdC52YWx1ZSA9IHRydWVcclxuXHJcbiAgICB2YXIgcG9zID0gY2FudmFzLnBvc0Zyb21FdnQoZXZlbnQpXHJcblxyXG4gICAgc3dpdGNoICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdub2RlVHlwZU9uRG91YmxlQ2xpY2snKSkge1xyXG4gICAgICBjYXNlICdmaWxlJzpcclxuICAgICAgICBjb25zdCBmaWxlID0gYXdhaXQgbmV3IEZpbGVTZWxlY3RNb2RhbCh0aGlzLnBsdWdpbi5hcHAsIHVuZGVmaW5lZCwgdHJ1ZSkuYXdhaXRJbnB1dCgpXHJcblxyXG4gICAgICAgIGNhbnZhcy5jcmVhdGVGaWxlTm9kZSh7XHJcbiAgICAgICAgICBwb3M6IHBvcyxcclxuICAgICAgICAgIHBvc2l0aW9uOiAnY2VudGVyJyxcclxuICAgICAgICAgIGZpbGU6IGZpbGVcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBicmVha1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGNhbnZhcy5jcmVhdGVUZXh0Tm9kZSh7XHJcbiAgICAgICAgICBwb3M6IHBvcyxcclxuICAgICAgICAgIHBvc2l0aW9uOiAnY2VudGVyJ1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFwcGx5RGVmYXVsdE5vZGVTdHlsZXMoX2NhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSB7XHJcbiAgICBjb25zdCBub2RlRGF0YSA9IG5vZGUuZ2V0RGF0YSgpXHJcbiAgICBpZiAobm9kZURhdGEudHlwZSAhPT0gJ3RleHQnKSByZXR1cm5cclxuXHJcbiAgICBub2RlLnNldERhdGEoe1xyXG4gICAgICAuLi5ub2RlRGF0YSxcclxuICAgICAgc3R5bGVBdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgLi4ubm9kZURhdGEuc3R5bGVBdHRyaWJ1dGVzLFxyXG4gICAgICAgIC4uLnRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2RlZmF1bHRUZXh0Tm9kZVN0eWxlQXR0cmlidXRlcycpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFwcGx5RGVmYXVsdEVkZ2VTdHlsZXMoX2NhbnZhczogQ2FudmFzLCBlZGdlOiBDYW52YXNFZGdlKSB7XHJcbiAgICBjb25zdCBlZGdlRGF0YSA9IGVkZ2UuZ2V0RGF0YSgpXHJcblxyXG4gICAgZWRnZS5zZXREYXRhKHtcclxuICAgICAgLi4uZWRnZURhdGEsXHJcbiAgICAgIHN0eWxlQXR0cmlidXRlczoge1xyXG4gICAgICAgIC4uLmVkZ2VEYXRhLnN0eWxlQXR0cmlidXRlcyxcclxuICAgICAgICAuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdkZWZhdWx0RWRnZVN0eWxlQXR0cmlidXRlcycpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IFdvcmtzcGFjZVdpbmRvdyB9IGZyb20gXCJvYnNpZGlhblwiXHJcbmltcG9ydCB7IENhbnZhcyB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCB7IENhbnZhc0V2ZW50IH0gZnJvbSBcInNyYy9jb3JlL2V2ZW50c1wiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcblxyXG5jb25zdCBERUZBVUxUX0NPTE9SU19DT1VOVCA9IDZcclxuY29uc3QgQ1VTVE9NX0NPTE9SU19NT0RfU1RZTEVTX0lEID0gJ21vZC1jdXN0b20tY29sb3JzJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sb3JQYWxldHRlQ2FudmFzRXh0ZW5zaW9uIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBvYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlcnxudWxsID0gbnVsbFxyXG4gIFxyXG4gIGlzRW5hYmxlZCgpIHsgcmV0dXJuIHRydWUgfVxyXG4gIFxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgICd3aW5kb3ctb3BlbicsXHJcbiAgICAgIChfd2luOiBXb3Jrc3BhY2VXaW5kb3csIF93aW5kb3c6IFdpbmRvdykgPT4gdGhpcy51cGRhdGVDdXN0b21Db2xvck1vZFN0eWxlQ2xhc3NlcygpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgJ2Nzcy1jaGFuZ2UnLFxyXG4gICAgICAoKSA9PiB0aGlzLnVwZGF0ZUN1c3RvbUNvbG9yTW9kU3R5bGVDbGFzc2VzKClcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy51cGRhdGVDdXN0b21Db2xvck1vZFN0eWxlQ2xhc3NlcygpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Qb3B1cE1lbnVDcmVhdGVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMpID0+IHRoaXMucGF0Y2hDb2xvclNlbGVjdGlvbihjYW52YXMpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyKCgpID0+IHRoaXMub2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlQ3VzdG9tQ29sb3JNb2RTdHlsZUNsYXNzZXMoKSB7XHJcbiAgICBjb25zdCBjdXN0b21Dc3MgPSB0aGlzLmdldEN1c3RvbUNvbG9ycygpLm1hcCgoY29sb3JJZCkgPT4gYFxyXG4gICAgICAubW9kLWNhbnZhcy1jb2xvci0ke2NvbG9ySWR9IHtcclxuICAgICAgICAtLWNhbnZhcy1jb2xvcjogdmFyKC0tY2FudmFzLWNvbG9yLSR7Y29sb3JJZH0pO1xyXG4gICAgICB9XHJcbiAgICBgKS5qb2luKCcnKVxyXG5cclxuICAgIGZvciAoY29uc3Qgd2luIG9mIHRoaXMucGx1Z2luLndpbmRvd3NNYW5hZ2VyLndpbmRvd3MpIHtcclxuICAgICAgY29uc3QgZG9jID0gd2luLmRvY3VtZW50XHJcbiAgICAgIFxyXG4gICAgICBkb2MuZ2V0RWxlbWVudEJ5SWQoQ1VTVE9NX0NPTE9SU19NT0RfU1RZTEVTX0lEKT8ucmVtb3ZlKClcclxuXHJcbiAgICAgIGNvbnN0IGN1c3RvbUNvbG9yTW9kU3R5bGUgPSBkb2MuY3JlYXRlRWxlbWVudCgnc3R5bGUnKVxyXG4gICAgICBjdXN0b21Db2xvck1vZFN0eWxlLmlkID0gQ1VTVE9NX0NPTE9SU19NT0RfU1RZTEVTX0lEXHJcbiAgICAgIGRvYy5oZWFkLmFwcGVuZENoaWxkKGN1c3RvbUNvbG9yTW9kU3R5bGUpXHJcblxyXG4gICAgICBjdXN0b21Db2xvck1vZFN0eWxlLnRleHRDb250ZW50ID0gY3VzdG9tQ3NzXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHBhdGNoQ29sb3JTZWxlY3Rpb24oY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGlmICh0aGlzLm9ic2VydmVyKSB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKVxyXG5cclxuICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihtdXRhdGlvbnMgPT4ge1xyXG4gICAgICBjb25zdCBjb2xvck1lbnVPcGVuZWQgPSBtdXRhdGlvbnMuc29tZShtdXRhdGlvbiA9PiBcclxuICAgICAgICBPYmplY3QudmFsdWVzKG11dGF0aW9uLmFkZGVkTm9kZXMpLnNvbWUoKG5vZGU6IE5vZGUpID0+IFxyXG4gICAgICAgICAgbm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmIG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYW52YXMtc3VibWVudScpICYmIE9iamVjdC52YWx1ZXMobm9kZS5jaGlsZE5vZGVzKS5zb21lKChub2RlOiBOb2RlKSA9PlxyXG4gICAgICAgICAgICBub2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiYgbm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ2NhbnZhcy1jb2xvci1waWNrZXItaXRlbScpXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgKVxyXG4gICAgICApXHJcbiAgICAgIGlmICghY29sb3JNZW51T3BlbmVkKSByZXR1cm5cclxuXHJcbiAgICAgIGNvbnN0IHN1Ym1lbnUgPSBjYW52YXMubWVudS5tZW51RWwucXVlcnlTZWxlY3RvcignLmNhbnZhcy1zdWJtZW51JylcclxuICAgICAgaWYgKCFzdWJtZW51KSByZXR1cm5cclxuXHJcbiAgICAgIGNvbnN0IGN1cnJlbnROb2RlQ29sb3IgPSBjYW52YXMuZ2V0U2VsZWN0aW9uRGF0YSgpLm5vZGVzLm1hcChub2RlID0+IG5vZGUuY29sb3IpLmxhc3QoKVxyXG4gICAgICBmb3IgKGNvbnN0IGNvbG9ySWQgb2YgdGhpcy5nZXRDdXN0b21Db2xvcnMoKSkge1xyXG4gICAgICAgIGNvbnN0IGN1c3RvbUNvbG9yTWVudUl0ZW0gPSB0aGlzLmNyZWF0ZUNvbG9yTWVudUl0ZW0oY2FudmFzLCBjb2xvcklkKVxyXG4gICAgICAgIGlmIChjdXJyZW50Tm9kZUNvbG9yID09PSBjb2xvcklkKSBjdXN0b21Db2xvck1lbnVJdGVtLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpXHJcbiAgICAgICAgXHJcbiAgICAgICAgc3VibWVudS5pbnNlcnRCZWZvcmUoY3VzdG9tQ29sb3JNZW51SXRlbSwgc3VibWVudS5sYXN0Q2hpbGQpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5vYnNlcnZlci5vYnNlcnZlKGNhbnZhcy5tZW51Lm1lbnVFbCwgeyBjaGlsZExpc3Q6IHRydWUgfSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY3JlYXRlQ29sb3JNZW51SXRlbShjYW52YXM6IENhbnZhcywgY29sb3JJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBtZW51SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICBtZW51SXRlbS5jbGFzc0xpc3QuYWRkKCdjYW52YXMtY29sb3ItcGlja2VyLWl0ZW0nKVxyXG4gICAgbWVudUl0ZW0uY2xhc3NMaXN0LmFkZChgbW9kLWNhbnZhcy1jb2xvci0ke2NvbG9ySWR9YClcclxuXHJcbiAgICBtZW51SXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgbWVudUl0ZW0uY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJylcclxuXHJcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBjYW52YXMuc2VsZWN0aW9uKSB7XHJcbiAgICAgICAgaXRlbS5zZXRDb2xvcihjb2xvcklkKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjYW52YXMucmVxdWVzdFNhdmUoKVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gbWVudUl0ZW1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0Q3VzdG9tQ29sb3JzKCk6IHN0cmluZ1tdIHtcclxuICAgIGNvbnN0IGNvbG9yczogc3RyaW5nW10gPSBbXVxyXG5cclxuICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgIGNvbnN0IGNvbG9ySWQgPSAoREVGQVVMVF9DT0xPUlNfQ09VTlQgKyBjb2xvcnMubGVuZ3RoICsgMSkudG9TdHJpbmcoKVxyXG4gICAgICBpZiAoIWdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShgLS1jYW52YXMtY29sb3ItJHtjb2xvcklkfWApKSBicmVha1xyXG5cclxuICAgICAgY29sb3JzLnB1c2goY29sb3JJZClcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY29sb3JzXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IHNldEljb24gfSBmcm9tIFwib2JzaWRpYW5cIlxyXG5pbXBvcnQgeyBCQm94LCBDYW52YXMsIENhbnZhc0RhdGEsIENhbnZhc05vZGUgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgKiBhcyBCQm94SGVscGVyIGZyb20gXCJzcmMvdXRpbHMvYmJveC1oZWxwZXJcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuY29uc3QgQ09MTEFQU0VfQlVUVE9OX0lEID0gJ2dyb3VwLWNvbGxhcHNlLWJ1dHRvbidcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbGxhcHNpYmxlR3JvdXBzQ2FudmFzRXh0ZW5zaW9uIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiAnY29sbGFwc2libGVHcm91cHNGZWF0dXJlRW5hYmxlZCcgYXMgY29uc3QgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Ob2RlQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSA9PiB0aGlzLm9uTm9kZUNoYW5nZWQoY2FudmFzLCBub2RlKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Lk5vZGVCQm94UmVxdWVzdGVkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIG5vZGU6IENhbnZhc05vZGUsIGJib3g6IEJCb3gpID0+IHRoaXMub25Ob2RlQkJveFJlcXVlc3RlZChjYW52YXMsIG5vZGUsIGJib3gpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuRGF0YVJlcXVlc3RlZCxcclxuICAgICAgKF9jYW52YXM6IENhbnZhcywgZGF0YTogQ2FudmFzRGF0YSkgPT4gdGhpcy5leHBhbmRDb2xsYXBzZWROb2RlcyhkYXRhKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkxvYWREYXRhLFxyXG4gICAgICAoX2NhbnZhczogQ2FudmFzLCBkYXRhOiBDYW52YXNEYXRhLCBfc2V0RGF0YTogKGRhdGE6IENhbnZhc0RhdGEpID0+IHZvaWQpID0+IHRoaXMuY29sbGFwc2VOb2RlcyhkYXRhKVxyXG4gICAgKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25Ob2RlQ2hhbmdlZChjYW52YXM6IENhbnZhcywgZ3JvdXBOb2RlOiBDYW52YXNOb2RlKSB7XHJcbiAgICBjb25zdCBncm91cE5vZGVEYXRhID0gZ3JvdXBOb2RlLmdldERhdGEoKVxyXG4gICAgaWYgKGdyb3VwTm9kZURhdGEudHlwZSAhPT0gJ2dyb3VwJykgcmV0dXJuXHJcblxyXG4gICAgLy8gUmVtb3ZlIHRoZSBjb2xsYXBzZS9leHBhbmQgYnV0dG9uXHJcbiAgICBncm91cE5vZGUubm9kZUVsPy5xdWVyeVNlbGVjdG9yQWxsKGAjJHtDT0xMQVBTRV9CVVRUT05fSUR9YCkuZm9yRWFjaCgoZWwpID0+IGVsLnJlbW92ZSgpKVxyXG5cclxuICAgIC8vIEFkZCBjb2xsYXBzZS9leHBhbmQgYnV0dG9uIG5leHQgdG8gdGhlIGxhYmVsXHJcbiAgICBjb25zdCBjb2xsYXBzZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxyXG4gICAgY29sbGFwc2VCdXR0b24uaWQgPSBDT0xMQVBTRV9CVVRUT05fSURcclxuICAgIHNldEljb24oY29sbGFwc2VCdXR0b24sIGdyb3VwTm9kZURhdGEuaXNDb2xsYXBzZWQgPyAncGx1cy1jaXJjbGUnIDogJ21pbnVzLWNpcmNsZScpXHJcblxyXG4gICAgY29sbGFwc2VCdXR0b24ub25jbGljayA9ICgpID0+IHsgdGhpcy5zZXRDb2xsYXBzZWQoY2FudmFzLCBncm91cE5vZGUsIGdyb3VwTm9kZS5nZXREYXRhKCkuaXNDb2xsYXBzZWQgPyB1bmRlZmluZWQgOiB0cnVlKSB9XHJcblxyXG4gICAgZ3JvdXBOb2RlLmxhYmVsRWw/Lmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJlbmQnLCBjb2xsYXBzZUJ1dHRvbilcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0Q29sbGFwc2VkKGNhbnZhczogQ2FudmFzLCBncm91cE5vZGU6IENhbnZhc05vZGUsIGNvbGxhcHNlZDogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xyXG4gICAgZ3JvdXBOb2RlLnNldERhdGEoeyAuLi5ncm91cE5vZGUuZ2V0RGF0YSgpLCBpc0NvbGxhcHNlZDogY29sbGFwc2VkIH0pXHJcbiAgICBjYW52YXMuc2V0RGF0YShjYW52YXMuZ2V0RGF0YSgpKVxyXG4gIH1cclxuXHJcbiAgb25Ob2RlQkJveFJlcXVlc3RlZChfY2FudmFzOiBDYW52YXMsIG5vZGU6IENhbnZhc05vZGUsIGJib3g6IEJCb3gpIHtcclxuICAgIGNvbnN0IG5vZGVEYXRhID0gbm9kZS5nZXREYXRhKClcclxuICAgIGlmIChub2RlRGF0YS50eXBlICE9PSAnZ3JvdXAnIHx8ICFub2RlRGF0YS5pc0NvbGxhcHNlZCkgcmV0dXJuXHJcblxyXG4gICAgLy8gU2V0IHdpZHRoIHRvIGxhYmVsIHdpZHRoXHJcbiAgICBiYm94Lm1heFggPSBiYm94Lm1pblggKyAobm9kZS5ub2RlRWw/LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoID8/IDApXHJcbiAgICBcclxuICAgIC8vIFNldCBoZWlnaHQgb2YgdG8gMCAoRG9uJ3QgZHJhZyBhbnkgbm9kZXMgd2l0aCBpdClcclxuICAgIGJib3gubWF4WSA9IGJib3gubWluWVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBleHBhbmRDb2xsYXBzZWROb2RlcyhkYXRhOiBDYW52YXNEYXRhKSB7XHJcbiAgICBkYXRhLm5vZGVzID0gZGF0YS5ub2Rlcy5mbGF0TWFwKChncm91cE5vZGVEYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbGxhcHNlZERhdGEgPSBncm91cE5vZGVEYXRhLmNvbGxhcHNlZERhdGFcclxuICAgICAgaWYgKGNvbGxhcHNlZERhdGEgPT09IHVuZGVmaW5lZCkgcmV0dXJuIFtncm91cE5vZGVEYXRhXVxyXG5cclxuICAgICAgZ3JvdXBOb2RlRGF0YS5jb2xsYXBzZWREYXRhID0gdW5kZWZpbmVkXHJcblxyXG4gICAgICBkYXRhLmVkZ2VzLnB1c2goLi4uY29sbGFwc2VkRGF0YS5lZGdlcylcclxuICAgICAgcmV0dXJuIFtncm91cE5vZGVEYXRhLCAuLi5jb2xsYXBzZWREYXRhLm5vZGVzLm1hcCgobm9kZURhdGEpID0+IChcclxuICAgICAgICB7XHJcbiAgICAgICAgICAuLi5ub2RlRGF0YSxcclxuICAgICAgICAgIC8vIFJlc3RvcmUgdGhlIHJlbGF0aXZlIHBvc2l0aW9uIG9mIHRoZSBub2RlIHRvIHRoZSBncm91cFxyXG4gICAgICAgICAgeDogbm9kZURhdGEueCArIGdyb3VwTm9kZURhdGEueCxcclxuICAgICAgICAgIHk6IG5vZGVEYXRhLnkgKyBncm91cE5vZGVEYXRhLnlcclxuICAgICAgICB9XHJcbiAgICAgICkpXVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY29sbGFwc2VOb2RlcyhkYXRhOiBDYW52YXNEYXRhKSB7XHJcbiAgICBkYXRhLm5vZGVzLmZvckVhY2goKGdyb3VwTm9kZURhdGEpID0+IHtcclxuICAgICAgaWYgKCFncm91cE5vZGVEYXRhLmlzQ29sbGFwc2VkKSByZXR1cm5cclxuXHJcbiAgICAgIGNvbnN0IGdyb3VwTm9kZUJCb3ggPSBCQm94SGVscGVyLmJib3hGcm9tTm9kZURhdGEoZ3JvdXBOb2RlRGF0YSlcclxuICAgICAgY29uc3QgY29udGFpbmVkTm9kZXNEYXRhID0gZGF0YS5ub2Rlcy5maWx0ZXIoKG5vZGVEYXRhKSA9PlxyXG4gICAgICAgIG5vZGVEYXRhLmlkICE9PSBncm91cE5vZGVEYXRhLmlkICYmIEJCb3hIZWxwZXIuaW5zaWRlQkJveChCQm94SGVscGVyLmJib3hGcm9tTm9kZURhdGEobm9kZURhdGEpLCBncm91cE5vZGVCQm94LCBmYWxzZSlcclxuICAgICAgKVxyXG4gICAgICBjb25zdCBjb250YWluZWRFZGdlc0RhdGEgPSBkYXRhLmVkZ2VzLmZpbHRlcigoZWRnZURhdGEpID0+IHtcclxuICAgICAgICByZXR1cm4gY29udGFpbmVkTm9kZXNEYXRhLnNvbWUoKG5vZGVEYXRhKSA9PiBub2RlRGF0YS5pZCA9PT0gZWRnZURhdGEuZnJvbU5vZGUpIHx8IFxyXG4gICAgICAgICAgY29udGFpbmVkTm9kZXNEYXRhLnNvbWUoKG5vZGVEYXRhKSA9PiBub2RlRGF0YS5pZCA9PT0gZWRnZURhdGEudG9Ob2RlKVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgZGF0YS5ub2RlcyA9IGRhdGEubm9kZXMuZmlsdGVyKChub2RlRGF0YSkgPT4gIWNvbnRhaW5lZE5vZGVzRGF0YS5pbmNsdWRlcyhub2RlRGF0YSkpXHJcbiAgICAgIGRhdGEuZWRnZXMgPSBkYXRhLmVkZ2VzLmZpbHRlcigoZWRnZURhdGEpID0+ICFjb250YWluZWRFZGdlc0RhdGEuaW5jbHVkZXMoZWRnZURhdGEpKVxyXG5cclxuICAgICAgZ3JvdXBOb2RlRGF0YS5jb2xsYXBzZWREYXRhID0ge1xyXG4gICAgICAgIG5vZGVzOiBjb250YWluZWROb2Rlc0RhdGEubWFwKChub2RlRGF0YSkgPT4gKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAuLi5ub2RlRGF0YSxcclxuICAgICAgICAgICAgLy8gU3RvcmUgdGhlIHJlbGF0aXZlIHBvc2l0aW9uIG9mIHRoZSBub2RlIHRvIHRoZSBncm91cFxyXG4gICAgICAgICAgICB4OiBub2RlRGF0YS54IC0gZ3JvdXBOb2RlRGF0YS54LFxyXG4gICAgICAgICAgICB5OiBub2RlRGF0YS55IC0gZ3JvdXBOb2RlRGF0YS55XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKSksXHJcbiAgICAgICAgZWRnZXM6IGNvbnRhaW5lZEVkZ2VzRGF0YVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxufSIsICJpbXBvcnQgQXBwLCB7IE1vZGFsLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuaW1wb3J0IHsgQ2FudmFzIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0ICogYXMgQ2FudmFzSGVscGVyIGZyb20gXCJzcmMvdXRpbHMvY2FudmFzLWhlbHBlclwiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9wZXJ0aWVzQ2FudmFzRXh0ZW5zaW9uIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiB0cnVlIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuQ2FudmFzQ2hhbmdlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLm9uQ2FudmFzQ2hhbmdlZChjYW52YXMpXHJcbiAgICApKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvbkNhbnZhc0NoYW5nZWQoY2FudmFzOiBDYW52YXMpIHtcclxuICAgIHRoaXMudXBkYXRlQ3NzQ2xhc3NlcyhjYW52YXMpXHJcblxyXG4gICAgY29uc3Qgc2V0dGluZ3NDb250YWluZXIgPSBjYW52YXMucXVpY2tTZXR0aW5nc0J1dHRvbj8ucGFyZW50RWxlbWVudFxyXG4gICAgaWYgKCFzZXR0aW5nc0NvbnRhaW5lcikgcmV0dXJuXHJcblxyXG4gICAgQ2FudmFzSGVscGVyLmFkZFF1aWNrU2V0dGluZ3NCdXR0b24oXHJcbiAgICAgIHNldHRpbmdzQ29udGFpbmVyLFxyXG4gICAgICBDYW52YXNIZWxwZXIuY3JlYXRlUXVpY2tTZXR0aW5nc0J1dHRvbih7XHJcbiAgICAgICAgaWQ6ICdwcm9wZXJ0aWVzJyxcclxuICAgICAgICBsYWJlbDogJ1Byb3BlcnRpZXMnLFxyXG4gICAgICAgIGljb246ICdzZXR0aW5ncy0yJyxcclxuICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5vcGVuUHJvcGVydGllc0RpYWxvZyhjYW52YXMpXHJcbiAgICAgIH0pXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHByZXZpb3VzQ3NzY2xhc3Nlczogc3RyaW5nW10gPSBbXVxyXG4gIHByaXZhdGUgdXBkYXRlQ3NzQ2xhc3NlcyhjYW52YXM6IENhbnZhcykge1xyXG4gICAgdGhpcy5wcmV2aW91c0Nzc2NsYXNzZXMuZm9yRWFjaCgoY3NzY2xhc3MpID0+IHtcclxuICAgICAgY2FudmFzLndyYXBwZXJFbC5jbGFzc0xpc3QucmVtb3ZlKGNzc2NsYXNzKVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLnByZXZpb3VzQ3NzY2xhc3NlcyA9IGNhbnZhcy5tZXRhZGF0YT8ucHJvcGVydGllcz8uY3NzY2xhc3NlcyB8fCBbXVxyXG4gICAgdGhpcy5wcmV2aW91c0Nzc2NsYXNzZXMuZm9yRWFjaCgoY3NzY2xhc3MpID0+IHtcclxuICAgICAgY2FudmFzLndyYXBwZXJFbC5jbGFzc0xpc3QuYWRkKGNzc2NsYXNzKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgb3BlblByb3BlcnRpZXNEaWFsb2coY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGF3YWl0IG5ldyBQcm9wZXJ0aWVzTW9kYWwodGhpcy5wbHVnaW4uYXBwLCBjYW52YXMpLmF3YWl0RGlhbG9nKClcclxuICAgIHRoaXMudXBkYXRlQ3NzQ2xhc3NlcyhjYW52YXMpXHJcbiAgfVxyXG59XHJcblxyXG5jbGFzcyBQcm9wZXJ0aWVzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgY2FudmFzOiBDYW52YXNcclxuXHJcbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGNhbnZhczogQ2FudmFzKSB7XHJcbiAgICBzdXBlcihhcHApXHJcbiAgICB0aGlzLmNhbnZhcyA9IGNhbnZhc1xyXG4gIH1cclxuXHJcbiAgb25PcGVuKCkge1xyXG4gICAgbmV3IFNldHRpbmcodGhpcy5jb250ZW50RWwpXHJcbiAgICAuc2V0SGVhZGluZygpXHJcbiAgICAuc2V0TmFtZShcIlByb3BlcnRpZXNcIilcclxuXHJcbiAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRlbnRFbClcclxuICAgICAgLnNldE5hbWUoXCJjc3NjbGFzc2VzXCIpXHJcbiAgICAgIC5zZXRUb29sdGlwKFwiQWRkIGNsYXNzZXMgdG8gdGhlIGNhbnZhcyB3cmFwcGVyIGVsZW1lbnQuIFNlcGFyYXRlIG11bHRpcGxlIGNsYXNzZXMgd2l0aCBzcGFjZXMuXCIpXHJcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLmNhbnZhcy5tZXRhZGF0YS5wcm9wZXJ0aWVzPy5jc3NjbGFzc2VzPy5qb2luKCcgJykpXHJcbiAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLm1ldGFkYXRhLnByb3BlcnRpZXMgPSB0aGlzLmNhbnZhcy5tZXRhZGF0YS5wcm9wZXJ0aWVzIHx8IHt9XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLm1ldGFkYXRhLnByb3BlcnRpZXMuY3NzY2xhc3NlcyA9IHZhbHVlLnNwbGl0KCcgJylcclxuICAgICAgICAgIH0pXHJcbiAgICAgICkuc2V0dGluZ0VsLmNsYXNzTGlzdC5hZGQoJ3Byb3BlcnRpZXMtZmllbGQnKVxyXG4gIH1cclxuXHJcbiAgb25DbG9zZSgpIHt9XHJcblxyXG4gIGF3YWl0RGlhbG9nKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgIHRoaXMub25DbG9zZSA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpXHJcbiAgICAgICAgcmVzb2x2ZSgpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMub3BlbigpXHJcbiAgICB9KVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgKiBhcyBDYW52YXNIZWxwZXIgZnJvbSBcInNyYy91dGlscy9jYW52YXMtaGVscGVyXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IENhbnZhc0V4dGVuc2lvbiBmcm9tIFwiLi4vLi4vY29yZS9jYW52YXMtZXh0ZW5zaW9uXCJcclxuaW1wb3J0IHsgQlVJTFRJTl9OT0RFX1NUWUxFX0FUVFJJQlVURVMsIFN0eWxlQXR0cmlidXRlIH0gZnJvbSBcIi4vc3R5bGUtY29uZmlnXCJcclxuaW1wb3J0IFNldHRpbmdzTWFuYWdlciBmcm9tIFwic3JjL3NldHRpbmdzXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vZGVTdHlsZXNFeHRlbnNpb24gZXh0ZW5kcyBDYW52YXNFeHRlbnNpb24ge1xyXG4gIGFsbE5vZGVTdHlsZXM6IFN0eWxlQXR0cmlidXRlW11cclxuXHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gJ25vZGVTdHlsaW5nRmVhdHVyZUVuYWJsZWQnIGFzIGNvbnN0IH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMuYWxsTm9kZVN0eWxlcyA9IFsuLi5CVUlMVElOX05PREVfU1RZTEVfQVRUUklCVVRFUywgLi4udGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnY3VzdG9tTm9kZVN0eWxlQXR0cmlidXRlcycpXVxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBTZXR0aW5nc01hbmFnZXIuU0VUVElOR1NfQ0hBTkdFRF9FVkVOVCxcclxuICAgICAgKCkgPT4gdGhpcy5hbGxOb2RlU3R5bGVzID0gWy4uLkJVSUxUSU5fTk9ERV9TVFlMRV9BVFRSSUJVVEVTLCAuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdjdXN0b21Ob2RlU3R5bGVBdHRyaWJ1dGVzJyldXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuUG9wdXBNZW51Q3JlYXRlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzKSA9PiB0aGlzLm9uUG9wdXBNZW51Q3JlYXRlZChjYW52YXMpXHJcbiAgICApKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvblBvcHVwTWVudUNyZWF0ZWQoY2FudmFzOiBDYW52YXMpOiB2b2lkIHtcclxuICAgIGNvbnN0IHNlbGVjdGlvbk5vZGVEYXRhID0gY2FudmFzLmdldFNlbGVjdGlvbkRhdGEoKS5ub2Rlc1xyXG4gICAgaWYgKGNhbnZhcy5yZWFkb25seSB8fCBzZWxlY3Rpb25Ob2RlRGF0YS5sZW5ndGggPT09IDAgfHwgc2VsZWN0aW9uTm9kZURhdGEubGVuZ3RoICE9PSBjYW52YXMuc2VsZWN0aW9uLnNpemUpXHJcbiAgICAgIHJldHVyblxyXG5cclxuICAgIGNvbnN0IHNlbGVjdGVkTm9kZVR5cGVzID0gbmV3IFNldChzZWxlY3Rpb25Ob2RlRGF0YS5tYXAobm9kZSA9PiBub2RlLnR5cGUpKVxyXG4gICAgY29uc3QgYXZhaWxhYmxlTm9kZVN0eWxlcyA9IHRoaXMuYWxsTm9kZVN0eWxlcy5maWx0ZXIoc3R5bGUgPT4gIXN0eWxlLm5vZGVUeXBlcyB8fCBzdHlsZS5ub2RlVHlwZXMuc29tZSh0eXBlID0+IHNlbGVjdGVkTm9kZVR5cGVzLmhhcyh0eXBlKSkpXHJcblxyXG4gICAgQ2FudmFzSGVscGVyLmNyZWF0ZVN0eWxlRHJvcGRvd25NZW51KFxyXG4gICAgICBjYW52YXMsIGF2YWlsYWJsZU5vZGVTdHlsZXMsXHJcbiAgICAgIHNlbGVjdGlvbk5vZGVEYXRhWzBdLnN0eWxlQXR0cmlidXRlcyA/PyB7fSxcclxuICAgICAgKGF0dHJpYnV0ZSwgdmFsdWUpID0+IHRoaXMuc2V0U3R5bGVBdHRyaWJ1dGVGb3JTZWxlY3Rpb24oY2FudmFzLCBhdHRyaWJ1dGUsIHZhbHVlKVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRTdHlsZUF0dHJpYnV0ZUZvclNlbGVjdGlvbihjYW52YXM6IENhbnZhcywgYXR0cmlidXRlOiBTdHlsZUF0dHJpYnV0ZSwgdmFsdWU6IHN0cmluZyB8IG51bGwpOiB2b2lkIHtcclxuICAgIGNvbnN0IHNlbGVjdGlvbk5vZGVEYXRhID0gY2FudmFzLmdldFNlbGVjdGlvbkRhdGEoKS5ub2Rlc1xyXG4gICAgZm9yIChjb25zdCBub2RlRGF0YSBvZiBzZWxlY3Rpb25Ob2RlRGF0YSkge1xyXG4gICAgICBjb25zdCBub2RlID0gY2FudmFzLm5vZGVzLmdldChub2RlRGF0YS5pZClcclxuICAgICAgaWYgKCFub2RlKSBjb250aW51ZVxyXG5cclxuICAgICAgLy8gT25seSBhcHBseSB0aGUgYXR0cmlidXRlIGlmIHRoZSBub2RlIHR5cGUgaXMgYWxsb3dlZFxyXG4gICAgICBpZiAoYXR0cmlidXRlLm5vZGVUeXBlcyAmJiAhYXR0cmlidXRlLm5vZGVUeXBlcy5pbmNsdWRlcyhub2RlRGF0YS50eXBlKSkgY29udGludWVcclxuXHJcbiAgICAgIG5vZGUuc2V0RGF0YSh7XHJcbiAgICAgICAgLi4ubm9kZURhdGEsXHJcbiAgICAgICAgc3R5bGVBdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAuLi5ub2RlRGF0YS5zdHlsZUF0dHJpYnV0ZXMsXHJcbiAgICAgICAgICBbYXR0cmlidXRlLmRhdGFzZXRLZXldOiB2YWx1ZVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIFxyXG4gICAgY2FudmFzLnB1c2hIaXN0b3J5KGNhbnZhcy5nZXREYXRhKCkpXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IEJCb3gsIFBvc2l0aW9uLCBTaWRlIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0ICogYXMgQkJveEhlbHBlciBmcm9tIFwic3JjL3V0aWxzL2Jib3gtaGVscGVyXCJcclxuXHJcbmNvbnN0IERJUkVDVElPTlMgPSBbXHJcbiAgeyBkeDogMSwgZHk6IDAgfSwgeyBkeDogLTEsIGR5OiAwIH0sIHsgZHg6IDAsIGR5OiAxIH0sIHsgZHg6IDAsIGR5OiAtMSB9LFxyXG4gIHsgZHg6IDEsIGR5OiAxIH0sIHsgZHg6IC0xLCBkeTogMSB9LCB7IGR4OiAxLCBkeTogLTEgfSwgeyBkeDogLTEsIGR5OiAtMSB9LFxyXG5dIGFzIGNvbnN0XHJcbmNvbnN0IERJQUdPTkFMX0NPU1QgPSBNYXRoLnNxcnQoMilcclxuXHJcbmNsYXNzIE5vZGUge1xyXG4gIHg6IG51bWJlclxyXG4gIHk6IG51bWJlclxyXG4gIGdDb3N0OiBudW1iZXJcclxuICBoQ29zdDogbnVtYmVyXHJcbiAgZkNvc3Q6IG51bWJlclxyXG4gIHBhcmVudDogTm9kZXxudWxsXHJcblxyXG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnggPSB4XHJcbiAgICB0aGlzLnkgPSB5XHJcblxyXG4gICAgdGhpcy5nQ29zdCA9IDBcclxuICAgIHRoaXMuaENvc3QgPSAwXHJcbiAgICB0aGlzLmZDb3N0ID0gMFxyXG4gICAgdGhpcy5wYXJlbnQgPSBudWxsXHJcbiAgfVxyXG5cclxuICAvLyBPbmx5IGNoZWNrIGZvciB4IGFuZCB5LCBub3QgZ0Nvc3QsIGhDb3N0LCBmQ29zdCwgb3IgcGFyZW50XHJcbiAgaW5MaXN0KG5vZGVzOiBOb2RlW10pOiBib29sZWFuIHtcclxuICAgIHJldHVybiBub2Rlcy5zb21lKG4gPT4gbi54ID09PSB0aGlzLnggJiYgbi55ID09PSB0aGlzLnkpXHJcbiAgfVxyXG59XHJcblxyXG4vLyBNYW5oYXR0YW4gZGlzdGFuY2VcclxuZnVuY3Rpb24gaGV1cmlzdGljKG5vZGU6IE5vZGUsIGVuZDogTm9kZSk6IG51bWJlciB7XHJcbiAgcmV0dXJuIE1hdGguYWJzKG5vZGUueCAtIGVuZC54KSArIE1hdGguYWJzKG5vZGUueSAtIGVuZC55KVxyXG59XHJcblxyXG4vLyBEZWZpbmUgYSBmdW5jdGlvbiB0byBjaGVjayBpZiBhIHBvc2l0aW9uIGlzbid0IGluc2lkZSBhbnkgb2JzdGFjbGVcclxuZnVuY3Rpb24gaXNUb3VjaGluZ09ic3RhY2xlKG5vZGU6IFBvc2l0aW9uLCBvYnN0YWNsZXM6IEJCb3hbXSk6IGJvb2xlYW4ge1xyXG4gIHJldHVybiBvYnN0YWNsZXMuc29tZShvYnN0YWNsZSA9PiBCQm94SGVscGVyLmluc2lkZUJCb3gobm9kZSwgb2JzdGFjbGUsIHRydWUpKVxyXG59XHJcblxyXG5mdW5jdGlvbiBpc0luc2lkZU9ic3RhY2xlKG5vZGU6IFBvc2l0aW9uLCBvYnN0YWNsZXM6IEJCb3hbXSk6IGJvb2xlYW4ge1xyXG4gIHJldHVybiBvYnN0YWNsZXMuc29tZShvYnN0YWNsZSA9PiBCQm94SGVscGVyLmluc2lkZUJCb3gobm9kZSwgb2JzdGFjbGUsIGZhbHNlKSlcclxufVxyXG5cclxuLy8gRGVmaW5lIGEgZnVuY3Rpb24gdG8gY2FsY3VsYXRlIG1vdmVtZW50IGNvc3QgYmFzZWQgb24gZGlyZWN0aW9uXHJcbmZ1bmN0aW9uIGdldE1vdmVtZW50Q29zdChkaXJlY3Rpb246IHsgZHg6IG51bWJlcjsgZHk6IG51bWJlciB9KTogbnVtYmVyIHtcclxuICByZXR1cm4gZGlyZWN0aW9uLmR4ICE9PSAwICYmIGRpcmVjdGlvbi5keSAhPT0gMCA/IERJQUdPTkFMX0NPU1QgOiAxXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFBvc3NpYmxlTmVpZ2hib3JzKG5vZGU6IE5vZGUsIG9ic3RhY2xlczogQkJveFtdLCBncmlkUmVzb2x1dGlvbjogbnVtYmVyKTogTm9kZVtdIHtcclxuICBjb25zdCBuZWlnaGJvcnM6IE5vZGVbXSA9IFtdXHJcbiAgXHJcbiAgZm9yIChjb25zdCBkaXJlY3Rpb24gb2YgRElSRUNUSU9OUykge1xyXG4gICAgY29uc3QgbmVpZ2hib3IgPSBuZXcgTm9kZShcclxuICAgICAgbm9kZS54ICsgZGlyZWN0aW9uLmR4ICogZ3JpZFJlc29sdXRpb24sIFxyXG4gICAgICBub2RlLnkgKyBkaXJlY3Rpb24uZHkgKiBncmlkUmVzb2x1dGlvblxyXG4gICAgKVxyXG4gICAgbmVpZ2hib3IuZ0Nvc3QgPSBub2RlLmdDb3N0ICsgZ2V0TW92ZW1lbnRDb3N0KGRpcmVjdGlvbilcclxuXHJcbiAgICBpZiAoaXNJbnNpZGVPYnN0YWNsZShuZWlnaGJvciwgb2JzdGFjbGVzKSkgY29udGludWVcclxuXHJcbiAgICBuZWlnaGJvcnMucHVzaChuZWlnaGJvcilcclxuICB9XHJcblxyXG4gIHJldHVybiBuZWlnaGJvcnNcclxufVxyXG5cclxuZnVuY3Rpb24gcmVjb25zdHJ1Y3RQYXRoKG5vZGU6IE5vZGUpOiBOb2RlW10ge1xyXG4gIGNvbnN0IHBhdGg6IE5vZGVbXSA9IFtdXHJcbiAgd2hpbGUgKG5vZGUpIHtcclxuICAgIHBhdGgucHVzaChub2RlKVxyXG4gICAgbm9kZSA9IG5vZGUucGFyZW50IVxyXG4gIH1cclxuICByZXR1cm4gcGF0aC5yZXZlcnNlKClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFTdGFyKGZyb21Qb3M6IFBvc2l0aW9uLCBmcm9tU2lkZTogU2lkZSwgdG9Qb3M6IFBvc2l0aW9uLCB0b1NpZGU6IFNpZGUsIG9ic3RhY2xlczogQkJveFtdLCBncmlkUmVzb2x1dGlvbjogbnVtYmVyKTogUG9zaXRpb25bXSB8IG51bGwge1xyXG4gIGNvbnN0IHN0YXJ0OiBOb2RlID0gbmV3IE5vZGUoXHJcbiAgICBNYXRoLmZsb29yKGZyb21Qb3MueCAvIGdyaWRSZXNvbHV0aW9uKSAqIGdyaWRSZXNvbHV0aW9uLFxyXG4gICAgTWF0aC5mbG9vcihmcm9tUG9zLnkgLyBncmlkUmVzb2x1dGlvbikgKiBncmlkUmVzb2x1dGlvblxyXG4gIClcclxuICAvLyBSb3VuZCBzdGFydCBhbmQgZW5kIHBvc2l0aW9ucyB0byB0aGUgbmVhcmVzdCBncmlkIGNlbGwgb3V0c2lkZSBvZiB0aGUgbm9kZXMgdG8gY29ubmVjdFxyXG4gIGlmIChmcm9tU2lkZSA9PT0gJ3JpZ2h0JyAmJiBmcm9tUG9zLnggIT09IHN0YXJ0LngpIHN0YXJ0LnggKz0gZ3JpZFJlc29sdXRpb25cclxuICBpZiAoZnJvbVNpZGUgPT09ICdib3R0b20nICYmIGZyb21Qb3MueSAhPT0gc3RhcnQueSkgc3RhcnQueSArPSBncmlkUmVzb2x1dGlvblxyXG5cclxuICBjb25zdCBlbmQ6IE5vZGUgPSBuZXcgTm9kZShcclxuICAgIE1hdGguZmxvb3IodG9Qb3MueCAvIGdyaWRSZXNvbHV0aW9uKSAqIGdyaWRSZXNvbHV0aW9uLFxyXG4gICAgTWF0aC5mbG9vcih0b1Bvcy55IC8gZ3JpZFJlc29sdXRpb24pICogZ3JpZFJlc29sdXRpb25cclxuICApXHJcbiAgLy8gUm91bmQgc3RhcnQgYW5kIGVuZCBwb3NpdGlvbnMgdG8gdGhlIG5lYXJlc3QgZ3JpZCBjZWxsIG91dHNpZGUgb2YgdGhlIG5vZGVzIHRvIGNvbm5lY3RcclxuICBpZiAodG9TaWRlID09PSAncmlnaHQnICYmIHRvUG9zLnggIT09IGVuZC54KSBlbmQueCArPSBncmlkUmVzb2x1dGlvblxyXG4gIGlmICh0b1NpZGUgPT09ICdib3R0b20nICYmIHRvUG9zLnkgIT09IGVuZC55KSBlbmQueSArPSBncmlkUmVzb2x1dGlvblxyXG4gIFxyXG4gIC8vIENoZWNrIGlmIHN0YXJ0IGFuZCBlbmQgcG9zaXRpb25zIGFyZSB2YWxpZFxyXG4gIGlmIChpc0luc2lkZU9ic3RhY2xlKHN0YXJ0LCBvYnN0YWNsZXMpIHx8IGlzSW5zaWRlT2JzdGFjbGUoZW5kLCBvYnN0YWNsZXMpKSByZXR1cm4gbnVsbFxyXG5cclxuICBjb25zdCBvcGVuU2V0OiBOb2RlW10gPSBbc3RhcnRdXHJcbiAgY29uc3QgY2xvc2VkU2V0OiBOb2RlW10gPSBbXVxyXG5cclxuICB3aGlsZSAob3BlblNldC5sZW5ndGggPiAwKSB7XHJcbiAgICAvLyBGaW5kIHRoZSBub2RlIHdpdGggdGhlIGxvd2VzdCBmQ29zdCBpbiB0aGUgb3BlbiBzZXRcclxuICAgIGxldCBjdXJyZW50OiBOb2RlfG51bGwgPSBudWxsXHJcbiAgICBsZXQgbG93ZXN0RkNvc3QgPSBJbmZpbml0eVxyXG5cclxuICAgIGZvciAoY29uc3Qgbm9kZSBvZiBvcGVuU2V0KSB7XHJcbiAgICAgIGlmIChub2RlLmZDb3N0IDwgbG93ZXN0RkNvc3QpIHtcclxuICAgICAgICBjdXJyZW50ID0gbm9kZVxyXG4gICAgICAgIGxvd2VzdEZDb3N0ID0gbm9kZS5mQ29zdFxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTm8gcGF0aCBmb3VuZFxyXG4gICAgaWYgKCFjdXJyZW50KSByZXR1cm4gbnVsbFxyXG5cclxuICAgIC8vIFJlbW92ZSB0aGUgY3VycmVudCBub2RlIGZyb20gdGhlIG9wZW4gc2V0IGFuZCBhZGQgaXQgdG8gdGhlIGNsb3NlZCBzZXRcclxuICAgIG9wZW5TZXQuc3BsaWNlKG9wZW5TZXQuaW5kZXhPZihjdXJyZW50KSwgMSlcclxuICAgIGNsb3NlZFNldC5wdXNoKGN1cnJlbnQpXHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmRcclxuICAgIGlmIChjdXJyZW50LnggPT09IGVuZC54ICYmIGN1cnJlbnQueSA9PT0gZW5kLnkpIHtcclxuICAgICAgcmV0dXJuIFtmcm9tUG9zLCAuLi5yZWNvbnN0cnVjdFBhdGgoY3VycmVudCksIHRvUG9zXS5tYXAobm9kZSA9PiAoeyB4OiBub2RlLngsIHk6IG5vZGUueSB9KSlcclxuICAgIH1cclxuXHJcbiAgICAvLyBMb2NhdGlvbiBpcyBub3Qgc3RhcnQgb3IgZW5kLCBhbGwgdG91Y2hpbmcgcG9zaXRpb25zIGFyZSBpbnZhbGlkXHJcbiAgICBpZiAoIShjdXJyZW50LnggPT09IHN0YXJ0LnggJiYgY3VycmVudC55ID09PSBzdGFydC55KSAmJiBpc1RvdWNoaW5nT2JzdGFjbGUoY3VycmVudCwgb2JzdGFjbGVzKSkgY29udGludWVcclxuXHJcbiAgICAvLyBFeHBhbmQgbmVpZ2hib3JzXHJcbiAgICBmb3IgKGNvbnN0IG5laWdoYm9yIG9mIGdldFBvc3NpYmxlTmVpZ2hib3JzKGN1cnJlbnQsIG9ic3RhY2xlcywgZ3JpZFJlc29sdXRpb24pKSB7XHJcbiAgICAgIGlmIChuZWlnaGJvci5pbkxpc3QoY2xvc2VkU2V0KSkgY29udGludWVcclxuXHJcbiAgICAgIC8vIENhbGN1bGF0ZSB0ZW50YXRpdmUgZ0Nvc3RcclxuICAgICAgY29uc3QgdGVudGF0aXZlR0Nvc3QgPSBjdXJyZW50LmdDb3N0ICsgZ2V0TW92ZW1lbnRDb3N0KHtcclxuICAgICAgICBkeDogbmVpZ2hib3IueCAtIGN1cnJlbnQueCxcclxuICAgICAgICBkeTogbmVpZ2hib3IueSAtIGN1cnJlbnQueSxcclxuICAgICAgfSlcclxuXHJcbiAgICAgIC8vIENoZWNrIGlmIG5laWdoYm9yIGlzIG5vdCBhbHJlYWR5IGluIHRoZSBvcGVuIHNldCBvciBpZiB0aGUgbmV3IGdDb3N0IGlzIGxvd2VyXHJcbiAgICAgIGlmICghbmVpZ2hib3IuaW5MaXN0KG9wZW5TZXQpIHx8IHRlbnRhdGl2ZUdDb3N0IDwgbmVpZ2hib3IuZ0Nvc3QpIHtcclxuICAgICAgICBuZWlnaGJvci5wYXJlbnQgPSBjdXJyZW50XHJcbiAgICAgICAgbmVpZ2hib3IuZ0Nvc3QgPSB0ZW50YXRpdmVHQ29zdFxyXG4gICAgICAgIG5laWdoYm9yLmhDb3N0ID0gaGV1cmlzdGljKG5laWdoYm9yLCBlbmQpXHJcbiAgICAgICAgbmVpZ2hib3IuZkNvc3QgPSBuZWlnaGJvci5nQ29zdCArIG5laWdoYm9yLmhDb3N0XHJcblxyXG4gICAgICAgIC8vIEFkZCBuZWlnaGJvciB0byB0aGUgb3BlbiBzZXRcclxuICAgICAgICBvcGVuU2V0LnB1c2gobmVpZ2hib3IpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIE5vIHBhdGggZm91bmRcclxuICByZXR1cm4gbnVsbFxyXG59IiwgImltcG9ydCB7IFBvc2l0aW9uIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXRoQXJyYXlUb1N2Z1BhdGgocG9zaXRpb25zOiBQb3NpdGlvbltdLCByb3VuZGVkID0gZmFsc2UpOiBzdHJpbmcge1xyXG4gIGNvbnN0IHRlbnNpb24gPSAwLjJcclxuICBsZXQgbmV3UG9zaXRpb25zID0gWy4uLnBvc2l0aW9uc11cclxuXHJcbiAgaWYgKHJvdW5kZWQgJiYgcG9zaXRpb25zLmxlbmd0aCA+IDIpIHtcclxuICAgIG5ld1Bvc2l0aW9ucyA9IFtwb3NpdGlvbnNbMF1dXHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwb3NpdGlvbnMubGVuZ3RoIC0gMjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IHAxID0gcG9zaXRpb25zW2ldXHJcbiAgICAgIGNvbnN0IHAyID0gcG9zaXRpb25zW2kgKyAxXVxyXG4gICAgICBjb25zdCBwMyA9IHBvc2l0aW9uc1tpICsgMl1cclxuXHJcbiAgICAgIGNvbnN0IHQxID0gKDEgLSB0ZW5zaW9uKSAvIDJcclxuICAgICAgY29uc3QgdDIgPSAxIC0gdDFcclxuXHJcbiAgICAgIGNvbnN0IHggPVxyXG4gICAgICAgIHQyICogdDIgKiB0MiAqIHAxLnggK1xyXG4gICAgICAgIDMgKiB0MiAqIHQyICogdDEgKiBwMi54ICtcclxuICAgICAgICAzICogdDIgKiB0MSAqIHQxICogcDMueCArXHJcbiAgICAgICAgdDEgKiB0MSAqIHQxICogcDIueFxyXG5cclxuICAgICAgY29uc3QgeSA9XHJcbiAgICAgICAgdDIgKiB0MiAqIHQyICogcDEueSArXHJcbiAgICAgICAgMyAqIHQyICogdDIgKiB0MSAqIHAyLnkgK1xyXG4gICAgICAgIDMgKiB0MiAqIHQxICogdDEgKiBwMy55ICtcclxuICAgICAgICB0MSAqIHQxICogdDEgKiBwMi55XHJcblxyXG4gICAgICBuZXdQb3NpdGlvbnMucHVzaCh7IHg6IHgsIHk6IHkgfSlcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBsYXN0UG9pbnQgPSBwb3NpdGlvbnNbcG9zaXRpb25zLmxlbmd0aCAtIDFdXHJcbiAgICBuZXdQb3NpdGlvbnMucHVzaChsYXN0UG9pbnQpXHJcbiAgfVxyXG4gICAgXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdQb3NpdGlvbnMubGVuZ3RoIC0gMjsgaSsrKSB7XHJcbiAgICBjb25zdCBwMSA9IG5ld1Bvc2l0aW9uc1tpXVxyXG4gICAgY29uc3QgcDIgPSBuZXdQb3NpdGlvbnNbaSArIDFdXHJcbiAgICBjb25zdCBwMyA9IG5ld1Bvc2l0aW9uc1tpICsgMl1cclxuXHJcbiAgICBjb25zdCBjdXJyZW50RGlyZWN0aW9uID0ge1xyXG4gICAgICB4OiBwMi54IC0gcDEueCxcclxuICAgICAgeTogcDIueSAtIHAxLnlcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBuZXh0RGlyZWN0aW9uID0ge1xyXG4gICAgICB4OiBwMy54IC0gcDIueCxcclxuICAgICAgeTogcDMueSAtIHAyLnlcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY3VycmVudERpcmVjdGlvbi54ICE9PSBuZXh0RGlyZWN0aW9uLnggJiYgY3VycmVudERpcmVjdGlvbi55ICE9PSBuZXh0RGlyZWN0aW9uLnkpIGNvbnRpbnVlXHJcblxyXG4gICAgbmV3UG9zaXRpb25zLnNwbGljZShpICsgMSwgMSlcclxuICAgIGktLVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG5ld1Bvc2l0aW9ucy5tYXAoKHBvc2l0aW9uLCBpbmRleCkgPT4gXHJcbiAgICBgJHtpbmRleCA9PT0gMCA/ICdNJyA6ICdMJ30gJHtwb3NpdGlvbi54fSAke3Bvc2l0aW9uLnl9YFxyXG4gICkuam9pbignICcpXHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzLCBDYW52YXNFZGdlLCBDYW52YXNOb2RlLCBQb3NpdGlvbiwgU2lkZSB9IGZyb20gXCJzcmMvQHR5cGVzL0NhbnZhc1wiXHJcbmltcG9ydCAqIGFzIENhbnZhc0hlbHBlciBmcm9tIFwic3JjL3V0aWxzL2NhbnZhcy1oZWxwZXJcIlxyXG5pbXBvcnQgKiBhcyBBU3RhckhlbHBlciBmcm9tIFwic3JjL3V0aWxzL2Etc3Rhci1oZWxwZXJcIlxyXG5pbXBvcnQgKiBhcyBTdmdQYXRoSGVscGVyIGZyb20gXCJzcmMvdXRpbHMvc3ZnLXBhdGgtaGVscGVyXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0ICogYXMgQkJveEhlbHBlciBmcm9tIFwic3JjL3V0aWxzL2Jib3gtaGVscGVyXCJcclxuaW1wb3J0IENhbnZhc0V4dGVuc2lvbiBmcm9tIFwiLi4vLi4vY29yZS9jYW52YXMtZXh0ZW5zaW9uXCJcclxuaW1wb3J0IHsgQlVJTFRJTl9FREdFX1NUWUxFX0FUVFJJQlVURVMsIFN0eWxlQXR0cmlidXRlIH0gZnJvbSBcIi4vc3R5bGUtY29uZmlnXCJcclxuaW1wb3J0IFNldHRpbmdzTWFuYWdlciBmcm9tIFwic3JjL3NldHRpbmdzXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVkZ2VTdHlsZXNFeHRlbnNpb24gZXh0ZW5kcyBDYW52YXNFeHRlbnNpb24ge1xyXG4gIGFsbEVkZ2VTdHlsZUF0dHJpYnV0ZXM6IFN0eWxlQXR0cmlidXRlW11cclxuXHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gJ2VkZ2VzU3R5bGluZ0ZlYXR1cmVFbmFibGVkJyBhcyBjb25zdCB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLmFsbEVkZ2VTdHlsZUF0dHJpYnV0ZXMgPSBbLi4uQlVJTFRJTl9FREdFX1NUWUxFX0FUVFJJQlVURVMsIC4uLnRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2N1c3RvbUVkZ2VTdHlsZUF0dHJpYnV0ZXMnKV1cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgU2V0dGluZ3NNYW5hZ2VyLlNFVFRJTkdTX0NIQU5HRURfRVZFTlQsXHJcbiAgICAgICgpID0+IHRoaXMuYWxsRWRnZVN0eWxlQXR0cmlidXRlcyA9IFsuLi5CVUlMVElOX0VER0VfU1RZTEVfQVRUUklCVVRFUywgLi4udGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnY3VzdG9tRWRnZVN0eWxlQXR0cmlidXRlcycpXVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LlBvcHVwTWVudUNyZWF0ZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy5vblBvcHVwTWVudUNyZWF0ZWQoY2FudmFzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkVkZ2VDaGFuZ2VkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIGVkZ2U6IENhbnZhc0VkZ2UpID0+IHRoaXMub25FZGdlQ2hhbmdlZChjYW52YXMsIGVkZ2UpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuRWRnZUNlbnRlclJlcXVlc3RlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBlZGdlOiBDYW52YXNFZGdlLCBjZW50ZXI6IFBvc2l0aW9uKSA9PiB0aGlzLm9uRWRnZUNlbnRlclJlcXVlc3RlZChjYW52YXMsIGVkZ2UsIGNlbnRlcilcclxuICAgICkpXHJcblxyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5Ob2RlQWRkZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgX25vZGU6IENhbnZhc05vZGUpID0+IHRoaXMudXBkYXRlQWxsRWRnZXMoY2FudmFzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Lk5vZGVNb3ZlZCxcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBfbm9kZTogQ2FudmFzTm9kZSkgPT4gdGhpcy51cGRhdGVBbGxFZGdlcyhjYW52YXMpXHJcbiAgICApKVxyXG5cclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuTm9kZVJlbW92ZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcywgX25vZGU6IENhbnZhc05vZGUpID0+IHRoaXMudXBkYXRlQWxsRWRnZXMoY2FudmFzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkRyYWdnaW5nU3RhdGVDaGFuZ2VkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIGlzRHJhZ2dpbmc6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICBpZiAoaXNEcmFnZ2luZyB8fCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdlZGdlU3R5bGVQYXRoZmluZGVyUGF0aExpdmVVcGRhdGUnKSkgcmV0dXJuXHJcbiAgICAgICAgdGhpcy51cGRhdGVBbGxFZGdlcyhjYW52YXMpXHJcbiAgICAgIH1cclxuICAgICkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9uUG9wdXBNZW51Q3JlYXRlZChjYW52YXM6IENhbnZhcyk6IHZvaWQge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRFZGdlcyA9IFsuLi5jYW52YXMuc2VsZWN0aW9uXS5maWx0ZXIoKGl0ZW06IGFueSkgPT4gaXRlbS5wYXRoICE9PSB1bmRlZmluZWQpIGFzIENhbnZhc0VkZ2VbXVxyXG4gICAgaWYgKGNhbnZhcy5yZWFkb25seSB8fCBzZWxlY3RlZEVkZ2VzLmxlbmd0aCA9PT0gMCB8fCBzZWxlY3RlZEVkZ2VzLmxlbmd0aCAhPT0gY2FudmFzLnNlbGVjdGlvbi5zaXplKVxyXG4gICAgICByZXR1cm5cclxuXHJcbiAgICBDYW52YXNIZWxwZXIuY3JlYXRlU3R5bGVEcm9wZG93bk1lbnUoXHJcbiAgICAgIGNhbnZhcywgdGhpcy5hbGxFZGdlU3R5bGVBdHRyaWJ1dGVzLFxyXG4gICAgICBzZWxlY3RlZEVkZ2VzWzBdLmdldERhdGEoKS5zdHlsZUF0dHJpYnV0ZXMgPz8ge30sXHJcbiAgICAgIChhdHRyaWJ1dGUsIHZhbHVlKSA9PiB0aGlzLnNldFN0eWxlQXR0cmlidXRlRm9yU2VsZWN0aW9uKGNhbnZhcywgYXR0cmlidXRlLCB2YWx1ZSlcclxuICAgIClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0U3R5bGVBdHRyaWJ1dGVGb3JTZWxlY3Rpb24oY2FudmFzOiBDYW52YXMsIGF0dHJpYnV0ZTogU3R5bGVBdHRyaWJ1dGUsIHZhbHVlOiBzdHJpbmcgfCBudWxsKTogdm9pZCB7XHJcbiAgICBjb25zdCBzZWxlY3RlZEVkZ2VzID0gWy4uLmNhbnZhcy5zZWxlY3Rpb25dLmZpbHRlcigoaXRlbTogYW55KSA9PiBpdGVtLnBhdGggIT09IHVuZGVmaW5lZCkgYXMgQ2FudmFzRWRnZVtdXHJcblxyXG4gICAgZm9yIChjb25zdCBlZGdlIG9mIHNlbGVjdGVkRWRnZXMpIHtcclxuICAgICAgY29uc3QgZWRnZURhdGEgPSBlZGdlLmdldERhdGEoKVxyXG5cclxuICAgICAgZWRnZS5zZXREYXRhKHtcclxuICAgICAgICAuLi5lZGdlRGF0YSxcclxuICAgICAgICBzdHlsZUF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgIC4uLmVkZ2VEYXRhLnN0eWxlQXR0cmlidXRlcyxcclxuICAgICAgICAgIFthdHRyaWJ1dGUuZGF0YXNldEtleV06IHZhbHVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjYW52YXMucHVzaEhpc3RvcnkoY2FudmFzLmdldERhdGEoKSlcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlQWxsRWRnZXMoY2FudmFzOiBDYW52YXMpIHtcclxuICAgIGZvciAoY29uc3QgZWRnZSBvZiBjYW52YXMuZWRnZXMudmFsdWVzKCkpIHtcclxuICAgICAgdGhpcy5vbkVkZ2VDaGFuZ2VkKGNhbnZhcywgZWRnZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25FZGdlQ2hhbmdlZChjYW52YXM6IENhbnZhcywgZWRnZTogQ2FudmFzRWRnZSkge1xyXG4gICAgY29uc3QgZWRnZURhdGEgPSBlZGdlLmdldERhdGEoKVxyXG4gICAgXHJcbiAgICAvLyBSZXNldCBwYXRoIHRvIGRlZmF1bHRcclxuICAgIGlmICghZWRnZS5iZXppZXIpIHJldHVyblxyXG4gICAgZWRnZS51cGRhdGVQYXRoKClcclxuICAgIGVkZ2UuY2VudGVyID0gdW5kZWZpbmVkXHJcblxyXG4gICAgLy8gU2V0IGFycm93IHN0eWxlXHJcbiAgICBjb25zdCBhcnJvd1BvbHlnb25Qb2ludHMgPSB0aGlzLmdldEFycm93UG9seWdvblBvaW50cyhlZGdlRGF0YS5zdHlsZUF0dHJpYnV0ZXM/LmFycm93KVxyXG5cclxuICAgIGlmIChlZGdlLmZyb21MaW5lRW5kPy5lbCkgZWRnZS5mcm9tTGluZUVuZC5lbC5xdWVyeVNlbGVjdG9yKCdwb2x5Z29uJyk/LnNldEF0dHJpYnV0ZSgncG9pbnRzJywgYXJyb3dQb2x5Z29uUG9pbnRzKVxyXG4gICAgaWYgKGVkZ2UudG9MaW5lRW5kPy5lbCkgZWRnZS50b0xpbmVFbmQuZWwucXVlcnlTZWxlY3RvcigncG9seWdvbicpPy5zZXRBdHRyaWJ1dGUoJ3BvaW50cycsIGFycm93UG9seWdvblBvaW50cylcclxuXHJcbiAgICAvLyBTZXQgcGF0aGZpbmRpbmcgbWV0aG9kXHJcbiAgICBjb25zdCBwYXRoUm91dGVUeXBlID0gZWRnZURhdGEuc3R5bGVBdHRyaWJ1dGVzPy5wYXRoZmluZGluZ01ldGhvZFxyXG4gICAgaWYgKHBhdGhSb3V0ZVR5cGUpIHtcclxuICAgICAgY29uc3QgZnJvbVBvcyA9IGVkZ2UuZnJvbS5lbmQgPT09ICdub25lJyA/IFxyXG4gICAgICAgIEJCb3hIZWxwZXIuZ2V0Q2VudGVyT2ZCQm94U2lkZShlZGdlLmZyb20ubm9kZS5nZXRCQm94KCksIGVkZ2UuZnJvbS5zaWRlKSA6XHJcbiAgICAgICAgZWRnZS5iZXppZXIuZnJvbVxyXG5cclxuICAgICAgY29uc3QgdG9Qb3MgPSBlZGdlLnRvLmVuZCA9PT0gJ25vbmUnID8gXHJcbiAgICAgICAgQkJveEhlbHBlci5nZXRDZW50ZXJPZkJCb3hTaWRlKGVkZ2UudG8ubm9kZS5nZXRCQm94KCksIGVkZ2UudG8uc2lkZSkgOlxyXG4gICAgICAgIGVkZ2UuYmV6aWVyLnRvXHJcblxyXG4gICAgICBsZXQgbmV3UGF0aCA9IGVkZ2UucGF0aC5kaXNwbGF5LmdldEF0dHJpYnV0ZShcImRcIilcclxuICAgIFxyXG4gICAgICBpZiAocGF0aFJvdXRlVHlwZSA9PT0gJ2RpcmVjdCcpIHtcclxuICAgICAgICBuZXdQYXRoID0gU3ZnUGF0aEhlbHBlci5wYXRoQXJyYXlUb1N2Z1BhdGgoW2Zyb21Qb3MsIHRvUG9zXSwgZmFsc2UpXHJcbiAgICAgICAgZWRnZS5jZW50ZXIgPSB7XHJcbiAgICAgICAgICB4OiAoZnJvbVBvcy54ICsgdG9Qb3MueCkgLyAyLFxyXG4gICAgICAgICAgeTogKGZyb21Qb3MueSArIHRvUG9zLnkpIC8gMlxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChwYXRoUm91dGVUeXBlID09PSAnc3F1YXJlJykge1xyXG4gICAgICAgIGxldCBwYXRoQXJyYXk6IFBvc2l0aW9uW10gPSBbXVxyXG4gICAgICAgIGlmIChlZGdlLmZyb20uc2lkZSA9PT0gJ2JvdHRvbScgfHwgZWRnZS5mcm9tLnNpZGUgPT09ICd0b3AnKSB7XHJcbiAgICAgICAgICBwYXRoQXJyYXkgPSBbXHJcbiAgICAgICAgICAgIGZyb21Qb3MsIFxyXG4gICAgICAgICAgICB7IHg6IGZyb21Qb3MueCwgeTogZnJvbVBvcy55ICsgKHRvUG9zLnkgLSBmcm9tUG9zLnkpIC8gMiB9LFxyXG4gICAgICAgICAgICB7IHg6IHRvUG9zLngsIHk6IGZyb21Qb3MueSArICh0b1Bvcy55IC0gZnJvbVBvcy55KSAvIDIgfSxcclxuICAgICAgICAgICAgdG9Qb3NcclxuICAgICAgICAgIF1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcGF0aEFycmF5ID0gW1xyXG4gICAgICAgICAgICBmcm9tUG9zLCBcclxuICAgICAgICAgICAgeyB4OiBmcm9tUG9zLnggKyAodG9Qb3MueCAtIGZyb21Qb3MueCkgLyAyLCB5OiBmcm9tUG9zLnkgfSxcclxuICAgICAgICAgICAgeyB4OiBmcm9tUG9zLnggKyAodG9Qb3MueCAtIGZyb21Qb3MueCkgLyAyLCB5OiB0b1Bvcy55IH0sXHJcbiAgICAgICAgICAgIHRvUG9zXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBuZXdQYXRoID0gU3ZnUGF0aEhlbHBlci5wYXRoQXJyYXlUb1N2Z1BhdGgocGF0aEFycmF5LCBmYWxzZSlcclxuICAgICAgICBlZGdlLmNlbnRlciA9IHsgXHJcbiAgICAgICAgICB4OiAoZnJvbVBvcy54ICsgdG9Qb3MueCkgLyAyLCBcclxuICAgICAgICAgIHk6IChmcm9tUG9zLnkgKyB0b1Bvcy55KSAvIDIgXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKHBhdGhSb3V0ZVR5cGUgPT09ICdhLXN0YXInKSB7XHJcbiAgICAgICAgaWYgKGNhbnZhcy5pc0RyYWdnaW5nICYmICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKCdlZGdlU3R5bGVQYXRoZmluZGVyUGF0aExpdmVVcGRhdGUnKSkgcmV0dXJuXHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgbm9kZUJCb3hlcyA9IFsuLi5jYW52YXMubm9kZXMudmFsdWVzKCldXHJcbiAgICAgICAgICAuZmlsdGVyKG5vZGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBub2RlRGF0YSA9IG5vZGUuZ2V0RGF0YSgpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBpc0dyb3VwID0gbm9kZURhdGEudHlwZSA9PT0gJ2dyb3VwJyAvLyBFeGNsdWRlIGdyb3VwIG5vZGVzXHJcbiAgICAgICAgICAgIGNvbnN0IGlzT3BlblBvcnRhbCA9IG5vZGVEYXRhLnBvcnRhbFRvRmlsZSAhPT0gdW5kZWZpbmVkIC8vIEV4Y2x1ZGUgb3BlbiBwb3J0YWxzXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gIWlzR3JvdXAgJiYgIWlzT3BlblBvcnRhbFxyXG4gICAgICAgICAgfSkubWFwKG5vZGUgPT4gbm9kZS5nZXRCQm94KCkpXHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZnJvbVBvc1dpdGhNYXJnaW4gPSBCQm94SGVscGVyLm1vdmVJbkRpcmVjdGlvbihmcm9tUG9zLCBlZGdlLmZyb20uc2lkZSwgMTApXHJcbiAgICAgICAgY29uc3QgdG9Qb3NXaXRoTWFyZ2luID0gQkJveEhlbHBlci5tb3ZlSW5EaXJlY3Rpb24odG9Qb3MsIGVkZ2UudG8uc2lkZSwgMTApXHJcblxyXG4gICAgICAgIGNvbnN0IGdyaWRSZXNvbHV0aW9uID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0U2V0dGluZygnZWRnZVN0eWxlUGF0aGZpbmRlckdyaWRSZXNvbHV0aW9uJylcclxuICAgICAgICBjb25zdCBwYXRoQXJyYXkgPSBBU3RhckhlbHBlci5hU3Rhcihmcm9tUG9zV2l0aE1hcmdpbiwgZWRnZS5mcm9tLnNpZGUsIHRvUG9zV2l0aE1hcmdpbiwgZWRnZS50by5zaWRlLCBub2RlQkJveGVzLCBncmlkUmVzb2x1dGlvbilcclxuICAgICAgICBpZiAoIXBhdGhBcnJheSkgcmV0dXJuIC8vIE5vIHBhdGggZm91bmQgLSB1c2UgZGVmYXVsdCBwYXRoXHJcblxyXG4gICAgICAgIC8vIE1ha2UgY29ubmVjdGlvbiBwb2ludHMgdG8gdGhlIG5vZGUgcmVtb3ZpbmcgdGhlIG1hcmdpblxyXG4gICAgICAgIHBhdGhBcnJheS5zcGxpY2UoMCwgMCwgZnJvbVBvcylcclxuICAgICAgICBwYXRoQXJyYXkuc3BsaWNlKHBhdGhBcnJheS5sZW5ndGgsIDAsIHRvUG9zKVxyXG5cclxuICAgICAgICBjb25zdCByb3VuZGVkUGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2VkZ2VTdHlsZVBhdGhmaW5kZXJQYXRoUm91bmRlZCcpXHJcbiAgICAgICAgY29uc3Qgc3ZnUGF0aCA9IFN2Z1BhdGhIZWxwZXIucGF0aEFycmF5VG9TdmdQYXRoKHBhdGhBcnJheSwgcm91bmRlZFBhdGgpXHJcblxyXG4gICAgICAgIG5ld1BhdGggPSBzdmdQYXRoXHJcbiAgICAgICAgZWRnZS5jZW50ZXIgPSBwYXRoQXJyYXlbTWF0aC5mbG9vcihwYXRoQXJyYXkubGVuZ3RoIC8gMildXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGVkZ2UucGF0aC5pbnRlcmFjdGlvbi5zZXRBdHRyKFwiZFwiLCBuZXdQYXRoKVxyXG4gICAgICBlZGdlLnBhdGguZGlzcGxheS5zZXRBdHRyKFwiZFwiLCBuZXdQYXRoKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSBsYWJlbCBwb3NpdGlvblxyXG4gICAgZWRnZS5sYWJlbEVsZW1lbnQ/LnJlbmRlcigpXHJcblxyXG4gICAgLy8gUm90YXRlIGFycm93cyBhY2NvcmRpbmdseVxyXG4gICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmdldFNldHRpbmcoJ2VkZ2VTdHlsZURpcmVjdFJvdGF0ZUFycm93JykpIHtcclxuICAgICAgY29uc3QgZWRnZVJvdGF0aW9uID0gTWF0aC5hdGFuMihlZGdlLmJlemllci50by55IC0gZWRnZS5iZXppZXIuZnJvbS55LCBlZGdlLmJlemllci50by54IC0gZWRnZS5iZXppZXIuZnJvbS54KSAtIChNYXRoLlBJIC8gMilcclxuICAgICAgY29uc3Qgc2V0QXJyb3dSb3RhdGlvbiA9IChlbGVtZW50OiBIVE1MRWxlbWVudCwgc2lkZTogU2lkZSwgcm90YXRpb246IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gZWxlbWVudC5zdHlsZS50cmFuc2Zvcm1cclxuICAgICAgICAgIC5yZXBsYWNlKC9yb3RhdGVcXChbLVxcZF0rKGRlZ3xyYWQpXFwpL2csIGByb3RhdGUoJHtyb3RhdGlvbn1yYWQpYClcclxuXHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gQkJveEhlbHBlci5nZXRTaWRlVmVjdG9yKHNpZGUpXHJcbiAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2xhdGUgPSBgJHtvZmZzZXQueCAqIDd9cHggJHtvZmZzZXQueSAqIC03fXB4YFxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAocGF0aFJvdXRlVHlwZSA9PT0gJ2RpcmVjdCcpIHtcclxuICAgICAgICBpZiAoZWRnZS5mcm9tTGluZUVuZD8uZWwpIHNldEFycm93Um90YXRpb24oZWRnZS5mcm9tTGluZUVuZC5lbCwgZWRnZS5mcm9tLnNpZGUsIGVkZ2VSb3RhdGlvbilcclxuICAgICAgICBpZiAoZWRnZS50b0xpbmVFbmQ/LmVsKSBzZXRBcnJvd1JvdGF0aW9uKGVkZ2UudG9MaW5lRW5kLmVsLCBlZGdlLnRvLnNpZGUsIGVkZ2VSb3RhdGlvbiAtIE1hdGguUEkpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGVkZ2UuZnJvbUxpbmVFbmQ/LmVsKSBlZGdlLmZyb21MaW5lRW5kLmVsLnN0eWxlLnRyYW5zbGF0ZSA9IFwiXCJcclxuICAgICAgICBpZiAoZWRnZS50b0xpbmVFbmQ/LmVsKSBlZGdlLnRvTGluZUVuZC5lbC5zdHlsZS50cmFuc2xhdGUgPSBcIlwiXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25FZGdlQ2VudGVyUmVxdWVzdGVkKF9jYW52YXM6IENhbnZhcywgZWRnZTogQ2FudmFzRWRnZSwgY2VudGVyOiBQb3NpdGlvbikge1xyXG4gICAgY2VudGVyLnggPSBlZGdlLmNlbnRlcj8ueCA/PyBjZW50ZXIueFxyXG4gICAgY2VudGVyLnkgPSBlZGdlLmNlbnRlcj8ueSA/PyBjZW50ZXIueVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRBcnJvd1BvbHlnb25Qb2ludHMoYXJyb3dTdHlsZT86IHN0cmluZyB8IG51bGwpOiBzdHJpbmcge1xyXG4gICAgaWYgKGFycm93U3R5bGUgPT09ICdoYWx2ZWQtdHJpYW5nbGUnKVxyXG4gICAgICByZXR1cm4gYC0yLDAgNy41LDEyIC0yLDEyYFxyXG4gICAgZWxzZSBpZiAoYXJyb3dTdHlsZSA9PT0gJ3RoaW4tdHJpYW5nbGUnKVxyXG4gICAgICByZXR1cm4gYDAsMCA3LDEwIDAsMCAwLDEwIDAsMCAtNywxMGBcclxuICAgIGVsc2UgaWYgKGFycm93U3R5bGUgPT09ICdkaWFtb25kJyB8fCBhcnJvd1N0eWxlID09PSAnZGlhbW9uZC1vdXRsaW5lJylcclxuICAgICAgcmV0dXJuIGAwLDAgNSwxMCAwLDIwIC01LDEwYFxyXG4gICAgZWxzZSBpZiAoYXJyb3dTdHlsZSA9PT0gJ2NpcmNsZScgfHwgYXJyb3dTdHlsZSA9PT0gJ2NpcmNsZS1vdXRsaW5lJylcclxuICAgICAgcmV0dXJuIGAwIDAsIDQuOTUgMS44LCA3LjUgNi40NSwgNi42IDExLjcsIDIuNyAxNSwgLTIuNyAxNSwgLTYuNiAxMS43LCAtNy41IDYuNDUsIC00Ljk1IDEuOGBcclxuICAgIGVsc2UgLy8gRGVmYXVsdCB0cmlhbmdsZVxyXG4gICAgICByZXR1cm4gYDAsMCA2LjUsMTAuNCAtNi41LDEwLjRgXHJcbiAgfVxyXG59IiwgImltcG9ydCB7IENhbnZhcywgQ2FudmFzTm9kZSwgQ2FudmFzTm9kZURhdGEgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgU2V0dGluZ3NNYW5hZ2VyIGZyb20gXCJzcmMvc2V0dGluZ3NcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi8uLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEV4cG9zZWROb2RlRGF0YShzZXR0aW5nczogU2V0dGluZ3NNYW5hZ2VyKTogKGtleW9mIENhbnZhc05vZGVEYXRhKVtdIHtcclxuICBjb25zdCBleHBvc2VkRGF0YTogKGtleW9mIENhbnZhc05vZGVEYXRhKVtdID0gW11cclxuXHJcbiAgaWYgKHNldHRpbmdzLmdldFNldHRpbmcoJ25vZGVTdHlsaW5nRmVhdHVyZUVuYWJsZWQnKSkgZXhwb3NlZERhdGEucHVzaCgnc3R5bGVBdHRyaWJ1dGVzJylcclxuICBpZiAoc2V0dGluZ3MuZ2V0U2V0dGluZygnY29sbGFwc2libGVHcm91cHNGZWF0dXJlRW5hYmxlZCcpKSBleHBvc2VkRGF0YS5wdXNoKCdpc0NvbGxhcHNlZCcpXHJcbiAgaWYgKHNldHRpbmdzLmdldFNldHRpbmcoJ3ByZXNlbnRhdGlvbkZlYXR1cmVFbmFibGVkJykpIGV4cG9zZWREYXRhLnB1c2goJ2lzU3RhcnROb2RlJylcclxuICBpZiAoc2V0dGluZ3MuZ2V0U2V0dGluZygncG9ydGFsc0ZlYXR1cmVFbmFibGVkJykpIGV4cG9zZWREYXRhLnB1c2goJ3BvcnRhbFRvRmlsZScsICdwb3J0YWxJZCcpXHJcblxyXG4gIHJldHVybiBleHBvc2VkRGF0YVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb2RlRXhwb3NlckV4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gdHJ1ZSB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Lk5vZGVDaGFuZ2VkLFxyXG4gICAgICAoX2NhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgbm9kZURhdGEgPSBub2RlPy5nZXREYXRhKClcclxuICAgICAgICBpZiAoIW5vZGVEYXRhKSByZXR1cm5cclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBleHBvc2VkRGF0YUtleSBvZiBnZXRFeHBvc2VkTm9kZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpKSB7XHJcbiAgICAgICAgICBjb25zdCBkYXRhc2V0UGFpcnMgPSBub2RlRGF0YVtleHBvc2VkRGF0YUtleV0gaW5zdGFuY2VvZiBPYmplY3RcclxuICAgICAgICAgICAgPyBPYmplY3QuZW50cmllcyhub2RlRGF0YVtleHBvc2VkRGF0YUtleV0pXHJcbiAgICAgICAgICAgIDogW1tleHBvc2VkRGF0YUtleSwgbm9kZURhdGFbZXhwb3NlZERhdGFLZXldXV1cclxuXHJcbiAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBkYXRhc2V0UGFpcnMpIHtcclxuICAgICAgICAgICAgaWYgKCF2YWx1ZSkgZGVsZXRlIG5vZGUubm9kZUVsLmRhdGFzZXRba2V5XVxyXG4gICAgICAgICAgICBlbHNlIG5vZGUubm9kZUVsLmRhdGFzZXRba2V5XSA9IHZhbHVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICApKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMsIENhbnZhc05vZGUgfSBmcm9tIFwic3JjL0B0eXBlcy9DYW52YXNcIlxyXG5pbXBvcnQgeyBnZXRFeHBvc2VkTm9kZURhdGEgfSBmcm9tIFwiLi9ub2RlLWV4cG9zZXJcIlxyXG5pbXBvcnQgeyBDYW52YXNFdmVudCB9IGZyb20gXCJzcmMvY29yZS9ldmVudHNcIlxyXG5pbXBvcnQgQ2FudmFzRXh0ZW5zaW9uIGZyb20gXCIuLi8uLi9jb3JlL2NhbnZhcy1leHRlbnNpb25cIlxyXG5cclxuZXhwb3J0IGNvbnN0IFRBUkdFVF9OT0RFX0RBVEFTRVRfUFJFRklYID0gXCJ0YXJnZXRcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm9kZUludGVyYWN0aW9uRXhwb3NlckV4dGVuc2lvbiBleHRlbmRzIENhbnZhc0V4dGVuc2lvbiB7XHJcbiAgaXNFbmFibGVkKCkgeyByZXR1cm4gdHJ1ZSB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50Lk5vZGVJbnRlcmFjdGlvbixcclxuICAgICAgKGNhbnZhczogQ2FudmFzLCBub2RlOiBDYW52YXNOb2RlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaW50ZXJhY3Rpb25FbCA9IGNhbnZhcy5ub2RlSW50ZXJhY3Rpb25MYXllci5pbnRlcmFjdGlvbkVsXHJcbiAgICAgICAgaWYgKCFpbnRlcmFjdGlvbkVsKSByZXR1cm5cclxuICAgIFxyXG4gICAgICAgIGZvciAoY29uc3QgZGF0YUtleSBvZiBnZXRFeHBvc2VkTm9kZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpKSB7XHJcbiAgICAgICAgICBjb25zdCBkYXRhc2V0S2V5ID0gVEFSR0VUX05PREVfREFUQVNFVF9QUkVGSVggKyBkYXRhS2V5LnRvU3RyaW5nKCkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBkYXRhS2V5LnRvU3RyaW5nKCkuc2xpY2UoMSlcclxuICAgIFxyXG4gICAgICAgICAgY29uc3QgZGF0YVZhbHVlID0gbm9kZT8uZ2V0RGF0YSgpW2RhdGFLZXldXHJcblxyXG4gICAgICAgICAgaWYgKCFkYXRhVmFsdWUpIGRlbGV0ZSBpbnRlcmFjdGlvbkVsLmRhdGFzZXRbZGF0YXNldEtleV1cclxuICAgICAgICAgIGVsc2UgaW50ZXJhY3Rpb25FbC5kYXRhc2V0W2RhdGFzZXRLZXldID0gZGF0YVZhbHVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICApKVxyXG4gIH1cclxufSIsICJpbXBvcnQgeyBDYW52YXMsIENhbnZhc0VkZ2UsIENhbnZhc0VkZ2VEYXRhIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IFNldHRpbmdzTWFuYWdlciBmcm9tIFwic3JjL3NldHRpbmdzXCJcclxuaW1wb3J0IENhbnZhc0V4dGVuc2lvbiBmcm9tIFwiLi4vLi4vY29yZS9jYW52YXMtZXh0ZW5zaW9uXCJcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFeHBvc2VkRWRnZURhdGEoc2V0dGluZ3M6IFNldHRpbmdzTWFuYWdlcik6IChrZXlvZiBDYW52YXNFZGdlRGF0YSlbXSB7XHJcbiAgY29uc3QgZXhwb3NlZERhdGE6IChrZXlvZiBDYW52YXNFZGdlRGF0YSlbXSA9IFtdXHJcblxyXG4gIGlmIChzZXR0aW5ncy5nZXRTZXR0aW5nKCdlZGdlc1N0eWxpbmdGZWF0dXJlRW5hYmxlZCcpKSBleHBvc2VkRGF0YS5wdXNoKCdzdHlsZUF0dHJpYnV0ZXMnKVxyXG4gIGlmIChzZXR0aW5ncy5nZXRTZXR0aW5nKCdwb3J0YWxzRmVhdHVyZUVuYWJsZWQnKSkgZXhwb3NlZERhdGEucHVzaCgnaXNVbnNhdmVkJylcclxuXHJcbiAgcmV0dXJuIGV4cG9zZWREYXRhXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVkZ2VFeHBvc2VyRXh0ZW5zaW9uIGV4dGVuZHMgQ2FudmFzRXh0ZW5zaW9uIHtcclxuICBpc0VuYWJsZWQoKSB7IHJldHVybiB0cnVlIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgQ2FudmFzRXZlbnQuRWRnZUNoYW5nZWQsXHJcbiAgICAgIChfY2FudmFzOiBDYW52YXMsIGVkZ2U6IENhbnZhc0VkZ2UpID0+IHtcclxuICAgICAgICBjb25zdCBlZGdlRGF0YSA9IGVkZ2U/LmdldERhdGEoKVxyXG4gICAgICAgIGlmICghZWRnZURhdGEpIHJldHVyblxyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGV4cG9zZWREYXRhS2V5IG9mIGdldEV4cG9zZWRFZGdlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncykpIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YXNldFBhaXJzID0gZWRnZURhdGFbZXhwb3NlZERhdGFLZXldIGluc3RhbmNlb2YgT2JqZWN0XHJcbiAgICAgICAgICAgICAgPyBPYmplY3QuZW50cmllcyhlZGdlRGF0YVtleHBvc2VkRGF0YUtleV0pXHJcbiAgICAgICAgICAgICAgOiBbW2V4cG9zZWREYXRhS2V5LCBlZGdlRGF0YVtleHBvc2VkRGF0YUtleV1dXVxyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgZGF0YXNldFBhaXJzKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIGVkZ2UucGF0aC5kaXNwbGF5LmRhdGFzZXRba2V5XVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlZGdlLmZyb21MaW5lRW5kPy5lbCkgZGVsZXRlIGVkZ2UuZnJvbUxpbmVFbmQuZWwuZGF0YXNldFtrZXldXHJcbiAgICAgICAgICAgICAgICBpZiAoZWRnZS50b0xpbmVFbmQ/LmVsKSBkZWxldGUgZWRnZS50b0xpbmVFbmQuZWwuZGF0YXNldFtrZXldXHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVkZ2UucGF0aC5kaXNwbGF5LmRhdGFzZXRba2V5XSA9IHZhbHVlXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVkZ2UuZnJvbUxpbmVFbmQ/LmVsKSBlZGdlLmZyb21MaW5lRW5kLmVsLmRhdGFzZXRba2V5XSA9IHZhbHVlXHJcbiAgICAgICAgICAgICAgICBpZiAoZWRnZS50b0xpbmVFbmQ/LmVsKSBlZGdlLnRvTGluZUVuZC5lbC5kYXRhc2V0W2tleV0gPSB2YWx1ZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgKSlcclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCJcclxuaW1wb3J0IHsgQ2FudmFzRXZlbnQgfSBmcm9tIFwic3JjL2NvcmUvZXZlbnRzXCJcclxuaW1wb3J0IFNldHRpbmdzTWFuYWdlciwgeyBBZHZhbmNlZENhbnZhc1BsdWdpblNldHRpbmdzIH0gZnJvbSBcInNyYy9zZXR0aW5nc1wiXHJcbmltcG9ydCBDYW52YXNFeHRlbnNpb24gZnJvbSBcIi4uLy4uL2NvcmUvY2FudmFzLWV4dGVuc2lvblwiXHJcblxyXG5jb25zdCBFWFBPU0VEX1NFVFRJTkdTOiAoa2V5b2YgQWR2YW5jZWRDYW52YXNQbHVnaW5TZXR0aW5ncylbXSA9IFtcclxuICAncGVyZm9ybWFuY2VPcHRpbWl6YXRpb25FbmFibGVkJyxcclxuICAnY29sbGFwc2libGVHcm91cHNGZWF0dXJlRW5hYmxlZCcsXHJcbiAgJ2NvbGxhcHNlZEdyb3VwUHJldmlld09uRHJhZydcclxuXVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FudmFzV3JhcHBlckV4cG9zZXJFeHRlbnNpb24gZXh0ZW5kcyBDYW52YXNFeHRlbnNpb24ge1xyXG4gIGlzRW5hYmxlZCgpIHsgcmV0dXJuIHRydWUgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBTZXR0aW5nc01hbmFnZXIuU0VUVElOR1NfQ0hBTkdFRF9FVkVOVCxcclxuICAgICAgKCkgPT4gdGhpcy51cGRhdGVFeHBvc2VkU2V0dGluZ3ModGhpcy5wbHVnaW4uZ2V0Q3VycmVudENhbnZhcygpKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkNhbnZhc0NoYW5nZWQsXHJcbiAgICAgIChjYW52YXM6IENhbnZhcykgPT4gdGhpcy51cGRhdGVFeHBvc2VkU2V0dGluZ3MoY2FudmFzKVxyXG4gICAgKSlcclxuXHJcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXHJcbiAgICAgIENhbnZhc0V2ZW50LkRyYWdnaW5nU3RhdGVDaGFuZ2VkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMsIGRyYWdnaW5nOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgaWYgKGRyYWdnaW5nKSBjYW52YXMud3JhcHBlckVsLmRhdGFzZXQuaXNEcmFnZ2luZyA9ICd0cnVlJ1xyXG4gICAgICAgIGVsc2UgZGVsZXRlIGNhbnZhcy53cmFwcGVyRWwuZGF0YXNldC5pc0RyYWdnaW5nXHJcbiAgICAgIH1cclxuICAgICkpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZUV4cG9zZWRTZXR0aW5ncyhjYW52YXM6IENhbnZhcyB8IG51bGwpIHtcclxuICAgIGlmICghY2FudmFzKSByZXR1cm5cclxuXHJcbiAgICBmb3IgKGNvbnN0IHNldHRpbmcgb2YgRVhQT1NFRF9TRVRUSU5HUykge1xyXG4gICAgICBjYW52YXMud3JhcHBlckVsLmRhdGFzZXRbc2V0dGluZ10gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZXRTZXR0aW5nKHNldHRpbmcpLnRvU3RyaW5nKClcclxuICAgIH1cclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgQ2FudmFzIH0gZnJvbSBcInNyYy9AdHlwZXMvQ2FudmFzXCI7XHJcbmltcG9ydCB7IENhbnZhc0V2ZW50IH0gZnJvbSBcInNyYy9jb3JlL2V2ZW50c1wiO1xyXG5pbXBvcnQgQWR2YW5jZWRDYW52YXNQbHVnaW4gZnJvbSBcInNyYy9tYWluXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaWdyYXRpb25IZWxwZXIge1xyXG4gIHByaXZhdGUgcGx1Z2luOiBBZHZhbmNlZENhbnZhc1BsdWdpblxyXG5cclxuICBjb25zdHJ1Y3RvcihwbHVnaW46IEFkdmFuY2VkQ2FudmFzUGx1Z2luKSB7XHJcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxyXG4gIH1cclxuXHJcbiAgYXN5bmMgbWlncmF0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRoaXMubWlncmF0ZU5vZGVBbmRFZGdlU3R5bGVzKClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgbWlncmF0ZU5vZGVBbmRFZGdlU3R5bGVzKCk6IHZvaWQge1xyXG4gICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxyXG4gICAgICBDYW52YXNFdmVudC5DYW52YXNDaGFuZ2VkLFxyXG4gICAgICAoY2FudmFzOiBDYW52YXMpID0+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgY2FudmFzLm5vZGVzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgICBjb25zdCBub2RlRGF0YSA9IG5vZGUuZ2V0RGF0YSgpXHJcblxyXG4gICAgICAgICAgY29uc3QgbmV3U3R5bGVBdHRyaWJ1dGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB8IG51bGwgfSA9IHt9XHJcblxyXG4gICAgICAgICAgaWYgKG5vZGVEYXRhLmlzU3RpY2tlcikgbmV3U3R5bGVBdHRyaWJ1dGVzWydib3JkZXInXSA9ICdpbnZpc2libGUnXHJcbiAgICAgICAgICBpZiAobm9kZURhdGEuYm9yZGVyU3R5bGUpIG5ld1N0eWxlQXR0cmlidXRlc1snYm9yZGVyJ10gPSBub2RlRGF0YS5ib3JkZXJTdHlsZVxyXG4gICAgICAgICAgaWYgKG5vZGVEYXRhLnNoYXBlKSB7XHJcbiAgICAgICAgICAgIG5ld1N0eWxlQXR0cmlidXRlcy50ZXh0QWxpZ24gPSAnY2VudGVyJ1xyXG4gICAgICAgICAgICBuZXdTdHlsZUF0dHJpYnV0ZXMuc2hhcGUgPSBub2RlRGF0YS5zaGFwZVxyXG5cclxuICAgICAgICAgICAgaWYgKG5ld1N0eWxlQXR0cmlidXRlcz8uc2hhcGUgPT09ICdjZW50ZXJlZC1yZWN0YW5nbGUnKSBkZWxldGUgbmV3U3R5bGVBdHRyaWJ1dGVzLnNoYXBlXHJcbiAgICAgICAgICAgIGlmIChuZXdTdHlsZUF0dHJpYnV0ZXM/LnNoYXBlID09PSAnb3ZhbCcpIG5ld1N0eWxlQXR0cmlidXRlcy5zaGFwZSA9ICdwaWxsJ1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGRlbGV0ZSBub2RlRGF0YS5pc1N0aWNrZXJcclxuICAgICAgICAgIGRlbGV0ZSBub2RlRGF0YS5ib3JkZXJTdHlsZVxyXG4gICAgICAgICAgZGVsZXRlIG5vZGVEYXRhLnNoYXBlXHJcblxyXG4gICAgICAgICAgbm9kZS5zZXREYXRhKHtcclxuICAgICAgICAgICAgLi4ubm9kZURhdGEsXHJcbiAgICAgICAgICAgIHN0eWxlQXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgIC4uLm5vZGVEYXRhLnN0eWxlQXR0cmlidXRlcyxcclxuICAgICAgICAgICAgICAuLi5uZXdTdHlsZUF0dHJpYnV0ZXNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZWRnZSBvZiBjYW52YXMuZWRnZXMudmFsdWVzKCkpIHtcclxuICAgICAgICAgIGNvbnN0IGVkZ2VEYXRhID0gZWRnZS5nZXREYXRhKClcclxuXHJcbiAgICAgICAgICBjb25zdCBuZXdTdHlsZUF0dHJpYnV0ZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIHwgbnVsbCB9ID0ge31cclxuXHJcbiAgICAgICAgICBpZiAoZWRnZURhdGEuZWRnZVN0eWxlKSBuZXdTdHlsZUF0dHJpYnV0ZXMuZWRnZSA9IGVkZ2VEYXRhLmVkZ2VTdHlsZVxyXG4gICAgICAgICAgaWYgKGVkZ2VEYXRhLmVkZ2VQYXRoUm91dGUpIG5ld1N0eWxlQXR0cmlidXRlcy5wYXRoZmluZGluZ01ldGhvZCA9IGVkZ2VEYXRhLmVkZ2VQYXRoUm91dGVcclxuXHJcbiAgICAgICAgICBkZWxldGUgZWRnZURhdGEuZWRnZVN0eWxlXHJcbiAgICAgICAgICBkZWxldGUgZWRnZURhdGEuZWRnZVBhdGhSb3V0ZVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgKSlcclxuICB9XHJcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQWlDOzs7QUNBMUIsU0FBUyxPQUFPLEtBQUssV0FBVztBQUNuQyxRQUFNLFdBQVcsT0FBTyxLQUFLLFNBQVMsRUFBRSxJQUFJLFNBQU8sUUFBUSxLQUFLLEtBQUssVUFBVSxHQUFHLENBQUMsQ0FBQztBQUNwRixTQUFPLFNBQVMsV0FBVyxJQUFJLFNBQVMsQ0FBQyxJQUFJLFdBQVk7QUFBRSxhQUFTLFFBQVEsT0FBSyxFQUFFLENBQUM7QUFBQSxFQUFHO0FBQzNGO0FBQ0EsU0FBUyxRQUFRLEtBQUssUUFBUSxlQUFlO0FBQ3pDLFFBQU0sV0FBVyxJQUFJLE1BQU0sR0FBRyxTQUFTLElBQUksZUFBZSxNQUFNO0FBQ2hFLE1BQUksVUFBVSxjQUFjLFFBQVE7QUFHcEMsTUFBSTtBQUNBLFdBQU8sZUFBZSxTQUFTLFFBQVE7QUFDM0MsU0FBTyxlQUFlLFNBQVMsT0FBTztBQUN0QyxNQUFJLE1BQU0sSUFBSTtBQUVkLFNBQU87QUFDUCxXQUFTLFdBQVcsTUFBTTtBQUV0QixRQUFJLFlBQVksWUFBWSxJQUFJLE1BQU0sTUFBTTtBQUN4QyxhQUFPO0FBQ1gsV0FBTyxRQUFRLE1BQU0sTUFBTSxJQUFJO0FBQUEsRUFDbkM7QUFDQSxXQUFTLFNBQVM7QUFFZCxRQUFJLElBQUksTUFBTSxNQUFNLFNBQVM7QUFDekIsVUFBSTtBQUNBLFlBQUksTUFBTSxJQUFJO0FBQUE7QUFFZCxlQUFPLElBQUksTUFBTTtBQUFBLElBQ3pCO0FBQ0EsUUFBSSxZ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QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFBQSxFQUNBO0FBQUEsSUFDRSxZQUFZO0FBQUEsSUFDWixPQUFPO0FBQUEsSUFDUCxXQUFXLENBQUMsTUFBTTtBQUFBLElBQ2xCLFNBQVM7QUFBQSxNQUNQO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsTUFDQTtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsTUFDQTtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFBQSxFQUNBO0FBQUEsSUFDRSxZQUFZO0FBQUEsSUFDWixPQUFPO0FBQUEsSUFDUCxTQUFTO0FBQUEsTUFDUDtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsTUFDQTtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUNGO0FBRU8sSUFBTSxnQ0FBZ0M7QUFBQSxFQUMzQztBQUFBLElBQ0UsWUFBWTtBQUFBLElBQ1osT0FBTztBQUFBLElBQ1AsU0FBUztBQUFBLE1BQ1A7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsTUFDQTtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFBQSxFQUNBO0FBQUEsSUFDRSxZQUFZO0FBQUEsSUFDWixPQUFPO0FBQUEsSUFDUCxTQUFTO0FBQUEsTUFDUDtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxNQUNUO0FBQUEsTUFDQTtBQUFBLFFBQ0UsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBLFFBQ1AsT0FBTztBQUFBLE1BQ1Q7QUFBQSxNQUNBO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixPQUFPO0FBQUEsUUFDUCxPQUFPO0FBQUEsTUFDVDtBQUFBLE1BQ0E7QUFBQSxRQUNFLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxR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QUNGO0FBQUEsSUFDRixDQUFDO0FBQUEsRUFDSDtBQUNGOzs7QWpDekJBLElBQU0sb0JBQThDO0FBQUE7QUFBQSxFQUVsRDtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBO0FBQUEsRUFHQTtBQUFBLEVBQ0E7QUFBQTtBQUFBLEVBR0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUE7QUFBQSxFQUdBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNGO0FBRUEsSUFBcUIsdUJBQXJCLGNBQWtELHdCQUFPO0FBQUEsRUFVeEQsTUFBTSxTQUFTO0FBQ1osU0FBSyxrQkFBa0IsSUFBSSxnQkFBZ0IsSUFBSTtBQUMvQyxVQUFNLEtBQUssZ0JBQWdCLFFBQVE7QUFFbkMsZ0JBQVksU0FBUztBQUVyQixTQUFLLFdBQVcsSUFBSSxnQkFBZ0IsSUFBSTtBQUN4QyxVQUFNLEtBQUssU0FBUyxhQUFhO0FBQ2pDLFNBQUssU0FBUyxlQUFlO0FBRTdCLFNBQUssaUJBQWlCLElBQUksZUFBZSxJQUFJO0FBRTdDLFNBQUssZ0JBQWdCLElBQUksY0FBYyxJQUFJO0FBQzNDLFNBQUssbUJBQW1CLGtCQUFrQixJQUFJLENBQUMsY0FBbUIsSUFBSSxVQUFVLElBQUksQ0FBQztBQUFBLEVBQ3hGO0FBQUEsRUFFQyxXQUFXO0FBQUEsRUFBQztBQUFBLEVBRVosdUJBQXdDO0FBQ3RDLFVBQU0sYUFBYSxLQUFLLElBQUksVUFBVSxvQkFBb0IseUJBQVE7QUFDbEUsU0FBSSx5Q0FBWSxtQkFBa0I7QUFBVSxhQUFPO0FBQ25ELFdBQU87QUFBQSxFQUNUO0FBQUEsRUFFQSxtQkFBZ0M7QUFoR2xDO0FBaUdJLGFBQU8sVUFBSyxxQkFBcUIsTUFBMUIsbUJBQTZCLFdBQVU7QUFBQSxFQUNoRDtBQUFBO0FBQUEsRUFHQSxrQkFBa0I7QUFDaEIsUUFBSSxLQUFLO0FBQWE7QUFDdEIsU0FBSyxjQUFjLElBQUksWUFBWSxJQUFJO0FBQUEsRUFDekM7QUFDRjsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgInVwZGF0ZSIsICJkYXRhIiwgImNhbnZhc1ZpZXciLCAiaW1wb3J0X29ic2lkaWFuIiwgIndpbmRvdyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAiX2IiLCAibGVmdFBvc2l0aW9uIiwgInJpZ2h0UG9zaXRpb24iLCAiY2FudmFzIiwgImltcG9ydF9vYnNpZGlhbiIsICJjYW52YXMiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJub2RlIiwgIl9hIiwgIl9iIiwgIm5vZGUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJESVJFQ1RJT05TIl0KfQo=
